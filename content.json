{"meta":{"title":"Givingcode","subtitle":"å¦‚æœç¬¬ä¸€æ¬¡å¤±è´¥äº†ï¼Œé‚£è¿™æ˜¯1.0ç‰ˆæœ¬ï¼Œè¯·ç»§ç»­åŠªåŠ›","description":"å¦‚æœç¬¬ä¸€æ¬¡å¤±è´¥äº†ï¼Œé‚£è¿™æ˜¯1.0ç‰ˆæœ¬ï¼Œè¯·ç»§ç»­åŠªåŠ›","author":"Givingcode","url":""},"pages":[{"title":"åˆ†ç±»","date":"2018-01-04T16:00:00.000Z","updated":"2020-02-15T11:58:37.599Z","comments":false,"path":"categories/index.html","permalink":"/categories/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2018-01-04T16:00:00.000Z","updated":"2020-02-15T11:58:37.600Z","comments":false,"path":"tags/index.html","permalink":"/tags/index.html","excerpt":"","text":""},{"title":"é‚£äº›å¹´æˆ‘ä»¬å¬è¿‡çš„æ­Œ","date":"2020-02-15T08:27:52.000Z","updated":"2020-02-15T12:05:40.437Z","comments":false,"path":"music/index.html","permalink":"/music/index.html","excerpt":"","text":"var options = {\"narrow\":false,\"autoplay\":true,\"showlrc\":3,\"mode\":\"random\",\"mutex\":true,\"theme\":\"#e6d0b2\",\"preload\":\"metadata\",\"listmaxheight\":\"513px\",\"music\":[{\"title\":\"Faded\",\"author\":\"Alan Walke\",\"url\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/Faded.flac\",\"pic\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/Alan Walke.png\",\"lrc\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/Faded.lrc\"},{\"title\":\"çœŸçš„çˆ±ä½ \",\"author\":\"Beyond\",\"url\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/çœŸçš„çˆ±ä½ .wav\",\"pic\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/beyond.png\",\"lrc\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/çœŸçš„çˆ±ä½ .lrc\"},{\"title\":\"å‡‰å‡‰\",\"author\":\"å†¯æè«ã€æ¨å®—çº¬\",\"url\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/å†¯æè«ã€æ¨å®—çº¬+-+å‡‰å‡‰.flac\",\"pic\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/å†¯æè«.png\",\"lrc\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/å‡‰å‡‰.lrc\"},{\"title\":\"é˜¿åˆ\",\"author\":\"å¼ éŸ¶æ¶µ\",\"url\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/å¼ éŸ¶æ¶µ - é˜¿åˆ.flac\",\"pic\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/å¼ éŸ¶æ¶µ.png\",\"lrc\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/é˜¿åˆ.lrc\"},{\"title\":\"Sing Me to Sleep\",\"author\":\"Alan Walke\",\"url\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/Sing Me to Sleep.flac\",\"pic\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/Alan Walke.png\"},{\"title\":\"The Spectre\",\"author\":\"Alan Walke\",\"url\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/The Spectre.flac\",\"pic\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/Alan Walke.png\"},{\"title\":\"Tired\",\"author\":\"Alan Walke\",\"url\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/Tired.flac\",\"pic\":\"https://raw.githubusercontent.com/wiki/Givingcode/images/music/Alan Walke.png\"}]}; options.element = document.getElementById(\"aplayer-aIgIPlEA\"); var ap = new APlayer(options); window.aplayers || (window.aplayers = []); window.aplayers.push(ap);"},{"title":"é‚£äº›å¹´æˆ‘åˆ°è¿‡çš„åœ°æ–¹","date":"2018-09-30T09:25:30.000Z","updated":"2020-02-15T11:58:37.599Z","comments":false,"path":"gallery/index.html","permalink":"/gallery/index.html","excerpt":"","text":"Chengdu Cambodia Philippines"}],"posts":[{"title":"pythonè‡ªåŠ¨åŒ–æ‰“åŒ…éƒ¨ç½²","slug":"pythonè‡ªåŠ¨åŒ–æ‰“åŒ…éƒ¨ç½²","date":"2020-04-12T09:51:13.000Z","updated":"2020-04-27T06:05:39.559Z","comments":true,"path":"2020/04/12/pythonè‡ªåŠ¨åŒ–æ‰“åŒ…éƒ¨ç½²/","link":"","permalink":"/2020/04/12/pythonè‡ªåŠ¨åŒ–æ‰“åŒ…éƒ¨ç½²/","excerpt":"","text":"åŸºäºpythonå®ç°å‰ç«¯é¡¹ç›®æ‰“åŒ…éƒ¨ç½²ï¼Œä½¿ç”¨æ–¹æ³•ï¼š æœ¬åœ°å®‰è£…pythonç¯å¢ƒï¼Œå¹¶ä¸”é…ç½®å¥½ç¯å¢ƒå˜é‡ï¼Œä¸ä¼šçš„ç‚¹æˆ‘ åœ¨æœ¬åœ°æ–°å»ºauto.pyç„¶åç²˜è´´è¿›ä»¥ä¸‹è„šæœ¬ï¼Œç„¶åä¿®æ”¹é¡¶éƒ¨æ³¨é‡Šéƒ¨åˆ†çš„ç›¸å…³å‚æ•° æ‰“å¼€å‘½ä»¤è¡Œå·¥å…·ï¼Œcdåˆ°auto.pyæ‰€åœ¨ç›®å½•ï¼Œç„¶åpython auto.pyå›è½¦æ‰§è¡Œè„šæœ¬ æŒ‰ç…§æç¤ºè¾“å…¥æœåŠ¡å™¨ç™»å½•å¯†ç ï¼Œå›è½¦ python123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169import paramikoimport os# â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”æ­¤å¤„é…ç½®æ‰“åŒ…ç›¸å…³å‚æ•°â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”# æœ¬åœ°é¡¹ç›®ç›®å½•project_path = r'E:\\projects\\cloud-music'# é¡¹ç›®æ‰“åŒ…åçš„ç›®å½•ï¼Œä¸€èˆ¬ä¸ºdistæˆ–è€…buildbuild_path = 'build'# æœåŠ¡å™¨ç›®å½•remote_path = r'/www/cloud-music'# æœåŠ¡å™¨åœ°å€hostname = '192.168.1.225'# ç™»é™†æœåŠ¡å™¨çš„ç”¨æˆ·åusername = 'fuck'# â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”é…ç½®ç»“æŸâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”class SSHConnect: # å®šä¹‰ä¸€ä¸ªç§æœ‰å˜é‡ï¼Œç”¨æ¥ä¿å­˜sshè¿æ¥é€šé“ï¼Œåˆå§‹åŒ–ä¸ºNone __transport = None # åˆå§‹åŒ–æ„é€ å‡½æ•°ï¼ˆä¸»æœºï¼Œç”¨æˆ·åï¼Œå¯†ç ï¼Œç«¯å£ï¼Œé»˜è®¤22ï¼‰ def __init__(self, hostname, username, password, port=22): self.hostname = hostname self.port = port self.username = username self.password = password # åˆ›å»º ssh è¿æ¥é€šé“ self.connect() # å»ºç«‹ssh è¿æ¥é€šé“ï¼Œå¹¶ç»‘å®šåœ¨ __transport ä¸Š def connect(self): try: # è®¾ç½®SSH è¿æ¥çš„è¿œç¨‹ä¸»æœºåœ°å€å’Œç«¯å£ self.__transport = paramiko.Transport((self.hostname, self.port)) # é€šè¿‡ç”¨æˆ·åå’Œå¯†ç è¿æ¥SSHæœåŠ¡ç«¯ self.__transport.connect(username=self.username, password=self.password) except Exception as e: # è¿æ¥å‡ºé”™ print(e) # æ‰§è¡Œlinuxå‘½ä»¤ def exec(self, command): # åˆ›å»º ssh å®¢æˆ·ç«¯ ssh = paramiko.SSHClient() # æŒ‡å®šè¿æ¥çš„é€šé“ ssh._transport = self.__transport # æ‰“å¼€ä¸€ä¸ªChannelå¹¶æ‰§è¡Œå‘½ä»¤, è°ƒç”¨ exec_command æ–¹æ³•æ‰§è¡Œå‘½ä»¤ stdin, stdout, stderr = ssh.exec_command(command) # è·å–å‘½ä»¤ç»“æœï¼Œè¿”å›æ˜¯äºŒè¿›åˆ¶ï¼Œéœ€è¦ç¼–ç ä¸€ä¸‹ res = stdout.read().decode('utf-8') # è·å–é”™è¯¯ä¿¡æ¯ error = stderr.read().decode('utf-8') # å¦‚æœæ²¡å‡ºé”™ if error.strip(): # è¿”å›é”™è¯¯ä¿¡æ¯ return error else: # è¿”å›ç»“æœ return res # å‰ç«¯æ‰“åŒ…ï¼ˆå…¥å‚work_pathä¸ºé¡¹ç›®ç›®å½•ï¼‰ def build(self, work_path): # å¼€å§‹æ‰“åŒ… print('_______________________________________________') print('æ­£åœ¨æ‰“åŒ…...') # æ‰“åŒ…å‘½ä»¤ cmd = 'npm run build' # åˆ‡æ¢åˆ°éœ€è¦é¡¹ç›®ç›®å½• os.chdir(work_path) # å½“å‰é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ if os.system(cmd) == 0: # æ‰“åŒ…å®Œæˆ print('æ‰“åŒ…å®Œæˆï¼') print('å¼€å§‹ä¸Šä¼ æ–‡ä»¶...') # æ–‡ä»¶ä¸Šä¼  def upload(self, local_path, target_path): # åˆ¤æ–­è·¯å¾„é—®é¢˜ if not os.path.exists(local_path): return print('local path is not exist') # å®ä¾‹åŒ–ä¸€ä¸ª sftp å¯¹è±¡,æŒ‡å®šè¿æ¥çš„é€šé“ sftp = paramiko.SFTPClient.from_transport(self.__transport) # æ‰“åŒ…åçš„æ–‡ä»¶è·¯å¾„ local_path = os.path.join(local_path, build_path) # æœ¬åœ°è·¯å¾„è½¬æ¢ï¼Œå°†windowsä¸‹çš„ \\ è½¬æˆ / local_path = '/'.join(local_path.split('\\\\')) # é€’å½’ä¸Šä¼ æ–‡ä»¶ self.upload_file(sftp, local_path, target_path) print('Everything is ok,Have a nice day!') # å…³é—­è¿æ¥ self.close() # é€’å½’ä¸Šä¼ æ–‡ä»¶ def upload_file(self, sftp, local_path, target_path): # åˆ¤æ–­å½“å‰è·¯å¾„æ˜¯å¦æ˜¯æ–‡ä»¶å¤¹ if not os.path.isdir(local_path): # å¦‚æœæ˜¯æ–‡ä»¶ï¼Œè·å–æ–‡ä»¶å file_name = os.path.basename(local_path) # æ£€æŸ¥æœåŠ¡å™¨æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨ self.check_remote_dir(sftp, target_path) # æœåŠ¡å™¨åˆ›å»ºæ–‡ä»¶ target_file_path = os.path.join(target_path, file_name).replace('\\\\', '/') # ä¸Šä¼ åˆ°æœåŠ¡å™¨ sftp.put(local_path, target_file_path) else: # æŸ¥çœ‹å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„å­æ–‡ä»¶ file_list = os.listdir(local_path) # éå†å­æ–‡ä»¶ for p in file_list: # æ‹¼æ¥å½“å‰æ–‡ä»¶è·¯å¾„ current_local_path = os.path.join(local_path, p).replace('\\\\', '/') # æ‹¼æ¥æœåŠ¡å™¨æ–‡ä»¶è·¯å¾„ current_target_path = os.path.join(target_path, p).replace('\\\\', '/') # å¦‚æœå·²ç»æ˜¯æ–‡ä»¶ï¼ŒæœåŠ¡å™¨å°±ä¸éœ€è¦åˆ›å»ºæ–‡ä»¶å¤¹äº† if os.path.isfile(current_local_path): # æå–å½“å‰æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹ current_target_path = os.path.split(current_target_path)[0] # é€’å½’åˆ¤æ–­ self.upload_file(sftp, current_local_path, current_target_path) # åˆ›å»ºæœåŠ¡å™¨æ–‡ä»¶å¤¹ def check_remote_dir(self, sftp, target_path): try: # åˆ¤æ–­æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨ sftp.stat(target_path) except IOError: # åˆ›å»ºæ–‡ä»¶å¤¹ self.exec(r'mkdir -p %s ' % target_path) # è‡ªåŠ¨åŒ–æ‰“åŒ…éƒ¨ç½² def auto_deploy(self, local_path, target_path): # æ‰“åŒ…æ„å»º self.build(local_path) # æ¸…ç©ºæ–‡ä»¶ self.clear_remote_dir(target_path) # æ–‡ä»¶ä¸Šä¼  self.upload(local_path, target_path) # æ¸…ç©ºæ–‡ä»¶å¤¹ def clear_remote_dir(self, target_path): if target_path[-1] == '/': cmd = f'rm -rf &#123;target_path&#125;*' else: cmd = f'rm -rf &#123;target_path&#125;/*' self.exec(cmd) # å…³é—­è¿æ¥ def close(self): self.__transport.close() # é”€æ¯å®ä¾‹ def __del__(self): self.__transport.close()if __name__ == '__main__': # å®ä¾‹åŒ– password = input(\"è¯·è¾“å…¥æœåŠ¡å™¨è¿æ¥å¯†ç ï¼š\") ssh = SSHConnect(hostname=hostname, username=username, password=password) # è‡ªåŠ¨æ‰“åŒ…éƒ¨ç½² ssh.auto_deploy(project_path, remote_path)","categories":[{"name":"Python","slug":"Python","permalink":"/categories/Python/"}],"tags":[{"name":"Python","slug":"Python","permalink":"/tags/Python/"},{"name":"éƒ¨ç½²","slug":"éƒ¨ç½²","permalink":"/tags/éƒ¨ç½²/"},{"name":"è‡ªåŠ¨åŒ–","slug":"è‡ªåŠ¨åŒ–","permalink":"/tags/è‡ªåŠ¨åŒ–/"}],"keywords":[{"name":"Python","slug":"Python","permalink":"/categories/Python/"}]},{"title":"pm2å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²","slug":"pm2å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²","date":"2020-03-01T07:21:45.000Z","updated":"2020-03-29T08:24:35.415Z","comments":true,"path":"2020/03/01/pm2å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²/","link":"","permalink":"/2020/03/01/pm2å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²/","excerpt":"","text":"åŸºäºgitï¼Œä½¿ç”¨nodeçš„pm2å®ç°é¡¹ç›®çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼ŒæœåŠ¡å™¨ç¯å¢ƒä»¥centosä¸ºä¾‹ ç¯å¢ƒé…ç½®å› ä¸ºæ˜¯åŸºäºgitå’Œnodeï¼Œæ‰€ä»¥æœ¬æœºå’Œéƒ¨ç½²é¡¹ç›®çš„æœåŠ¡å™¨éƒ½éœ€è¦å®‰è£…nodeå’Œgitï¼Œç„¶åå®‰è£…pm2æœ¬åœ°ç¯å¢ƒæ¯”è¾ƒç®€å•ï¼Œä¸èµ˜è¿°ï¼Œcentosä¸‹å¯ä»¥å€ŸåŠ©yumæ¥å®‰è£…bash123456yum install -y nodejs# è£…å®Œä»¥åç»§ç»­å®‰è£…pm2ï¼Œæœ¬åœ°ç¯å¢ƒåŒç†npm install pm2 -g# æ¥ä¸‹æ¥å®‰è£…gityum install -y git# å®‰è£…å®Œä»¥åå¯ä»¥git -væŸ¥çœ‹ç‰ˆæœ¬ é…ç½®ssh keyè¿™ä¸€æ­¥æ˜¯ä¸ºäº†è®©æœ¬åœ°è®¡ç®—æœºã€githubã€æœåŠ¡å™¨ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œå› æ­¤æœ¬æœºå’Œéƒ¨ç½²é¡¹ç›®çš„æœåŠ¡å™¨éƒ½éœ€è¦æ·»åŠ sshï¼Œè¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œä¸ä¼šçš„å¯ä»¥å‚è€ƒGithub ç®€æ˜æ•™ç¨‹ æ·»åŠ pm2é…ç½®æ–‡ä»¶åœ¨æœ¬åœ°é¡¹ç›®æ ¹ç›®å½•æ·»åŠ ecosystem.jsonï¼ï¼ï¼æ³¨æ„ï¼šå› ä¸ºæ˜¯jsonæ ¼å¼ï¼Œå®é™…ä½¿ç”¨è¯·åˆ é™¤æ³¨é‡Šjavascript1234567891011121314151617181920212223242526272829303132333435&#123; \"apps\":[ &#123; \"name\": \"app\", // é¡¹ç›®åç§° \"script\": \"app.js\", // å…¥å£æ–‡ä»¶ \"env\": &#123; \"COMMON_VARIABLE\": \"true\" &#125;, \"env_production\": &#123; \"NODE_ENV\": \"production\" // ç¯å¢ƒå˜é‡ &#125; &#125; ], // ç¯å¢ƒéƒ¨ç½²çš„é…ç½® \"deploy\": &#123; \"production\": &#123; // ç™»å½•æœåŠ¡å™¨çš„ç”¨æˆ·å \"user\":\"slevin\", // æœåŠ¡å™¨ip \"host\": [\"12.34.56.78\"], // æœåŠ¡å™¨sshç™»å½•ç«¯å£ï¼Œæœªä¿®æ”¹çš„è¯ä¸€èˆ¬é»˜è®¤ä¸º22 \"port\": \"22\", // æŒ‡å®šæ‹‰å–çš„åˆ†æ”¯ \"ref\": \"origin/master\", // è¿œç¨‹ä»“åº“åœ°å€ \"repo\": \"git@github.com:yourName/xxx.git\", // æŒ‡å®šä»£ç æ‹‰å–åˆ°æœåŠ¡å™¨çš„ç›®å½• \"path\": \"/home/projects/xxx\", \"ssh_options\": \"StrictHostKeyChecking=no\", \"env\": &#123; \"NODE_ENV\": \"production\" &#125; &#125; &#125;&#125; æœ¬åœ°pushä¸æœåŠ¡å™¨ç«¯pull githubä¸Šåˆ›å»ºä»“åº“ï¼Œæ¯”å¦‚xxx åœ¨æœ¬åœ°é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ bash1234git init # åˆå§‹åŒ–ä»“åº“git commit -m \"init project\" # æ·»åŠ æäº¤ä¿¡æ¯git remote add origin git@github.com:yourName/xxx.git # æŒ‡å®šremoteåœ°å€git push -u origin master # æ¨é€ åœ¨æœåŠ¡å™¨ç«¯ bash1234cd /home/projects/git clone git@github.com:yourName/xxx.git # å…‹éš†githubé¡¹ç›®ï¼Œ(énodeé¡¹ç›®ç•¥è¿‡ä¸‹é¢2æ­¥)cd xxxnpm install # å®‰è£…ä¾èµ– psï¼šä»¥ä¸Šæ­¥éª¤é¦–æ¬¡æ“ä½œå¯èƒ½ä¼šæç¤ºä½ è¾“å…¥githubç™»é™†å¯†ç  è‡ªåŠ¨åŒ–éƒ¨ç½²bash12pm2 deploy ecosystem.json production setup # é¦–æ¬¡éƒ¨ç½²æ‰§è¡Œä¸€æ¬¡å³å¯pm2 deploy ecosystem.json production åç»­å¼€å‘ä¸­ï¼Œæäº¤æœ¬åœ°ä»£ç åˆ°remoteåï¼Œåªéœ€è¦æ‰§è¡Œpm2 deploy ecosystem.json productionå³å¯ é—®é¢˜å¤„ç† æç¤ºbash: pm2: command not found post-deploy hook failed Deploy failed 1å³æ˜¯ï¼šæ‰¾ä¸åˆ°pm2å‘½ä»¤ï¼Œè§£å†³åŠæ³•ï¼Œæ·»åŠ pm2çš„è½¯é“¾æ¥ï¼Œåœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œï¼šbash123456# æŸ¥æ‰¾pm2çš„è·¯å¾„whereis pm2# pm2: /usr/bin/pm2 /root/node/bin/pm2ï¼Œæ·»åŠ è½¯è¿æ¥#sudo ln -s [æŸ¥æ‰¾åˆ°çš„é“¾æ¥] /usr/bin/pm2# å³æ˜¯ï¼š sudo ln -s /usr/bin/pm2 /root/node/bin/pm2 /usr/bin/pm2","categories":[{"name":"node","slug":"node","permalink":"/categories/node/"}],"tags":[{"name":"pm2","slug":"pm2","permalink":"/tags/pm2/"},{"name":"éƒ¨ç½²","slug":"éƒ¨ç½²","permalink":"/tags/éƒ¨ç½²/"}],"keywords":[{"name":"node","slug":"node","permalink":"/categories/node/"}]},{"title":"ReactçŠ¶æ€é€»è¾‘å¤ç”¨","slug":"ReactçŠ¶æ€é€»è¾‘å¤ç”¨","date":"2020-02-15T06:22:33.000Z","updated":"2020-02-15T11:58:37.598Z","comments":true,"path":"2020/02/15/ReactçŠ¶æ€é€»è¾‘å¤ç”¨/","link":"","permalink":"/2020/02/15/ReactçŠ¶æ€é€»è¾‘å¤ç”¨/","excerpt":"","text":"Mixinå…³äºMixinMixinï¼ˆæ··å…¥ï¼‰æ˜¯ä¸€ç§é€šè¿‡æ‰©å±•æ”¶é›†åŠŸèƒ½çš„æ–¹å¼ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯å°†ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ‹·è´åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸Šé¢å»ï¼Œä¸è¿‡ä½ å¯ä»¥æ‹·è´ä»»æ„å¤šä¸ªå¯¹è±¡çš„ä»»æ„æ–¹æ³•åˆ°ä¸€ä¸ªæ–°å¯¹è±¡ä¸Šå»ï¼Œè¿™æ˜¯ç»§æ‰¿æ‰€ä¸èƒ½å®ç°çš„ã€‚å®ƒçš„å‡ºç°ä¸»è¦å°±æ˜¯ä¸ºäº†è§£å†³ä»£ç å¤ç”¨é—®é¢˜ã€‚ å†™ä¸€ä¸ªç®€å•çš„Mixinæ–¹æ³•ï¼šjavascript12345678910111213141516function setMixin(target, mixin) &#123; if (arguments[2]) &#123; for (var i = 2, len = arguments.length; i &lt; len; i++) &#123; target.prototype[arguments[i]] = mixin.prototype[arguments[i]]; &#125; &#125; else &#123; for (var methodName in mixin.prototype) &#123; if (!Object.hasOwnProperty(target.prototype, methodName)) &#123; target.prototype[methodName] = mixin.prototype[methodName]; &#125; &#125; &#125;&#125;setMixin(User,LogMixin,'actionLog');setMixin(Goods,LogMixin,'requestLog'); Mixinåº”ç”¨Reactä¹Ÿæä¾›äº†Mixinçš„å®ç°ï¼Œå¦‚æœå®Œå…¨ä¸åŒçš„ç»„ä»¶æœ‰ç›¸ä¼¼çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥æ¥å®ç°ä»£ç å¤ç”¨ï¼Œå½“ç„¶åªæœ‰åœ¨ä½¿ç”¨createClassæ¥åˆ›å»ºReactç»„ä»¶æ—¶æ‰å¯ä»¥ä½¿ç”¨ï¼Œå› ä¸ºåœ¨Reactç»„ä»¶çš„es6å†™æ³•ä¸­å®ƒå·²ç»è¢«åºŸå¼ƒæ‰äº†ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œå¾ˆå¤šç»„ä»¶æˆ–é¡µé¢éƒ½éœ€è¦è®°å½•ç”¨æˆ·è¡Œä¸ºï¼Œæ€§èƒ½æŒ‡æ ‡ç­‰ã€‚å¦‚æœæˆ‘ä»¬åœ¨æ¯ä¸ªç»„ä»¶éƒ½å¼•å…¥å†™æ—¥å¿—çš„é€»è¾‘ï¼Œä¼šäº§ç”Ÿå¤§é‡é‡å¤ä»£ç ï¼Œé€šè¿‡Mixinæˆ‘ä»¬å¯ä»¥è§£å†³è¿™ä¸€é—®é¢˜ï¼šjavascript12345678910111213141516171819202122232425const LogMixin = &#123; log: function() &#123; console.log('log'); &#125;, componentDidMount: function() &#123; console.log('in'); &#125;, componentWillUnmount: function() &#123; console.log('out'); &#125;&#125;;const User = React.createClass(&#123; mixins: [LogMixin], render: function() &#123; return (&lt;div&gt;...&lt;/div&gt;) &#125;&#125;);const Goods = React.createClass(&#123; mixins: [LogMixin], render: function() &#123; return (&lt;div&gt;...&lt;/div&gt;) &#125;&#125;); ç¼ºç‚¹ Mixin å¯èƒ½ä¼šç›¸äº’ä¾èµ–ï¼Œç›¸äº’è€¦åˆï¼Œä¸åˆ©äºä»£ç ç»´æŠ¤ ä¸åŒçš„Mixinä¸­çš„æ–¹æ³•å¯èƒ½ä¼šç›¸äº’å†²çª Mixinéå¸¸å¤šæ—¶ï¼Œç»„ä»¶æ˜¯å¯ä»¥æ„ŸçŸ¥åˆ°çš„ï¼Œç”šè‡³è¿˜è¦ä¸ºå…¶åšç›¸å…³å¤„ç†ï¼Œè¿™æ ·ä¼šç»™ä»£ç é€ æˆæ»šé›ªçƒå¼çš„å¤æ‚æ€§ HOCå…³äºHOC é«˜é˜¶ç»„ä»¶å¯ä»¥çœ‹ä½œReactå¯¹è£…é¥°æ¨¡å¼çš„ä¸€ç§å®ç°ï¼Œé«˜é˜¶ç»„ä»¶å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸”è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ã€‚ HOCæ˜¯Reactä¸­çš„é«˜çº§æŠ€æœ¯ï¼Œç”¨æ¥é‡ç”¨ç»„ä»¶é€»è¾‘ã€‚ä½†é«˜é˜¶ç»„ä»¶æœ¬èº«å¹¶ä¸æ˜¯React APIã€‚å®ƒåªæ˜¯ä¸€ç§æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼æ˜¯ç”±Reactè‡ªèº«çš„ç»„åˆæ€§è´¨å¿…ç„¶äº§ç”Ÿçš„javascript12345678910function visible(WrappedComponent) &#123; return class extends Component &#123; render() &#123; const &#123; visible, ...props &#125; = this.props; if (visible === false) return null; return &lt;WrappedComponent &#123;...props&#125; /&gt;; &#125; &#125;&#125; ä¸Šé¢çš„ä»£ç å°±æ˜¯ä¸€ä¸ªHOCçš„ç®€å•åº”ç”¨ï¼Œå‡½æ•°æ¥æ”¶ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°ç»„ä»¶ï¼Œæ–°ç»„å»ºå¯ä»¥æ¥æ”¶ä¸€ä¸ªvisible propsï¼Œæ ¹æ®visibleçš„å€¼æ¥åˆ¤æ–­æ˜¯å¦æ¸²æŸ“Visibleã€‚ å®ç°æ–¹å¼å±æ€§ä»£ç†å‡½æ•°è¿”å›ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç»„ä»¶ï¼Œç„¶ååœ¨renderä¸­è¿”å›è¦åŒ…è£¹çš„ç»„ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä»£ç†æ‰€æœ‰ä¼ å…¥çš„propsï¼Œå¹¶ä¸”å†³å®šå¦‚ä½•æ¸²æŸ“ï¼Œå®é™…ä¸Š ï¼Œè¿™ç§æ–¹å¼ç”Ÿæˆçš„é«˜é˜¶ç»„ä»¶å°±æ˜¯åŸç»„ä»¶çš„çˆ¶ç»„ä»¶ï¼Œä¸Šé¢çš„å‡½æ•°visibleå°±æ˜¯ä¸€ä¸ªHOCå±æ€§ä»£ç†çš„å®ç°æ–¹å¼ javascript1234567function proxyHOC(WrappedComponent) &#123; return class extends Component &#123; render() &#123; return &lt;WrappedComponent &#123;...this.props&#125; /&gt;; &#125; &#125;&#125; å¯¹æ¯”åŸç”Ÿç»„ä»¶å¢å¼ºçš„é¡¹ï¼š å¯æ“ä½œæ‰€æœ‰ä¼ å…¥çš„props å¯æ“ä½œç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ å¯æ“ä½œç»„ä»¶çš„staticæ–¹æ³• è·å–refs åå‘ç»§æ‰¿è¿”å›ä¸€ä¸ªç»„ä»¶ï¼Œç»§æ‰¿åŸç»„ä»¶ï¼Œåœ¨renderä¸­è°ƒç”¨åŸç»„ä»¶çš„renderã€‚ç”±äºç»§æ‰¿äº†åŸç»„ä»¶ï¼Œèƒ½é€šè¿‡thisè®¿é—®åˆ°åŸç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€propsã€stateã€renderç­‰ï¼Œç›¸æ¯”å±æ€§ä»£ç†å®ƒèƒ½æ“ä½œæ›´å¤šçš„å±æ€§ã€‚ javascript1234567function inheritHOC(WrappedComponent) &#123; return class extends WrappedComponent &#123; render() &#123; return super.render(); &#125; &#125;&#125; å¯¹æ¯”åŸç”Ÿç»„ä»¶å¢å¼ºçš„é¡¹ï¼š å¯æ“ä½œæ‰€æœ‰ä¼ å…¥çš„props å¯æ“ä½œç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ å¯æ“ä½œç»„ä»¶çš„staticæ–¹æ³• è·å–refs å¯æ“ä½œstate å¯ä»¥æ¸²æŸ“åŠ«æŒ å®é™…åº”ç”¨ç»„åˆæ¸²æŸ“å¯ä½¿ç”¨ä»»ä½•å…¶ä»–ç»„ä»¶å’ŒåŸç»„ä»¶è¿›è¡Œç»„åˆæ¸²æŸ“ï¼Œè¾¾åˆ°æ ·å¼ã€å¸ƒå±€å¤ç”¨ç­‰æ•ˆæœã€‚ é€šè¿‡å±æ€§ä»£ç†å®ç° javascript12345678910function stylHOC(WrappedComponent) &#123; return class extends Component &#123; render() &#123; return (&lt;div&gt; &lt;div className=\"title\"&gt;&#123;this.props.title&#125;&lt;/div&gt; &lt;WrappedComponent &#123;...this.props&#125; /&gt; &lt;/div&gt;); &#125; &#125;&#125; é€šè¿‡åå‘ç»§æ‰¿å®ç° javascript12345678910function styleHOC(WrappedComponent) &#123; return class extends WrappedComponent &#123; render() &#123; return &lt;div&gt; &lt;div className=\"title\"&gt;&#123;this.props.title&#125;&lt;/div&gt; &#123;super.render()&#125; &lt;/div&gt; &#125; &#125;&#125; æ¡ä»¶æ¸²æŸ“ é€šè¿‡å±æ€§ä»£ç†å®ç° javascript12345678function visibleHOC(WrappedComponent) &#123; return class extends Component &#123; render() &#123; if (this.props.visible === false) return null; return &lt;WrappedComponent &#123;...props&#125; /&gt;; &#125; &#125;&#125; é€šè¿‡åå‘ç»§æ‰¿å®ç° javascript1234567891011function visibleHOC(WrappedComponent) &#123; return class extends WrappedComponent &#123; render() &#123; if (this.props.visible === false) &#123; return null &#125; else &#123; return super.render() &#125; &#125; &#125;&#125; æ“ä½œpropså¯ä»¥å¯¹ä¼ å…¥ç»„ä»¶çš„propsè¿›è¡Œå¢åŠ ã€ä¿®æ”¹ã€åˆ é™¤æˆ–è€…æ ¹æ®ç‰¹å®šçš„propsè¿›è¡Œç‰¹æ®Šçš„æ“ä½œã€‚ é€šè¿‡å±æ€§ä»£ç†å®ç°javascript1234567891011function proxyHOC(WrappedComponent) &#123; return class extends Component &#123; render() &#123; const newProps = &#123; ...this.props, user: 'ConardLi' &#125; return &lt;WrappedComponent &#123;...newProps&#125; /&gt;; &#125; &#125;&#125; è·å–refsé«˜é˜¶ç»„ä»¶ä¸­å¯è·å–åŸç»„ä»¶çš„refï¼Œé€šè¿‡refè·å–ç»„ä»¶å®åŠ›ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ï¼Œå½“ç¨‹åºåˆå§‹åŒ–å®Œæˆåè°ƒç”¨åŸç»„ä»¶çš„logæ–¹æ³• é€šè¿‡å±æ€§ä»£ç†å®ç°javascript12345678910function refHOC(WrappedComponent) &#123; return class extends Component &#123; componentDidMount() &#123; this.wapperRef.log() &#125; render() &#123; return &lt;WrappedComponent &#123;...this.props&#125; ref=&#123;ref =&gt; &#123; this.wapperRef = ref &#125;&#125; /&gt;; &#125; &#125;&#125; çŠ¶æ€ç®¡ç†å°†åŸç»„ä»¶çš„çŠ¶æ€æå–åˆ°HOCä¸­è¿›è¡Œç®¡ç†ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ï¼Œæˆ‘ä»¬å°†Inputçš„valueæå–åˆ°HOCä¸­è¿›è¡Œç®¡ç†ï¼Œä½¿å®ƒå˜æˆå—æ§ç»„ä»¶ï¼ŒåŒæ—¶ä¸å½±å“å®ƒä½¿ç”¨onChangeæ–¹æ³•è¿›è¡Œä¸€äº›å…¶ä»–æ“ä½œã€‚åŸºäºè¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„åŒå‘ç»‘å®šï¼Œå…·ä½“è¯·çœ‹åŒå‘ç»‘å®šã€‚ é€šè¿‡å±æ€§ä»£ç†å®ç°javascript1234567891011121314151617181920212223242526272829303132333435function proxyHoc(WrappedComponent) &#123; return class extends Component &#123; constructor(props) &#123; super(props); this.state = &#123; value: '' &#125;; &#125; onChange = (event) =&gt; &#123; const &#123; onChange &#125; = this.props; this.setState(&#123; value: event.target.value, &#125;, () =&gt; &#123; if(typeof onChange ==='function')&#123; onChange(event); &#125; &#125;) &#125; render() &#123; const newProps = &#123; value: this.state.value, onChange: this.onChange, &#125; return &lt;WrappedComponent &#123;...this.props&#125; &#123;...newProps&#125; /&gt;; &#125; &#125;&#125;class HOC extends Component &#123; render() &#123; return &lt;input &#123;...this.props&#125;&gt;&lt;/input&gt; &#125;&#125;export default proxyHoc(HOC); æ“ä½œstateä¸Šé¢çš„ä¾‹å­é€šè¿‡å±æ€§ä»£ç†åˆ©ç”¨HOCçš„stateå¯¹åŸç»„ä»¶è¿›è¡Œäº†ä¸€å®šçš„å¢å¼ºï¼Œä½†å¹¶ä¸èƒ½ç›´æ¥æ§åˆ¶åŸç»„ä»¶çš„stateï¼Œè€Œé€šè¿‡åå‘ç»§æ‰¿ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ“ä½œåŸç»„ä»¶çš„stateã€‚ä½†æ˜¯å¹¶ä¸æ¨èç›´æ¥ä¿®æ”¹æˆ–æ·»åŠ åŸç»„ä»¶çš„stateï¼Œå› ä¸ºè¿™æ ·æœ‰å¯èƒ½å’Œç»„ä»¶å†…éƒ¨çš„æ“ä½œæ„æˆå†²çªã€‚ é€šè¿‡åå‘ç»§æ‰¿å®ç°javascript12345678910111213function debugHOC(WrappedComponent) &#123; return class extends WrappedComponent &#123; render() &#123; console.log('props', this.props); console.log('state', this.state); return ( &lt;div className=\"debuging\"&gt; &#123;super.render()&#125; &lt;/div&gt; ) &#125; &#125;&#125; ä¸Šé¢çš„HOCåœ¨renderä¸­å°†propså’Œstateæ‰“å°å‡ºæ¥ï¼Œå¯ä»¥ç”¨ä½œè°ƒè¯•é˜¶æ®µï¼Œå½“ç„¶ä½ å¯ä»¥åœ¨é‡Œé¢å†™æ›´å¤šçš„è°ƒè¯•ä»£ç ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œåªéœ€è¦åœ¨æˆ‘ä»¬æƒ³è¦è°ƒè¯•çš„ç»„ä»¶ä¸ŠåŠ ä¸Š@debugå°±å¯ä»¥å¯¹è¯¥ç»„ä»¶è¿›è¡Œè°ƒè¯•ï¼Œè€Œä¸éœ€è¦åœ¨æ¯æ¬¡è°ƒè¯•çš„æ—¶å€™å†™å¾ˆå¤šå†—ä½™ä»£ç ã€‚(å¦‚æœä½ è¿˜ä¸çŸ¥é“æ€ä¹ˆä½¿ç”¨HOCï¼Œè¯·ğŸ‘‡å¦‚ä½•ä½¿ç”¨HOC) æ¸²æŸ“åŠ«æŒé«˜é˜¶ç»„ä»¶å¯ä»¥åœ¨renderå‡½æ•°ä¸­åšéå¸¸å¤šçš„æ“ä½œï¼Œä»è€Œæ§åˆ¶åŸç»„ä»¶çš„æ¸²æŸ“è¾“å‡ºã€‚åªè¦æ”¹å˜äº†åŸç»„ä»¶çš„æ¸²æŸ“ï¼Œæˆ‘ä»¬éƒ½å°†å®ƒç§°ä¹‹ä¸ºä¸€ç§æ¸²æŸ“åŠ«æŒã€‚å®é™…ä¸Šï¼Œä¸Šé¢çš„ç»„åˆæ¸²æŸ“å’Œæ¡ä»¶æ¸²æŸ“éƒ½æ˜¯æ¸²æŸ“åŠ«æŒçš„ä¸€ç§ï¼Œé€šè¿‡åå‘ç»§æ‰¿ï¼Œä¸ä»…å¯ä»¥å®ç°ä»¥ä¸Šä¸¤ç‚¹ï¼Œè¿˜å¯ç›´æ¥å¢å¼ºç”±åŸç»„ä»¶renderå‡½æ•°äº§ç”Ÿçš„Reactå…ƒç´ ã€‚ é€šè¿‡åå‘ç»§æ‰¿å®ç°javascript1234567891011121314function hijackHOC(WrappedComponent) &#123; return class extends WrappedComponent &#123; render() &#123; const tree = super.render(); let newProps = &#123;&#125;; if (tree &amp;&amp; tree.type === 'input') &#123; newProps = &#123; value: 'æ¸²æŸ“è¢«åŠ«æŒäº†' &#125;; &#125; const props = Object.assign(&#123;&#125;, tree.props, newProps); const newTree = React.cloneElement(tree, props, tree.props.children); return newTree; &#125; &#125;&#125; å¦‚ä½•ä½¿ç”¨ï¼Ÿä¸Šé¢çš„ç¤ºä¾‹ä»£ç éƒ½å†™çš„æ˜¯å¦‚ä½•å£°æ˜ä¸€ä¸ªHOCï¼ŒHOCå®é™…ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†è¦å¢å¼ºçš„ç»„ä»¶ä½œä¸ºå‚æ•°è°ƒç”¨HOCå‡½æ•°ï¼Œå¾—åˆ°å¢å¼ºåçš„ç»„ä»¶ã€‚javascript123456class myComponent extends Component &#123; render() &#123; return (&lt;span&gt;åŸç»„ä»¶&lt;/span&gt;) &#125;&#125;export default inheritHOC(myComponent); Composeåœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸€ä¸ªç»„ä»¶å¯èƒ½è¢«å¤šä¸ªHOCå¢å¼ºï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯è¢«æ‰€æœ‰çš„HOCå¢å¼ºåçš„ç»„ä»¶å‡è®¾ç°åœ¨æˆ‘ä»¬æœ‰loggerï¼Œvisibleï¼Œstyleç­‰å¤šä¸ªHOCï¼Œç°åœ¨è¦åŒæ—¶å¢å¼ºä¸€ä¸ªInputç»„ä»¶ï¼šlogger(visible(style(Input)))è¿™ç§ä»£ç éå¸¸çš„éš¾ä»¥é˜…è¯»ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å°è£…ä¸€ä¸ªç®€å•çš„å‡½æ•°ç»„åˆå·¥å…·ï¼Œå°†å†™æ³•æ”¹å†™å¦‚ä¸‹ï¼šjavascript12const compose = (...fns) =&gt; fns.reduce((f, g) =&gt; (...args) =&gt; g(f(...args)));compose(logger,visible,style)(Input); composeå‡½æ•°è¿”å›ä¸€ä¸ªæ‰€æœ‰å‡½æ•°ç»„åˆåçš„å‡½æ•°ï¼Œcompose(f, g, h) å’Œ (â€¦args) =&gt; f(g(h(â€¦args)))æ˜¯ä¸€æ ·çš„ã€‚å¾ˆå¤šç¬¬ä¸‰æ–¹åº“éƒ½æä¾›äº†ç±»ä¼¼composeçš„å‡½æ•°ï¼Œä¾‹å¦‚lodash.flowRightï¼ŒReduxæä¾›çš„combineReducerså‡½æ•°ç­‰ã€‚ Decoratorsæˆ‘ä»¬è¿˜å¯ä»¥å€ŸåŠ©ES7ä¸ºæˆ‘ä»¬æä¾›çš„Decoratorsæ¥è®©æˆ‘ä»¬çš„å†™æ³•å˜çš„æ›´åŠ ä¼˜é›…ï¼šjavascript123456@logger@visible@styleclass Input extends Component &#123; // ...&#125; Decoratorsæ˜¯ES7çš„ä¸€ä¸ªææ¡ˆï¼Œè¿˜æ²¡æœ‰è¢«æ ‡å‡†åŒ–ï¼Œä½†ç›®å‰Babelè½¬ç å™¨å·²ç»æ”¯æŒï¼Œæˆ‘ä»¬éœ€è¦æå‰é…ç½®babel-plugin-transform-decorators-legacyï¼šâ€œpluginsâ€: [â€œtransform-decorators-legacyâ€]è¿˜å¯ä»¥ç»“åˆä¸Šé¢çš„composeå‡½æ•°ä½¿ç”¨ï¼šjavascript12345const hoc = compose(logger, visible, style);@hocclass Input extends Component &#123; // ...&#125; HOCçš„å®é™…åº”ç”¨ä¸‹é¢æ˜¯ä¸€äº›æˆ‘åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å®é™…å¯¹HOCçš„å®é™…åº”ç”¨åœºæ™¯ï¼Œç”±äºæ–‡ç« ç¯‡å¹…åŸå› ï¼Œä»£ç ç»è¿‡å¾ˆå¤šç®€åŒ–ï¼Œå¦‚æœ‰é—®é¢˜æ¬¢è¿åœ¨è¯„è®ºåŒºæŒ‡å‡ºï¼š æ—¥å¿—æ‰“ç‚¹å®é™…ä¸Šè¿™å±äºä¸€ç±»æœ€å¸¸è§çš„åº”ç”¨ï¼Œå¤šä¸ªç»„ä»¶æ‹¥æœ‰ç±»ä¼¼çš„é€»è¾‘ï¼Œæˆ‘ä»¬è¦å¯¹é‡å¤çš„é€»è¾‘è¿›è¡Œå¤ç”¨ï¼Œ å®˜æ–¹æ–‡æ¡£ä¸­CommentListçš„ç¤ºä¾‹ä¹Ÿæ˜¯è§£å†³äº†ä»£ç å¤ç”¨é—®é¢˜ï¼Œå†™çš„å¾ˆè¯¦ç»†æŸäº›é¡µé¢éœ€è¦è®°å½•ç”¨æˆ·è¡Œä¸ºï¼Œæ€§èƒ½æŒ‡æ ‡ç­‰ç­‰ï¼Œé€šè¿‡é«˜é˜¶ç»„ä»¶åšè¿™äº›äº‹æƒ…å¯ä»¥çœå»å¾ˆå¤šé‡å¤ä»£ç ã€‚javascript123456789101112131415161718function logHoc(WrappedComponent) &#123; return class extends Component &#123; componentWillMount() &#123; this.start = Date.now(); &#125; componentDidMount() &#123; this.end = Date.now(); console.log(`$&#123;WrappedComponent.dispalyName&#125; æ¸²æŸ“æ—¶é—´ï¼š$&#123;this.end - this.start&#125; ms`); console.log(`$&#123;user&#125;è¿›å…¥$&#123;WrappedComponent.dispalyName&#125;`); &#125; componentWillUnmount() &#123; console.log(`$&#123;user&#125;é€€å‡º$&#123;WrappedComponent.dispalyName&#125;`); &#125; render() &#123; return &lt;WrappedComponent &#123;...this.props&#125; /&gt; &#125; &#125;&#125; å¯ç”¨ã€æƒé™æ§åˆ¶javascript1234567891011function auth(WrappedComponent) &#123; return class extends Component &#123; render() &#123; const &#123; visible, auth, display = null, ...props &#125; = this.props; if (visible === false || (auth &amp;&amp; authList.indexOf(auth) === -1)) &#123; return display &#125; return &lt;WrappedComponent &#123;...props&#125; /&gt;; &#125; &#125;&#125; authListæ˜¯æˆ‘ä»¬åœ¨è¿›å…¥ç¨‹åºæ—¶å‘åç«¯è¯·æ±‚çš„æ‰€æœ‰æƒé™åˆ—è¡¨ï¼Œå½“ç»„ä»¶æ‰€éœ€è¦çš„æƒé™ä¸åˆ—è¡¨ä¸­ï¼Œæˆ–è€…è®¾ç½®çš„ visibleæ˜¯falseï¼Œæˆ‘ä»¬å°†å…¶æ˜¾ç¤ºä¸ºä¼ å…¥çš„ç»„ä»¶æ ·å¼ï¼Œæˆ–è€…nullã€‚æˆ‘ä»¬å¯ä»¥å°†ä»»ä½•éœ€è¦è¿›è¡Œæƒé™æ ¡éªŒçš„ç»„ä»¶åº”ç”¨HOCï¼šjavascript1234567@authclass Input extends Component &#123; ... &#125;@authclass Button extends Component &#123; ... &#125;&lt;Button auth=\"user/addUser\"&gt;æ·»åŠ ç”¨æˆ·&lt;/Button&gt;&lt;Input auth=\"user/search\" visible=&#123;false&#125; &gt;æ·»åŠ ç”¨æˆ·&lt;/Input&gt; åŒå‘ç»‘å®šåœ¨vueä¸­ï¼Œç»‘å®šä¸€ä¸ªå˜é‡åå¯å®ç°åŒå‘æ•°æ®ç»‘å®šï¼Œå³è¡¨å•ä¸­çš„å€¼æ”¹å˜åç»‘å®šçš„å˜é‡ä¹Ÿä¼šè‡ªåŠ¨æ”¹å˜ã€‚è€ŒReactä¸­æ²¡æœ‰åšè¿™æ ·çš„å¤„ç†ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¡¨å•å…ƒç´ éƒ½æ˜¯éå—æ§ç»„ä»¶ã€‚ç»™è¡¨å•å…ƒç´ ç»‘å®šä¸€ä¸ªçŠ¶æ€åï¼Œå¾€å¾€éœ€è¦æ‰‹åŠ¨ä¹¦å†™onChangeæ–¹æ³•æ¥å°†å…¶æ”¹å†™ä¸ºå—æ§ç»„ä»¶ï¼Œåœ¨è¡¨å•å…ƒç´ éå¸¸å¤šçš„æƒ…å†µä¸‹è¿™äº›é‡å¤æ“ä½œæ˜¯éå¸¸ç—›è‹¦çš„ã€‚æˆ‘ä»¬å¯ä»¥å€ŸåŠ©é«˜é˜¶ç»„ä»¶æ¥å®ç°ä¸€ä¸ªç®€å•çš„åŒå‘ç»‘å®šï¼Œä»£ç ç•¥é•¿ï¼Œå¯ä»¥ç»“åˆä¸‹é¢çš„æ€ç»´å¯¼å›¾è¿›è¡Œç†è§£ã€‚ é¦–å…ˆæˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªFormç»„ä»¶ï¼Œè¯¥ç»„ä»¶ç”¨äºåŒ…è£¹æ‰€æœ‰éœ€è¦åŒ…è£¹çš„è¡¨å•ç»„ä»¶ï¼Œé€šè¿‡contexå‘å­ç»„ä»¶æš´éœ²ä¸¤ä¸ªå±æ€§ï¼šmodelï¼šå½“å‰Formç®¡æ§çš„æ‰€æœ‰æ•°æ®ï¼Œç”±è¡¨å•nameå’Œvalueç»„æˆï¼Œå¦‚{name:â€™ConardLiâ€™,pwd:â€™123â€™}ã€‚modelå¯ç”±å¤–éƒ¨ä¼ å…¥ï¼Œä¹Ÿå¯è‡ªè¡Œç®¡æ§ã€‚changeModelï¼šæ”¹å˜modelä¸­æŸä¸ªnameçš„å€¼ã€‚ javascript123456789101112131415161718192021222324252627282930313233343536373839class Form extends Component &#123; static childContextTypes = &#123; model: PropTypes.object, changeModel: PropTypes.func &#125; constructor(props, context) &#123; super(props, context); this.state = &#123; model: props.model || &#123;&#125; &#125;; &#125; componentWillReceiveProps(nextProps) &#123; if (nextProps.model) &#123; this.setState(&#123; model: nextProps.model &#125;) &#125; &#125; changeModel = (name, value) =&gt; &#123; this.setState(&#123; model: &#123; ...this.state.model, [name]: value &#125; &#125;) &#125; getChildContext() &#123; return &#123; changeModel: this.changeModel, model: this.props.model || this.state.model &#125;; &#125; onSubmit = () =&gt; &#123; console.log(this.state.model); &#125; render() &#123; return &lt;div&gt; &#123;this.props.children&#125; &lt;button onClick=&#123;this.onSubmit&#125;&gt;æäº¤&lt;/button&gt; &lt;/div&gt; &#125;&#125; ä¸‹é¢å®šä¹‰ç”¨äºåŒå‘ç»‘å®šçš„HOCï¼Œå…¶ä»£ç†äº†è¡¨å•çš„onChangeå±æ€§å’Œvalueå±æ€§ï¼šå‘ç”ŸonChangeäº‹ä»¶æ—¶è°ƒç”¨ä¸Šå±‚Formçš„changeModelæ–¹æ³•æ¥æ”¹å˜contextä¸­çš„modelã€‚åœ¨æ¸²æŸ“æ—¶å°†valueæ”¹ä¸ºä»contextä¸­å–å‡ºçš„å€¼ã€‚ javascript1234567891011121314151617181920212223242526272829303132function proxyHoc(WrappedComponent) &#123; return class extends Component &#123; static contextTypes = &#123; model: PropTypes.object, changeModel: PropTypes.func &#125; onChange = (event) =&gt; &#123; const &#123; changeModel &#125; = this.context; const &#123; onChange &#125; = this.props; const &#123; v_model &#125; = this.props; changeModel(v_model, event.target.value); if(typeof onChange === 'function')&#123;onChange(event);&#125; &#125; render() &#123; const &#123; model &#125; = this.context; const &#123; v_model &#125; = this.props; return &lt;WrappedComponent &#123;...this.props&#125; value=&#123;model[v_model]&#125; onChange=&#123;this.onChange&#125; /&gt;; &#125; &#125;&#125;@proxyHocclass Input extends Component &#123; render() &#123; return &lt;input &#123;...this.props&#125;&gt;&lt;/input&gt; &#125;&#125; ä¸Šé¢çš„ä»£ç åªæ˜¯ç®€ç•¥çš„ä¸€éƒ¨åˆ†ï¼Œé™¤äº†inputï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†HOCåº”ç”¨åœ¨selectç­‰å…¶ä»–è¡¨å•ç»„ä»¶ï¼Œç”šè‡³è¿˜å¯ä»¥å°†ä¸Šé¢çš„HOCå…¼å®¹åˆ°spanã€tableç­‰å±•ç¤ºç»„ä»¶ï¼Œè¿™æ ·åšå¯ä»¥å¤§å¤§ç®€åŒ–ä»£ç ï¼Œè®©æˆ‘ä»¬çœå»äº†å¾ˆå¤šçŠ¶æ€ç®¡ç†çš„å·¥ä½œï¼Œä½¿ç”¨å¦‚ä¸‹ï¼š javascript12345678910export default class extends Component &#123; render() &#123; return ( &lt;Form &gt; &lt;Input v_model=\"name\"&gt;&lt;/Input&gt; &lt;Input v_model=\"pwd\"&gt;&lt;/Input&gt; &lt;/Form&gt; ) &#125;&#125; è¡¨å•æ ¡éªŒåŸºäºä¸Šé¢çš„åŒå‘ç»‘å®šçš„ä¾‹å­ï¼Œæˆ‘ä»¬å†æ¥ä¸€ä¸ªè¡¨å•éªŒè¯å™¨ï¼Œè¡¨å•éªŒè¯å™¨å¯ä»¥åŒ…å«éªŒè¯å‡½æ•°ä»¥åŠæç¤ºä¿¡æ¯ï¼Œå½“éªŒè¯ä¸é€šè¿‡æ—¶ï¼Œå±•ç¤ºé”™è¯¯ä¿¡æ¯ï¼šjavascript12345678910111213141516171819202122232425262728293031323334function validateHoc(WrappedComponent) &#123; return class extends Component &#123; constructor(props) &#123; super(props); this.state = &#123; error: '' &#125; &#125; onChange = (event) =&gt; &#123; const &#123; validator &#125; = this.props; if (validator &amp;&amp; typeof validator.func === 'function') &#123; if (!validator.func(event.target.value)) &#123; this.setState(&#123; error: validator.msg &#125;) &#125; else &#123; this.setState(&#123; error: '' &#125;) &#125; &#125; &#125; render() &#123; return &lt;div&gt; &lt;WrappedComponent onChange=&#123;this.onChange&#125; &#123;...this.props&#125; /&gt; &lt;div&gt;&#123;this.state.error || ''&#125;&lt;/div&gt; &lt;/div&gt; &#125; &#125;&#125;const validatorName = &#123; func: (val) =&gt; val &amp;&amp; !isNaN(val), msg: 'è¯·è¾“å…¥æ•°å­—'&#125;const validatorPwd = &#123; func: (val) =&gt; val &amp;&amp; val.length &gt; 6, msg: 'å¯†ç å¿…é¡»å¤§äº6ä½'&#125;&lt;HOCInput validator=&#123;validatorName&#125; v_model=\"name\"&gt;&lt;/HOCInput&gt;&lt;HOCInput validator=&#123;validatorPwd&#125; v_model=\"pwd\"&gt;&lt;/HOCInput&gt; å½“ç„¶ï¼Œè¿˜å¯ä»¥åœ¨Formæäº¤çš„æ—¶å€™åˆ¤æ–­æ‰€æœ‰éªŒè¯å™¨æ˜¯å¦é€šè¿‡ï¼ŒéªŒè¯å™¨ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºæ•°ç»„ç­‰ç­‰ï¼Œç”±äºæ–‡ç« ç¯‡å¹…åŸå› ï¼Œä»£ç è¢«ç®€åŒ–äº†å¾ˆå¤šï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±å®ç°ã€‚Reduxçš„connect reduxä¸­çš„connectï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªHOCï¼Œä¸‹é¢å°±æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆçš„connectå®ç°ï¼šjavascript1234567891011121314151617181920212223242526272829303132333435export const connect = (mapStateToProps, mapDispatchToProps) =&gt; (WrappedComponent) =&gt; &#123; class Connect extends Component &#123; static contextTypes = &#123; store: PropTypes.object &#125; constructor () &#123; super() this.state = &#123; allProps: &#123;&#125; &#125; &#125; componentWillMount () &#123; const &#123; store &#125; = this.context this._updateProps() store.subscribe(() =&gt; this._updateProps()) &#125; _updateProps () &#123; const &#123; store &#125; = this.context let stateProps = mapStateToProps ? mapStateToProps(store.getState(), this.props): &#123;&#125; let dispatchProps = mapDispatchToProps? mapDispatchToProps(store.dispatch, this.props) : &#123;&#125; this.setState(&#123; allProps: &#123; ...stateProps, ...dispatchProps, ...this.props &#125; &#125;) &#125; render () &#123; return &lt;WrappedComponent &#123;...this.state.allProps&#125; /&gt; &#125; &#125; return Connect&#125; ä»£ç éå¸¸æ¸…æ™°ï¼Œconnectå‡½æ•°å…¶å®å°±åšäº†ä¸€ä»¶äº‹ï¼Œå°†mapStateToPropså’ŒmapDispatchToPropsåˆ†åˆ«è§£æ„åä¼ ç»™åŸç»„ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨åŸç»„ä»¶å†…å°±å¯ä»¥ç›´æ¥ç”¨propsè·å–stateä»¥åŠdispatchå‡½æ•°äº†ã€‚ ä½¿ç”¨HOCçš„æ³¨æ„äº‹é¡¹å‘Šè¯«â€”é™æ€å±æ€§æ‹·è´å½“æˆ‘ä»¬åº”ç”¨HOCå»å¢å¼ºå¦ä¸€ä¸ªç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬å®é™…ä½¿ç”¨çš„ç»„ä»¶å·²ç»ä¸æ˜¯åŸç»„ä»¶äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‹¿ä¸åˆ°åŸç»„ä»¶çš„ä»»ä½•é™æ€å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨HOCçš„ç»“å°¾æ‰‹åŠ¨æ‹·è´ä»–ä»¬ï¼šjavascript12345678910function proxyHOC(WrappedComponent) &#123; class HOCComponent extends Component &#123; render() &#123; return &lt;WrappedComponent &#123;...this.props&#125; /&gt;; &#125; &#125; HOCComponent.staticMethod = WrappedComponent.staticMethod; // ... return HOCComponent;&#125; å¦‚æœåŸç»„ä»¶æœ‰éå¸¸å¤šçš„é™æ€å±æ€§ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯éå¸¸ç—›è‹¦çš„ï¼Œè€Œä¸”ä½ éœ€è¦å»äº†è§£éœ€è¦å¢å¼ºçš„æ‰€æœ‰ç»„ä»¶çš„é™æ€å±æ€§æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨hoist-non-react-staticsæ¥å¸®åŠ©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨å¸®æˆ‘ä»¬æ‹·è´æ‰€æœ‰éReactçš„é™æ€æ–¹æ³•ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼šjavascript12345678910import hoistNonReactStatic from 'hoist-non-react-statics';function proxyHOC(WrappedComponent) &#123; class HOCComponent extends Component &#123; render() &#123; return &lt;WrappedComponent &#123;...this.props&#125; /&gt;; &#125; &#125; hoistNonReactStatic(HOCComponent,WrappedComponent); return HOCComponent;&#125; å‘Šè¯«â€”ä¼ é€’refsä½¿ç”¨é«˜é˜¶ç»„ä»¶åï¼Œè·å–åˆ°çš„refå®é™…ä¸Šæ˜¯æœ€å¤–å±‚çš„å®¹å™¨ç»„ä»¶ï¼Œè€ŒéåŸç»„ä»¶ï¼Œä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦ç”¨åˆ°åŸç»„ä»¶çš„refã€‚é«˜é˜¶ç»„ä»¶å¹¶ä¸èƒ½åƒé€ä¼ propsé‚£æ ·å°†refsé€ä¼ ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥å®Œæˆrefçš„ä¼ é€’ï¼šjavascript12345678910111213141516171819function hoc(WrappedComponent) &#123; return class extends Component &#123; getWrappedRef = () =&gt; this.wrappedRef; render() &#123; return &lt;WrappedComponent ref=&#123;ref =&gt; &#123; this.wrappedRef = ref &#125;&#125; &#123;...this.props&#125; /&gt;; &#125; &#125;&#125;@hocclass Input extends Component &#123; render() &#123; return &lt;input&gt;&lt;/input&gt; &#125;&#125;class App extends Component &#123; render() &#123; return ( &lt;Input ref=&#123;ref =&gt; &#123; this.inpitRef = ref.getWrappedRef() &#125;&#125; &gt;&lt;/Input&gt; ); &#125;&#125; React 16.3ç‰ˆæœ¬æä¾›äº†ä¸€ä¸ªforwardRef APIæ¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œrefsä¼ é€’ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨é«˜é˜¶ç»„ä»¶ä¸Šè·å–çš„refå°±æ˜¯åŸç»„ä»¶çš„refäº†ï¼Œè€Œä¸éœ€è¦å†æ‰‹åŠ¨ä¼ é€’ï¼Œå¦‚æœä½ çš„Reactç‰ˆæœ¬å¤§äº16.3ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼:javascript1234567891011function hoc(WrappedComponent) &#123; class HOC extends Component &#123; render() &#123; const &#123; forwardedRef, ...props &#125; = this.props; return &lt;WrappedComponent ref=&#123;forwardedRef&#125; &#123;...props&#125; /&gt;; &#125; &#125; return React.forwardRef((props, ref) =&gt; &#123; return &lt;HOC forwardedRef=&#123;ref&#125; &#123;...props&#125; /&gt;; &#125;);&#125; å‘Šè¯«â€”ä¸è¦åœ¨renderæ–¹æ³•å†…åˆ›å»ºé«˜é˜¶ç»„ä»¶React Diffç®—æ³•çš„åŸåˆ™æ˜¯ï¼š ä½¿ç”¨ç»„ä»¶æ ‡è¯†ç¡®å®šæ˜¯å¸è½½è¿˜æ˜¯æ›´æ–°ç»„ä»¶ å¦‚æœç»„ä»¶çš„å’Œå‰ä¸€æ¬¡æ¸²æŸ“æ—¶æ ‡è¯†æ˜¯ç›¸åŒçš„ï¼Œé€’å½’æ›´æ–°å­ç»„ä»¶ å¦‚æœæ ‡è¯†ä¸åŒå¸è½½ç»„ä»¶é‡æ–°æŒ‚è½½æ–°ç»„ä»¶ æ¯æ¬¡è°ƒç”¨é«˜é˜¶ç»„ä»¶ç”Ÿæˆçš„éƒ½æ˜¯æ˜¯ä¸€ä¸ªå…¨æ–°çš„ç»„ä»¶ï¼Œç»„ä»¶çš„å”¯ä¸€æ ‡è¯†å“åº”çš„ä¹Ÿä¼šæ”¹å˜ï¼Œå¦‚æœåœ¨renderæ–¹æ³•è°ƒç”¨äº†é«˜é˜¶ç»„ä»¶ï¼Œè¿™ä¼šå¯¼è‡´ç»„ä»¶æ¯æ¬¡éƒ½ä¼šè¢«å¸è½½åé‡æ–°æŒ‚è½½ã€‚ çº¦å®š-ä¸è¦æ”¹å˜åŸå§‹ç»„ä»¶ å®˜æ–¹æ–‡æ¡£å¯¹é«˜é˜¶ç»„ä»¶çš„è¯´æ˜ï¼š é«˜é˜¶ç»„ä»¶å°±æ˜¯ä¸€ä¸ªæ²¡æœ‰å‰¯ä½œç”¨çš„çº¯å‡½æ•°ã€‚ æˆ‘ä»¬å†æ¥çœ‹çœ‹çº¯å‡½æ•°çš„å®šä¹‰ï¼š å¦‚æœå‡½æ•°çš„è°ƒç”¨å‚æ•°ç›¸åŒï¼Œåˆ™æ°¸è¿œè¿”å›ç›¸åŒçš„ç»“æœã€‚å®ƒä¸ä¾èµ–äºç¨‹åºæ‰§è¡ŒæœŸé—´å‡½æ•°å¤–éƒ¨ä»»ä½•çŠ¶æ€æˆ–æ•°æ®çš„å˜åŒ–ï¼Œå¿…é¡»åªä¾èµ–äºå…¶è¾“å…¥å‚æ•°ã€‚ è¯¥å‡½æ•°ä¸ä¼šäº§ç”Ÿä»»ä½•å¯è§‚å¯Ÿçš„å‰¯ä½œç”¨ï¼Œä¾‹å¦‚ç½‘ç»œè¯·æ±‚ï¼Œè¾“å…¥å’Œè¾“å‡ºè®¾å¤‡æˆ–æ•°æ®çªå˜ã€‚ å¦‚æœæˆ‘ä»¬åœ¨é«˜é˜¶ç»„ä»¶å¯¹åŸç»„ä»¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š javascript1InputComponent.prototype.componentWillReceiveProps = function(nextProps) &#123; ... &#125; è¿™æ ·å°±ç ´åäº†æˆ‘ä»¬å¯¹é«˜é˜¶ç»„ä»¶çš„çº¦å®šï¼ŒåŒæ—¶ä¹Ÿæ”¹å˜äº†ä½¿ç”¨é«˜é˜¶ç»„ä»¶çš„åˆè¡·ï¼šæˆ‘ä»¬ä½¿ç”¨é«˜é˜¶ç»„ä»¶æ˜¯ä¸ºäº†å¢å¼ºè€Œéæ”¹å˜åŸç»„ä»¶ã€‚ çº¦å®š-é€ä¼ ä¸ç›¸å…³çš„propsä½¿ç”¨é«˜é˜¶ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä»£ç†æ‰€æœ‰çš„propsï¼Œä½†å¾€å¾€ç‰¹å®šçš„HOCåªä¼šç”¨åˆ°å…¶ä¸­çš„ä¸€ä¸ªæˆ–å‡ ä¸ªpropsã€‚æˆ‘ä»¬éœ€è¦æŠŠå…¶ä»–ä¸ç›¸å…³çš„propsé€ä¼ ç»™åŸç»„ä»¶ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ï¼š javascript123456789function visible(WrappedComponent) &#123; return class extends Component &#123; render() &#123; const &#123; visible, ...props &#125; = this.props; if (visible === false) return null; return &lt;WrappedComponent &#123;...props&#125; /&gt;; &#125; &#125;&#125; æˆ‘ä»¬åªä½¿ç”¨visibleå±æ€§æ¥æ§åˆ¶ç»„ä»¶çš„æ˜¾ç¤ºå¯éšè—ï¼ŒæŠŠå…¶ä»–propsé€ä¼ ä¸‹å»ã€‚çº¦å®š-displayNameåœ¨ä½¿ç”¨React Developer Toolsè¿›è¡Œè°ƒè¯•æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨äº†HOCï¼Œè°ƒè¯•ç•Œé¢å¯èƒ½å˜å¾—éå¸¸éš¾ä»¥é˜…è¯»ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ï¼š javascript123456789101112@visibleclass Show extends Component &#123; render() &#123; return &lt;h1&gt;æˆ‘æ˜¯ä¸€ä¸ªæ ‡ç­¾&lt;/h1&gt; &#125;&#125;@visibleclass Title extends Component &#123; render() &#123; return &lt;h1&gt;æˆ‘æ˜¯ä¸€ä¸ªæ ‡é¢˜&lt;/h1&gt; &#125;&#125; ä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ä¸ºHOCæŒ‡å®šä¸€ä¸ªdisplayNameï¼Œå®˜æ–¹æ¨èä½¿ç”¨HOCName(WrappedComponentName)ï¼š javascript1static displayName = `Visible($&#123;WrappedComponent.displayName&#125;)` è¿™ä¸ªçº¦å®šå¸®åŠ©ç¡®ä¿é«˜é˜¶ç»„ä»¶æœ€å¤§ç¨‹åº¦çš„çµæ´»æ€§å’Œå¯é‡ç”¨æ€§ã€‚ ä½¿ç”¨HOCçš„åŠ¨æœºå›é¡¾ä¸‹ä¸Šæ–‡æåˆ°çš„ Mixin å¸¦æ¥çš„é£é™©ï¼š Mixin å¯èƒ½ä¼šç›¸äº’ä¾èµ–ï¼Œç›¸äº’è€¦åˆï¼Œä¸åˆ©äºä»£ç ç»´æŠ¤ ä¸åŒçš„Mixinä¸­çš„æ–¹æ³•å¯èƒ½ä¼šç›¸äº’å†²çª Mixinéå¸¸å¤šæ—¶ï¼Œç»„ä»¶æ˜¯å¯ä»¥æ„ŸçŸ¥åˆ°çš„ï¼Œç”šè‡³è¿˜è¦ä¸ºå…¶åšç›¸å…³å¤„ç†ï¼Œè¿™æ ·ä¼šç»™ä»£ç é€ æˆæ»šé›ªçƒå¼çš„å¤æ‚æ€§ è€ŒHOCçš„å‡ºç°å¯ä»¥è§£å†³è¿™äº›é—®é¢˜ï¼š é«˜é˜¶ç»„ä»¶å°±æ˜¯ä¸€ä¸ªæ²¡æœ‰å‰¯ä½œç”¨çš„çº¯å‡½æ•°ï¼Œå„ä¸ªé«˜é˜¶ç»„ä»¶ä¸ä¼šäº’ç›¸ä¾èµ–è€¦åˆ é«˜é˜¶ç»„ä»¶ä¹Ÿæœ‰å¯èƒ½é€ æˆå†²çªï¼Œä½†æˆ‘ä»¬å¯ä»¥åœ¨éµå®ˆçº¦å®šçš„æƒ…å†µä¸‹é¿å…è¿™äº›è¡Œä¸º é«˜é˜¶ç»„ä»¶å¹¶ä¸å…³å¿ƒæ•°æ®ä½¿ç”¨çš„æ–¹å¼å’ŒåŸå› ï¼Œè€Œè¢«åŒ…è£¹çš„ç»„ä»¶ä¹Ÿä¸å…³å¿ƒæ•°æ®æ¥è‡ªä½•å¤„ã€‚é«˜é˜¶ç»„ä»¶çš„å¢åŠ ä¸ä¼šä¸ºåŸç»„ä»¶å¢åŠ è´Ÿæ‹… HOCçš„ç¼ºé™· HOCéœ€è¦åœ¨åŸç»„ä»¶ä¸Šè¿›è¡ŒåŒ…è£¹æˆ–è€…åµŒå¥—ï¼Œå¦‚æœå¤§é‡ä½¿ç”¨HOCï¼Œå°†ä¼šäº§ç”Ÿéå¸¸å¤šçš„åµŒå¥—ï¼Œè¿™è®©è°ƒè¯•å˜å¾—éå¸¸å›°éš¾ã€‚ HOCå¯ä»¥åŠ«æŒpropsï¼Œåœ¨ä¸éµå®ˆçº¦å®šçš„æƒ…å†µä¸‹ä¹Ÿå¯èƒ½é€ æˆå†²çªã€‚ HooksHooksæ˜¯React v16.7.0-alphaä¸­åŠ å…¥çš„æ–°ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨classä»¥å¤–ä½¿ç”¨stateå’Œå…¶ä»–Reactç‰¹æ€§ã€‚ä½¿ç”¨Hooksï¼Œä½ å¯ä»¥åœ¨å°†å«æœ‰stateçš„é€»è¾‘ä»ç»„ä»¶ä¸­æŠ½è±¡å‡ºæ¥ï¼Œè¿™å°†å¯ä»¥è®©è¿™äº›é€»è¾‘å®¹æ˜“è¢«æµ‹è¯•ã€‚åŒæ—¶ï¼ŒHookså¯ä»¥å¸®åŠ©ä½ åœ¨ä¸é‡å†™ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨è¿™äº›é€»è¾‘ã€‚æ‰€ä»¥ï¼Œå®ƒä¹Ÿå¯ä»¥ä½œä¸ºä¸€ç§å®ç°çŠ¶æ€é€»è¾‘å¤ç”¨çš„æ–¹æ¡ˆã€‚é˜…è¯»ä¸‹é¢çš„ç« èŠ‚ä½¿ç”¨Hookçš„åŠ¨æœºä½ å¯ä»¥å‘ç°ï¼Œå®ƒå¯ä»¥åŒæ—¶è§£å†³Mixinå’ŒHOCå¸¦æ¥çš„é—®é¢˜ã€‚ å®˜æ–¹æä¾›çš„HooksState Hookæˆ‘ä»¬è¦ä½¿ç”¨classç»„ä»¶å®ç°ä¸€ä¸ªè®¡æ•°å™¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè¿™æ ·å†™ï¼šjavascript12345678910111213141516export default class Count extends Component &#123; constructor(props) &#123; super(props); this.state = &#123; count: 0 &#125; &#125; render() &#123; return ( &lt;div&gt; &lt;p&gt;You clicked &#123;this.state.count&#125; times&lt;/p&gt; &lt;button onClick=&#123;() =&gt; &#123; this.setState(&#123; count: this.state.count + 1 &#125;) &#125;&#125;&gt; Click me &lt;/button&gt; &lt;/div&gt; ) &#125;&#125; é€šè¿‡useStateï¼Œæˆ‘ä»¬ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ä¹Ÿèƒ½å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼šjavascript1234567891011export default function HookTest() &#123; const [count, setCount] = useState(0); return ( &lt;div&gt; &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt; &lt;button onClick=&#123;() =&gt; &#123; setCount(count + 1); setNumber(number + 1); &#125;&#125;&gt; Click me &lt;/button&gt; &lt;/div&gt; );&#125; useStateæ˜¯ä¸€ä¸ªé’©å­ï¼Œä»–å¯ä»¥ä¸ºå‡½æ•°å¼ç»„ä»¶å¢åŠ ä¸€äº›çŠ¶æ€ï¼Œå¹¶ä¸”æä¾›æ”¹å˜è¿™äº›çŠ¶æ€çš„å‡½æ•°ï¼ŒåŒæ—¶å®ƒæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°ä½œä¸ºçŠ¶æ€çš„é»˜è®¤å€¼ã€‚ Effect HookEffect Hook å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œä¸€äº›å…·æœ‰ side effectï¼ˆå‰¯ä½œç”¨ï¼‰çš„æ“ä½œ å‚æ•°useEffectæ–¹æ³•æ¥æ”¶ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼š å›è°ƒå‡½æ•°ï¼šåœ¨ç¬¬ç»„ä»¶ä¸€æ¬¡renderå’Œä¹‹åçš„æ¯æ¬¡updateåè¿è¡Œï¼ŒReactä¿è¯åœ¨DOMå·²ç»æ›´æ–°å®Œæˆä¹‹åæ‰ä¼šè¿è¡Œå›è°ƒã€‚ çŠ¶æ€ä¾èµ–(æ•°ç»„)ï¼šå½“é…ç½®äº†çŠ¶æ€ä¾èµ–é¡¹åï¼Œåªæœ‰æ£€æµ‹åˆ°é…ç½®çš„çŠ¶æ€å˜åŒ–æ—¶ï¼Œæ‰ä¼šè°ƒç”¨å›è°ƒå‡½æ•°ã€‚ javascript123456useEffect(() =&gt; &#123; // åªè¦ç»„ä»¶renderåå°±ä¼šæ‰§è¡Œ&#125;);useEffect(() =&gt; &#123; // åªæœ‰countæ”¹å˜æ—¶æ‰ä¼šæ‰§è¡Œ&#125;,[count]); å›è°ƒè¿”å›å€¼useEffectçš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“é¡µé¢æ¸²æŸ“äº†ä¸‹ä¸€æ¬¡æ›´æ–°çš„ç»“æœåï¼Œæ‰§è¡Œä¸‹ä¸€æ¬¡useEffectä¹‹å‰ï¼Œä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°å¸¸å¸¸ç”¨æ¥å¯¹ä¸Šä¸€æ¬¡è°ƒç”¨useEffectè¿›è¡Œæ¸…ç†ã€‚javascript1234567891011121314151617export default function HookTest() &#123; const [count, setCount] = useState(0); useEffect(() =&gt; &#123; console.log('æ‰§è¡Œ...', count); return () =&gt; &#123; console.log('æ¸…ç†...', count); &#125; &#125;, [count]); return ( &lt;div&gt; &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt; &lt;button onClick=&#123;() =&gt; &#123; setCount(count + 1); setNumber(number + 1); &#125;&#125;&gt; Click me &lt;/button&gt; &lt;/div&gt; );&#125; æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå¹¶ç‚¹å‡»å‡ æ¬¡æŒ‰é’®ï¼Œå¦‚æœåŠ ä¸Šæµè§ˆå™¨æ¸²æŸ“çš„æƒ…å†µï¼Œç»“æœåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š é¡µé¢æ¸²æŸ“â€¦1 æ‰§è¡Œâ€¦ 1 é¡µé¢æ¸²æŸ“â€¦2 æ¸…ç†â€¦ 1 æ‰§è¡Œâ€¦ 2 é¡µé¢æ¸²æŸ“â€¦3 æ¸…ç†â€¦ 2 æ‰§è¡Œâ€¦ 3 é¡µé¢æ¸²æŸ“â€¦4 æ¸…ç†â€¦ 3 æ‰§è¡Œâ€¦ 4 é‚£ä¹ˆä¸ºä»€ä¹ˆåœ¨æµè§ˆå™¨æ¸²æŸ“å®Œåï¼Œå†æ‰§è¡Œæ¸…ç†çš„æ–¹æ³•è¿˜èƒ½æ‰¾åˆ°ä¸Šæ¬¡çš„stateå‘¢ï¼ŸåŸå› å¾ˆç®€å•ï¼Œæˆ‘ä»¬åœ¨useEffectä¸­è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™å½¢æˆäº†ä¸€ä¸ªé—­åŒ…ï¼Œè¿™èƒ½ä¿è¯æˆ‘ä»¬ä¸Šä¸€æ¬¡æ‰§è¡Œå‡½æ•°å­˜å‚¨çš„å˜é‡ä¸è¢«é”€æ¯å’Œæ±¡æŸ“ã€‚ä½ å¯ä»¥å°è¯•ä¸‹é¢çš„ä»£ç å¯èƒ½æ›´å¥½ç†è§£javascript12345678910111213141516171819202122var flag = 1;var clean;function effect(flag) &#123; return function () &#123; console.log(flag); &#125;&#125;clean = effect(flag);flag = 2;clean();clean = effect(flag);flag = 3;clean();clean = effect(flag);// æ‰§è¡Œç»“æœeffect... 1clean... 1effect... 2clean... 2effect... 3 æ¨¡æ‹ŸcomponentDidMountcomponentDidMountç­‰ä»·äºuseEffectçš„å›è°ƒä»…åœ¨é¡µé¢åˆå§‹åŒ–å®Œæˆåæ‰§è¡Œä¸€æ¬¡ï¼Œå½“useEffectçš„ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„æ—¶å¯ä»¥å®ç°è¿™ä¸ªæ•ˆæœã€‚function useDidMount(callback) { useEffect(callback, []);}å®˜æ–¹ä¸æ¨èä¸Šé¢è¿™ç§å†™æ³•ï¼Œå› ä¸ºè¿™æœ‰å¯èƒ½å¯¼è‡´ä¸€äº›é”™è¯¯ã€‚ æ¨¡æ‹ŸcomponentWillUnmountjavascript123function useUnMount(callback) &#123; useEffect(() =&gt; callback, []);&#125; ä¸åƒ componentDidMount æˆ–è€… componentDidUpdateï¼ŒuseEffect ä¸­ä½¿ç”¨çš„ effect å¹¶ä¸ä¼šé˜»æ»æµè§ˆå™¨æ¸²æŸ“é¡µé¢ã€‚è¿™è®©ä½ çš„ app çœ‹èµ·æ¥æ›´åŠ æµç•…ã€‚ ref Hookä½¿ç”¨useRef Hookï¼Œä½ å¯ä»¥è½»æ¾çš„è·å–åˆ°domçš„refã€‚javascript123456789101112export default function Input() &#123; const inputEl = useRef(null); const onButtonClick = () =&gt; &#123; inputEl.current.focus(); &#125;; return ( &lt;div&gt; &lt;input ref=&#123;inputEl&#125; type=\"text\" /&gt; &lt;button onClick=&#123;onButtonClick&#125;&gt;Focus the input&lt;/button&gt; &lt;/div&gt; );&#125; æ³¨æ„useRef()å¹¶ä¸ä»…ä»…å¯ä»¥ç”¨æ¥å½“ä½œè·å–refä½¿ç”¨ï¼Œä½¿ç”¨useRefäº§ç”Ÿçš„refçš„currentå±æ€§æ˜¯å¯å˜çš„ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨å®ƒæ¥ä¿å­˜ä¸€ä¸ªä»»æ„å€¼ã€‚ æ¨¡æ‹ŸcomponentDidUpdatecomponentDidUpdateå°±ç›¸å½“äºé™¤å»ç¬¬ä¸€æ¬¡è°ƒç”¨çš„useEffectï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©useRefç”Ÿæˆä¸€ä¸ªæ ‡è¯†ï¼Œæ¥è®°å½•æ˜¯å¦ä¸ºç¬¬ä¸€æ¬¡æ‰§è¡Œï¼šjavascript12345678910function useDidUpdate(callback, prop) &#123; const init = useRef(true); useEffect(() =&gt; &#123; if (init.current) &#123; init.current = false; &#125; else &#123; return callback(); &#125; &#125;, prop);&#125; ä½¿ç”¨Hookçš„æ³¨æ„äº‹é¡¹ä½¿ç”¨èŒƒå›´åªèƒ½åœ¨Reactå‡½æ•°å¼ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookä¸­ä½¿ç”¨Hookã€‚Hookçš„æå‡ºä¸»è¦å°±æ˜¯ä¸ºäº†è§£å†³classç»„ä»¶çš„ä¸€ç³»åˆ—é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½åœ¨classç»„ä»¶ä¸­ä½¿ç”¨å®ƒã€‚ å£°æ˜çº¦æŸä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨Hookã€‚Hooké€šè¿‡æ•°ç»„å®ç°çš„ï¼Œæ¯æ¬¡useState éƒ½ä¼šæ”¹å˜ä¸‹æ ‡ï¼ŒReactéœ€è¦åˆ©ç”¨è°ƒç”¨é¡ºåºæ¥æ­£ç¡®æ›´æ–°ç›¸åº”çš„çŠ¶æ€ï¼Œå¦‚æœuseState è¢«åŒ…è£¹å¾ªç¯æˆ–æ¡ä»¶è¯­å¥ä¸­ï¼Œé‚£æ¯å°±å¯èƒ½ä¼šå¼•èµ·è°ƒç”¨é¡ºåºçš„é”™ä¹±ï¼Œä»è€Œé€ æˆæ„æƒ³ä¸åˆ°çš„é”™è¯¯ã€‚æˆ‘ä»¬å¯ä»¥å®‰è£…ä¸€ä¸ªeslintæ’ä»¶æ¥å¸®åŠ©æˆ‘ä»¬é¿å…è¿™äº›é—®é¢˜ã€‚javascript12345678910111213// å®‰è£…npm install eslint-plugin-react-hooks --save-dev// é…ç½®&#123; \"plugins\": [ // ... \"react-hooks\" ], \"rules\": &#123; // ... \"react-hooks/rules-of-hooks\": \"error\" &#125;&#125; è‡ªå®šä¹‰Hookåƒä¸Šé¢ä»‹ç»çš„HOCå’Œmixinä¸€æ ·ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥é€šè¿‡è‡ªå®šä¹‰çš„Hookå°†ç»„ä»¶ä¸­ç±»ä¼¼çš„çŠ¶æ€é€»è¾‘æŠ½å–å‡ºæ¥ã€‚è‡ªå®šä¹‰Hookéå¸¸ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”æŠŠç›¸åº”éœ€è¦çš„çŠ¶æ€å’Œeffectå°è£…è¿›å»ï¼ŒåŒæ—¶ï¼ŒHookä¹‹é—´ä¹Ÿæ˜¯å¯ä»¥ç›¸äº’å¼•ç”¨çš„ã€‚ä½¿ç”¨useå¼€å¤´å‘½åè‡ªå®šä¹‰Hookï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿eslintè¿›è¡Œæ£€æŸ¥ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹å‡ ä¸ªå…·ä½“çš„Hookå°è£…ï¼š æ—¥å¿—æ‰“ç‚¹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šé¢å°è£…çš„ç”Ÿå‘½å‘¨æœŸHookã€‚javascript12345678910111213141516const useLogger = (componentName, ...params) =&gt; &#123; useDidMount(() =&gt; &#123; console.log(`$&#123;componentName&#125;åˆå§‹åŒ–`, ...params); &#125;); useUnMount(() =&gt; &#123; console.log(`$&#123;componentName&#125;å¸è½½`, ...params); &#125;) useDidUpdate(() =&gt; &#123; console.log(`$&#123;componentName&#125;æ›´æ–°`, ...params); &#125;);&#125;;function Page1(props)&#123; useLogger('Page1',props); return (&lt;div&gt;...&lt;/div&gt;)&#125; ä¿®æ”¹titleæ ¹æ®ä¸åŒçš„é¡µé¢åç§°ä¿®æ”¹é¡µé¢title:javascript12345678910111213function useTitle(title) &#123; useEffect( () =&gt; &#123; document.title = title; return () =&gt; (document.title = \"ä¸»é¡µ\"); &#125;, [title] );&#125;function Page1(props)&#123; useTitle('Page1'); return (&lt;div&gt;...&lt;/div&gt;)&#125; åŒå‘ç»‘å®šæˆ‘ä»¬å°†è¡¨å•onChangeçš„é€»è¾‘æŠ½å–å‡ºæ¥å°è£…æˆä¸€ä¸ªHookï¼Œè¿™æ ·æ‰€æœ‰éœ€è¦è¿›è¡ŒåŒå‘ç»‘å®šçš„è¡¨å•ç»„ä»¶éƒ½å¯ä»¥è¿›è¡Œå¤ç”¨ï¼šjavascript1234567891011121314function useBind(init) &#123; let [value, setValue] = useState(init); let onChange = useCallback(function(event) &#123; setValue(event.currentTarget.value); &#125;, []); return &#123; value, onChange &#125;;&#125;function Page1(props)&#123; let value = useBind(''); return &lt;input &#123;...value&#125; /&gt;;&#125; å½“ç„¶ï¼Œä½ å¯ä»¥å‘ä¸Šé¢çš„HOCé‚£æ ·ï¼Œç»“åˆcontextå’Œformæ¥å°è£…ä¸€ä¸ªæ›´é€šç”¨çš„åŒå‘ç»‘å®šï¼Œæœ‰å…´è¶£å¯ä»¥æ‰‹åŠ¨å®ç°ä¸€ä¸‹ã€‚ ä½¿ç”¨Hookçš„åŠ¨æœºå‡å°‘çŠ¶æ€é€»è¾‘å¤ç”¨çš„é£é™©Hookå’ŒMixinåœ¨ç”¨æ³•ä¸Šæœ‰ä¸€å®šçš„ç›¸ä¼¼ä¹‹å¤„ï¼Œä½†æ˜¯Mixinå¼•å…¥çš„é€»è¾‘å’ŒçŠ¶æ€æ˜¯å¯ä»¥ç›¸äº’è¦†ç›–çš„ï¼Œè€Œå¤šä¸ªHookä¹‹é—´äº’ä¸å½±å“ï¼Œè¿™è®©æˆ‘ä»¬ä¸éœ€è¦åœ¨æŠŠä¸€éƒ¨åˆ†ç²¾åŠ›æ”¾åœ¨é˜²æ­¢é¿å…é€»è¾‘å¤ç”¨çš„å†²çªä¸Šã€‚åœ¨ä¸éµå®ˆçº¦å®šçš„æƒ…å†µä¸‹ä½¿ç”¨HOCä¹Ÿæœ‰å¯èƒ½å¸¦æ¥ä¸€å®šå†²çªï¼Œæ¯”å¦‚propsè¦†ç›–ç­‰ç­‰ï¼Œä½¿ç”¨Hookåˆ™å¯ä»¥é¿å…è¿™äº›é—®é¢˜ã€‚ é¿å…åœ°ç‹±å¼åµŒå¥—å¤§é‡ä½¿ç”¨HOCçš„æƒ…å†µä¸‹è®©æˆ‘ä»¬çš„ä»£ç å˜å¾—åµŒå¥—å±‚çº§éå¸¸æ·±ï¼Œä½¿ç”¨Hookï¼Œæˆ‘ä»¬å¯ä»¥å®ç°æ‰å¹³å¼çš„çŠ¶æ€é€»è¾‘å¤ç”¨ï¼Œè€Œé¿å…äº†å¤§é‡çš„ç»„ä»¶åµŒå¥—ã€‚ è®©ç»„ä»¶æ›´å®¹æ˜“ç†è§£åœ¨ä½¿ç”¨classç»„ä»¶æ„å»ºæˆ‘ä»¬çš„ç¨‹åºæ—¶ï¼Œä»–ä»¬å„è‡ªæ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€ï¼Œä¸šåŠ¡é€»è¾‘çš„å¤æ‚ä½¿è¿™äº›ç»„ä»¶å˜å¾—è¶Šæ¥è¶Šåºå¤§ï¼Œå„ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ä¼šè°ƒç”¨è¶Šæ¥è¶Šå¤šçš„é€»è¾‘ï¼Œè¶Šæ¥è¶Šéš¾ä»¥ç»´æŠ¤ã€‚ä½¿ç”¨Hookï¼Œå¯ä»¥è®©ä½ æ›´å¤§é™åº¦çš„å°†å…¬ç”¨é€»è¾‘æŠ½ç¦»ï¼Œå°†ä¸€ä¸ªç»„ä»¶åˆ†å‰²æˆæ›´å°çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯å¼ºåˆ¶åŸºäºç”Ÿå‘½å‘¨æœŸæ–¹æ³•è¿›è¡Œåˆ†å‰²ã€‚ ä½¿ç”¨å‡½æ•°ä»£æ›¿classç›¸æ¯”å‡½æ•°ï¼Œç¼–å†™ä¸€ä¸ªclasså¯èƒ½éœ€è¦æŒæ¡æ›´å¤šçš„çŸ¥è¯†ï¼Œéœ€è¦æ³¨æ„çš„ç‚¹ä¹Ÿè¶Šå¤šï¼Œæ¯”å¦‚thisæŒ‡å‘ã€ç»‘å®šäº‹ä»¶ç­‰ç­‰ã€‚å¦å¤–ï¼Œè®¡ç®—æœºç†è§£ä¸€ä¸ªå‡½æ•°æ¯”ç†è§£ä¸€ä¸ªclassæ›´å¿«ã€‚Hooksè®©ä½ å¯ä»¥åœ¨classesä¹‹å¤–ä½¿ç”¨æ›´å¤šReactçš„æ–°ç‰¹æ€§ã€‚","categories":[{"name":"React","slug":"React","permalink":"/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"/tags/React/"},{"name":"Hooks","slug":"Hooks","permalink":"/tags/Hooks/"},{"name":"HOC","slug":"HOC","permalink":"/tags/HOC/"},{"name":"Mixin","slug":"Mixin","permalink":"/tags/Mixin/"}],"keywords":[{"name":"React","slug":"React","permalink":"/categories/React/"}]},{"title":"ç ´è§£å„éŸ³ä¹Appçš„vipé™åˆ¶","slug":"ç ´è§£å„éŸ³ä¹Appéœ€è¦vipé™åˆ¶","date":"2020-02-15T05:13:03.000Z","updated":"2020-02-16T04:12:01.353Z","comments":true,"path":"2020/02/15/ç ´è§£å„éŸ³ä¹Appéœ€è¦vipé™åˆ¶/","link":"","permalink":"/2020/02/15/ç ´è§£å„éŸ³ä¹Appéœ€è¦vipé™åˆ¶/","excerpt":"","text":"ä¼—æ‰€å‘¨çŸ¥ï¼Œç›®å‰å„å¤§éŸ³ä¹Appéƒ½å­˜åœ¨ç‰ˆæƒï¼Œå› æ­¤ç»å¸¸é‡åˆ°ä¸€ç§å°´å°¬çš„æƒ…å†µï¼Œå¹³æ—¶ä¹ æƒ¯ç”¨QQéŸ³ä¹ï¼Œä½†æ˜¯éƒ¨åˆ†æ­Œæ›²QQéŸ³ä¹æ²¡æœ‰æˆ–è€…æ˜¯éœ€è¦å¼€ä¼šå‘˜ï¼Œå¯¹äºé‡åº¦å¼ºè¿«ç—‡(è¿˜ä¸æ˜¯å› ä¸ºç©·)çš„æˆ‘æ˜¯æ²¡æ³•æ¥å—çš„ï¼Œå› æ­¤ä»Šå¤©å¸¦æ¥ä¸€ç§è·¨å¹³å°çš„å…vipå¬æ‰€æœ‰æ­Œæ›²çš„åŠæ³• åŸç†ç½‘æ˜“äº‘éŸ³ä¹æä¾›äº†éŸ³ä¹äº‘ç›˜çš„åŠŸèƒ½ï¼Œå¯ä»¥ä¸Šä¼ æœ¬åœ°çš„éŸ³ä¹ï¼ŒåŒæ—¶å¯ä»¥åœ¨pcã€ç§»åŠ¨ç«¯åŒæ­¥ï¼Œé‚£ä¹ˆè§£å†³åŠæ³•å°±æœ‰äº† æ“ä½œæ­¥éª¤å¯»æ‰¾å–œæ¬¢çš„éŸ³ä¹åœ¨è¿™é‡Œæ¨èä¸€ä¸ªåä¸º è¶…é«˜æ— æŸéŸ³ä¹ çš„ç½‘ç«™ï¼Œè¯¥ç½‘ç«™æ”¶å½•äº†å¾ˆå¤šæ— æŸéŸ³è´¨çš„æ­Œæ›²ï¼Œæ˜¯ä»¥ç™¾åº¦ç½‘ç›˜é“¾æ¥çš„å½¢å¼åˆ†äº«ï¼Œåœ¨æœç´¢æ¡†æœç´¢è‡ªå·±å–œæ¬¢çš„éŸ³ä¹ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š é€‰æ‹©éœ€è¦çš„æ ¼å¼ï¼Œå»ç½‘ç›˜ä¸‹è½½åˆ°æœ¬åœ°å¤‡ç”¨ æ­Œæ›²ä¸Šä¼  é¦–å…ˆä¸‹è½½ç½‘æ˜“äº‘éŸ³ä¹pcå®¢æˆ·ç«¯ï¼Œå®‰è£…ï¼Œæ³¨å†Œè´¦å·å¹¶ç™»é™†(ä¸ºäº†èƒ½å¤Ÿå¤šç«¯åŒæ­¥éŸ³ä¹)ï¼Œè¿™é‡Œä¸èµ˜è¿°ï¼Œæ“ä½œå¾ˆç®€å• æ‰¾åˆ°å·¦ä¾§ â€œæˆ‘çš„éŸ³ä¹äº‘ç›˜â€ï¼Œç„¶åç‚¹å‡»å³ä¾§çš„ â€œ+ ä¸Šä¼ éŸ³ä¹â€ æŒ‰é’®é€‰æ‹©æœ¬åœ°ä¸‹è½½å¥½çš„éŸ³ä¹ï¼Œä¸Šä¼  ä¸Šä¼ æˆåŠŸä»¥åæ‰‹æœºç«¯å°±å¯ä»¥åŒæ­¥äº†ï¼Œè‡³æ­¤ï¼Œå–œæ¬¢ä»€ä¹ˆæ­Œä¸‹è½½ä¸‹æ¥ä¸Šä¼ å°±å¥½ï¼Œå…vipï¼Œè·¨å¹³å°ä½¿ç”¨ å®‰å“ç«¯è¿›å…¥å®¢æˆ·ç«¯åå±å¹•å³æ»‘ï¼Œå¯ä»¥çœ‹åˆ°äº‘ç›˜ iosç«¯è¿›å…¥å®¢æˆ·ç«¯åé€‰æ‹©åº•éƒ¨çš„ â€œæˆ‘çš„â€ï¼Œæ‰¾åˆ°å·¦ä¸Šè§’çš„äº‘æœµå›¾æ ‡å¯ä»¥è¿›å…¥äº‘ç›˜","categories":[{"name":"ç ´è§£","slug":"ç ´è§£","permalink":"/categories/ç ´è§£/"}],"tags":[{"name":"ç½‘æ˜“äº‘éŸ³ä¹","slug":"ç½‘æ˜“äº‘éŸ³ä¹","permalink":"/tags/ç½‘æ˜“äº‘éŸ³ä¹/"},{"name":"vipç ´è§£","slug":"vipç ´è§£","permalink":"/tags/vipç ´è§£/"}],"keywords":[{"name":"ç ´è§£","slug":"ç ´è§£","permalink":"/categories/ç ´è§£/"}]},{"title":"flutteræ‰“åŒ…--Android","slug":"flutteræ‰“åŒ…--Android","date":"2020-01-14T08:22:51.000Z","updated":"2020-02-15T12:29:48.510Z","comments":true,"path":"2020/01/14/flutteræ‰“åŒ…--Android/","link":"","permalink":"/2020/01/14/flutteræ‰“åŒ…--Android/","excerpt":"","text":"é¡¹ç›®å›¾ç‰‡/android/app/src/main/res/ ç›®å½•ä¸‹æ ¹æ®mipmap-ä¸ºå‰ç¼€æ–‡ä»¶å¤¹å­˜å…¥ç›¸åº”dpiçš„pngå›¾ç‰‡ é…ç½®APPåç§°ã€å›¾æ ‡å’Œç³»ç»Ÿæƒé™åœ¨ /android/app/src/main/AndroidManifest.xmlç›®å½•ä¸‹ java12android:label=\"Appåå­—\"android:icon=\"@mipmap/ic_launcher\" //æ­¤å±æ€§ä¸ºAPPå›¾æ ‡ç”¨åˆ°çš„å›¾ç‰‡åç§° APPæ³¨å†Œå°†keytoolæ‰€åœ¨è·¯å¾„æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡,é»˜è®¤æ˜¯åœ¨ C:\\Program Files\\Android\\Android Studio\\jre\\bin ä¸‹é¢ï¼Œç„¶åå°†ç”Ÿæˆçš„keyå­˜å‚¨åˆ°eç›˜æ ¹ç›®å½• java1keytool -genkey -v -keystore e:/key.jks -keyalg RSA -keysize 2048 -validity 100000 -alias key å›è½¦ä»¥åä¼šè®©ä½ è¾“å…¥å¯¹åº”çš„ä¿¡æ¯ï¼Œå…¶ä¸­å¯†åŒ™ä¸€å®šè¦è®°ä½ï¼Œæ¥ä¸‹æ¥åˆ°é¡¹ç›®ç›®å½•çš„androidæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºkey.propertiesçš„æ–‡ä»¶ï¼Œå¹¶æ‰“å¼€è´´å…¥ä»¥ä¸‹ä»£ç ï¼š java1234storePassword=åˆ›å»ºKEYæ—¶è¾“å…¥çš„å¯†é’¥åº“å¯†ç keyPassword=åˆ›å»ºKEYæ—¶è¾“å…¥çš„å¯†é’¥å¯†ç  keyAlias=keystoreFile=e:/key.jks é…ç½®keyæ³¨å†Œæ‰“å¼€/android/app/build.gradleæ–‡ä»¶ï¼Œåœ¨ android { è¿™ä¸€è¡Œå‰é¢ï¼ŒåŠ å…¥ä»£ç ï¼š java123defkeystorePropertiesFile=rootProject.file(\"key.properties\")defkeystoreProperties=newProperties()keystoreProperties.load(newFileInputStream(keystorePropertiesFile)) æŠŠå¦‚ä¸‹ä»£ç ï¼š java12345buildTypes &#123; release &#123; signingConfig signingConfigs.debug &#125;&#125; æ›¿æ¢æˆï¼š java1234567891011121314signingConfigs &#123; release &#123; keyAlias keystoreProperties['keyAlias'] keyPassword keystoreProperties['keyPassword'] storeFile file(keystoreProperties['storeFile']) storePassword keystoreProperties['storePassword'] &#125;&#125;buildTypes &#123; release &#123; signingConfig signingConfigs.release &#125;&#125; åˆ°defaultConfigä¸­ï¼Œå½•å…¥APPIDå’Œç‰ˆæœ¬å·ï¼š java123456789101112131415defaultConfig &#123; // APPID applicationId \"com.example.myflutter\" // å¯è¿è¡Œåº”ç”¨çš„æœ€ä½ç‰ˆæœ¬çš„ Android å¹³å°ï¼Œç”±è¯¥å¹³å°çš„ API çº§åˆ«æ ‡è¯†ç¬¦æŒ‡å®š minSdkVersion 16 // æŒ‡å®šè¿è¡Œåº”ç”¨çš„ç›®æ ‡ API çº§åˆ«ã€‚ // åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™å…è®¸åº”ç”¨ä½¿ç”¨åœ¨ç›®æ ‡ API çº§åˆ«ä¸­å®šä¹‰çš„æ¸…å•å…ƒç´ æˆ–è¡Œä¸ºï¼Œ // è€Œä¸æ˜¯ä»…é™äºä½¿ç”¨é‚£äº›é’ˆå¯¹æœ€ä½ API çº§åˆ«å®šä¹‰çš„å…ƒç´ æˆ–è¡Œä¸ºã€‚ targetSdkVersion 27 //å†…éƒ¨ç‰ˆæœ¬å· versionCode 1 //å¯¹å¤–å…¬å¸ƒçš„ç‰ˆæœ¬å· versionName \"1.0\" testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\" &#125; ç¼–è¯‘ç”Ÿæˆapkæ–‡ä»¶åœ¨é¡¹ç›®æ ¹ç›®å½•ç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤ï¼š bash1flutter build apk å®‰è£…åˆ°æ‰‹æœºcmake1flutter install .","categories":[{"name":"Flutter","slug":"Flutter","permalink":"/categories/Flutter/"}],"tags":[{"name":"Flutter","slug":"Flutter","permalink":"/tags/Flutter/"},{"name":"Android","slug":"Android","permalink":"/tags/Android/"}],"keywords":[{"name":"Flutter","slug":"Flutter","permalink":"/categories/Flutter/"}]},{"title":"flutterçŠ¶æ€ç®¡ç†ä¹‹flutter_redux","slug":"flutterçŠ¶æ€ç®¡ç†ä¹‹flutter_redux","date":"2019-12-31T04:13:03.000Z","updated":"2020-02-15T11:58:37.598Z","comments":true,"path":"2019/12/31/flutterçŠ¶æ€ç®¡ç†ä¹‹flutter_redux/","link":"","permalink":"/2019/12/31/flutterçŠ¶æ€ç®¡ç†ä¹‹flutter_redux/","excerpt":"","text":"ä¸€ã€åˆ›å»ºå…¨å±€statedart12345678910111213141516171819202122// state.dartimport 'package:nicolas/redux/user/login_redux.dart';import 'package:nicolas/redux/user/user_redux.dart';import 'package:nicolas/redux/middleware/epic_middleware.dart'; // åœ¨é¡¹ç›®ä¸­å¼•å…¥epic_middlewareä¸­é—´ä»¶import 'package:redux/redux.dart';class GlobalState &#123; // å…¨å±€Reduxå¯¹è±¡ï¼Œä¿å­˜Stateæ•°æ® bool login; // ç™»é™†çŠ¶æ€ GlobalState(&#123;this.login&#125;);&#125;// å®šä¹‰appReduceråˆ›å»º storeï¼Œé€šè¿‡ appReducer å°† GlobalState å†…çš„login å’Œ å¯¹åº”çš„action å…³è”åœ¨ä¸€èµ·GlobalState appReducer(GlobalState state, action) &#123; return GlobalState( login: loginReducer(state.login, action), );&#125;final List&lt;Middleware&lt;GlobalState&gt;&gt; middleware = [ EpicMiddleware&lt;GlobalState&gt;(LoginEpic()), LoginMiddleware(),]; äºŒã€åˆ›å»ºloginçš„stateç®¡ç†dart123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960import 'package:flutter/material.dart';import 'package:nicolas/redux/state.dart';import 'package:nicolas/redux/middleware/epic.dart';import 'package:nicolas/redux/middleware/epic_store.dart';import 'package:redux/redux.dart';final loginReducer = combineReducers&lt;bool&gt;([ TypedReducer&lt;bool, LoginSuccessAction&gt;(_loginResult), TypedReducer&lt;bool, LogoutAction&gt;(_logoutResult),]);bool _loginResult(bool result, LoginSuccessAction action) &#123; if (action.success == true) &#123; // ç™»é™†æˆåŠŸä»¥å.... &#125; return action.success;&#125;// LoginSuccessActionè§¦å‘ï¼Œå°±ä¼šè°ƒç”¨åˆ° _loginResultï¼Œå®ƒæ¥å—ä¸€ä¸ªæ–°çš„stateï¼Œå¹¶è¿”å›class LoginSuccessAction &#123; final BuildContext context; final bool success; LoginSuccessAction(this.context, this.success);&#125;class LoginAction &#123; final BuildContext context; final String user; final String password; LoginAction(this.context, this.user, this.password);&#125;class LoginMiddleware implements MiddlewareClass&lt;GlobalState&gt; &#123; @override void call(Store&lt;GlobalState&gt; store, dynamic action, NextDispatcher next) &#123; if (action is LogoutAction) &#123; print('logout'); &#125; // Make sure to forward actions to the next middleware in the chain! next(action); &#125;&#125;class LoginEpic implements EpicClass&lt;GlobalState&gt; &#123; @override Stream&lt;dynamic&gt; call(Stream&lt;dynamic&gt; actions, EpicStore&lt;GlobalState&gt; store) &#123; return Observable(actions) .whereType&lt;LoginAction&gt;() .switchMap((action) =&gt; _loginIn(action, store)); &#125; Stream&lt;dynamic&gt; _loginIn( LoginAction action, EpicStore&lt;GlobalState&gt; store) async* &#123; var res = await UserDio.login( // ç™»é™†è¯·æ±‚ action.user.trim(), action.password.trim(), store); yield LoginSuccessAction(action.context, (res != null &amp;&amp; res.result)); // ç™»é™†è¯·æ±‚ç»“æœå¤„ç† &#125;&#125; ä¸‰ã€æ³¨å†Œå…¨å±€statedart123456789101112131415161718192021222324252627282930313233343536373839import 'dart:async';import 'package:flutter/material.dart';import 'package:nicolas/redux/state.dart';import 'package:nicolas/app.dart';import 'package:nicolas/page/user/login.dart';import 'package:flutter_redux/flutter_redux.dart';import 'package:nicolas/common/utils/navigator.dart';import 'package:fluttertoast/fluttertoast.dart';import 'package:redux/redux.dart';import 'common/event/index.dart';import 'package:nicolas/common/event/http_error_event.dart';import 'package:nicolas/common/http/code.dart';void main() =&gt; runApp(FlutterReduxApp());class FlutterReduxApp extends StatefulWidget &#123; @override _FlutterReduxAppState createState() =&gt; _FlutterReduxAppState();&#125;class _FlutterReduxAppState extends State&lt;FlutterReduxApp&gt; with HttpErrorListener &#123; final store = new Store&lt;GlobalState&gt;(appReducer, middleware: middleware, initialState: new GlobalState( // åˆå§‹åŒ–stateæ•°æ® login: false, )); @override Widget build(BuildContext context) &#123; return new StoreProvider( store: store, // æŒ‚è½½store child: new StoreBuilder&lt;GlobalState&gt;(builder: (context, store) &#123; return Text('xxxx); &#125;), ); &#125;&#125; å››ã€ä½¿ç”¨statedart12345678Container( child: new StoreConnector&lt;GlobalState, bool&gt;( converter: (store) =&gt; store.state.login, builder: (context, login) &#123; return Text(login.toString()); &#125;, ));","categories":[{"name":"Flutter","slug":"Flutter","permalink":"/categories/Flutter/"}],"tags":[{"name":"Flutter","slug":"Flutter","permalink":"/tags/Flutter/"},{"name":"è·¨å¹³å°","slug":"è·¨å¹³å°","permalink":"/tags/è·¨å¹³å°/"}],"keywords":[{"name":"Flutter","slug":"Flutter","permalink":"/categories/Flutter/"}]},{"title":"linuxå®‰è£…nginx","slug":"linuxå®‰è£…nginx","date":"2019-06-14T01:14:05.000Z","updated":"2020-04-14T12:19:18.231Z","comments":true,"path":"2019/06/14/linuxå®‰è£…nginx/","link":"","permalink":"/2019/06/14/linuxå®‰è£…nginx/","excerpt":"","text":"nginxå®‰è£…å¸¸è§„å®‰è£…vala123456789101112131415161718192021222324252627# å®‰è£…wgetyum install -y weget# å®‰è£…ç¼–è¯‘å·¥å…·å’Œç›¸å…³çš„åº“æ–‡ä»¶ yum -y install make zlib zlib-devel gcc-c++ libtool openssl openssl-devel# ä¸‹è½½PCREï¼ˆè®©nginxæ”¯æŒRULåœ°å€çš„é‡å®šå‘åŠŸèƒ½ï¼‰wget https://sourceforge.net/projects/pcre/files/pcre/8.41/pcre-8.41.tar.gz# è§£å‹tar -xvzf pcre-8.41.tar.gz# è¿›å…¥å®‰è£…åŒ…ç›®å½•cd pcre-8.41# ç¼–è¯‘å®‰è£…./configuremake &amp;&amp; make install# ä¸‹è½½å®‰è£… nginxwget http://nginx.org/download/nginx-1.14.0.tar.gz# è§£å‹tar -xvzf nginx-1.14.0.tar.gz# è¿›å…¥å®‰è£…åŒ…ç›®å½•ï¼šcd nginx-1.14.0# ç¼–è¯‘å®‰è£…ï¼š./configure --prefix=/usr/local/share/applications/nginx-1.14.0/ --with-http_ssl_modulemake &amp;&amp; make install# æŸ¥æ‰¾nginxå®‰è£…è·¯å¾„find / -name nginx# åˆ¶ä½œnginxè½¯é“¾æ¥,æ ¼å¼ä¸ºï¼šln -s ç›®æ ‡è·¯å¾„ /usr/sbin/nginx# æ‰¾åˆ°å¸¦sbinçš„nginxè·¯å¾„ï¼Œå¦‚ï¼š/usr/local/share/applications/nginx-1.14.0/sbin/nginxln -s /usr/local/share/applications/nginx-1.14.0/sbin/nginx /usr/sbin/nginx yumå®‰è£…æ·»åŠ yumæºrootæƒé™ä¸‹æ·»åŠ nginxçš„yumæºï¼Œæ­¤å¤„ä»¥RHEL/CentOSä¸ºä¾‹ï¼Œå…¶ä»–ç‰ˆæœ¬çš„linuxå‚è€ƒè¿™é‡Œproperties1234# å®‰è£…yum-utilsyum install yum-utils# æ·»åŠ nginx.repovi /etc/yum.repos.d/nginx.repo å†…å®¹å¦‚ä¸‹ï¼šini123456789101112131415[nginx-stable]name=nginx stable repobaseurl=http://nginx.org/packages/centos/$releasever/$basearch/gpgcheck=1enabled=1gpgkey=https://nginx.org/keys/nginx_signing.keymodule_hotfixes=true[nginx-mainline]name=nginx mainline repobaseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/gpgcheck=1enabled=0gpgkey=https://nginx.org/keys/nginx_signing.keymodule_hotfixes=true å®‰è£…nginxbash1yum -y install nginx å¯åŠ¨nginxangelscript123456789nginx# å¦‚æœæ²¡ä»»ä½•æç¤ºï¼Œåˆ™ä»£è¡¨nginxå¯åŠ¨æˆåŠŸäº†ï¼ŒæŸ¥çœ‹nginxç«¯å£å ç”¨lsof -i:80# nginx 1410 root 6u IPv4 22898 0t0 TCP *:http (LISTEN)# nginx 2206 nginx 6u IPv4 22898 0t0 TCP *:http (LISTEN)# å¼€æ”¾80ç«¯å£firewall-cmd --permanent --zone=public --add-port=80/tcp# é‡è½½é˜²ç«å¢™firewall-cmd --reload ä¿®æ”¹nginxé…ç½®vim1234# æŸ¥æ‰¾é…ç½®æ–‡ä»¶è·¯å¾„find / -name nginx.conf# å¾—åˆ°è·¯å¾„å¦‚ï¼š/etc/nginx/nginx.confï¼Œæ¥ä¸‹æ¥ç¼–è¾‘vi /etc/nginx/nginx.conf æ‰¾åˆ°serveréƒ¨åˆ†nginx123456789101112131415server &#123; listen 80; #ç›‘å¬çš„ç«¯å£ server_name baidu.com; # éœ€è¦ç»‘å®šçš„åŸŸå location / &#123; root /www/test; # é¡¹ç›®è·¯å¾„ index index.html index.htm; # é»˜è®¤é¦–é¡µ &#125; # åå‘ä»£ç† location /api/ &#123; # å°†æ‰€æœ‰å¸¦apiçš„è¯·æ±‚ä»£ç†åˆ°127.0.0.1:3000 proxy_set_header Host $host:$proxy_port; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_pass http://127.0.0.1:3000; # host:portçš„æ ¼å¼ &#125;&#125; é…ç½®å®Œæ¯•ä»¥åescç„¶å:wqå›è½¦ï¼Œreloadä¸€ä¸‹confbash1nginx -s reload nginxå¸¸è§„æ“ä½œvala1234567891011121314151617181920# å¯åŠ¨nginxnginx# é‡æ–°è½½å…¥é…ç½®æ–‡ä»¶nginx -s reload # é‡å¯ nginxnginx -s reopen # åœæ­¢ nginxnginx -s stop# æ·»åŠ å¼€æœºå¯åŠ¨systemctl enable nginx.service# æŸ¥çœ‹nginxé”™è¯¯æ—¥å¿—(æœ€è¿‘100æ¡)tail -100f /var/log/nginx/error.log# æŸ¥çœ‹nginxè¯·æ±‚æ—¥å¿—(æœ€è¿‘100æ¡)tail -100f /var/log/nginx/access.log","categories":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}],"tags":[{"name":"nginx","slug":"nginx","permalink":"/tags/nginx/"}],"keywords":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}]},{"title":"iosèƒŒæ™¯éŸ³ä¹autoplay","slug":"iosèƒŒæ™¯éŸ³ä¹autoplay","date":"2019-06-01T04:26:29.000Z","updated":"2020-02-15T12:54:59.859Z","comments":true,"path":"2019/06/01/iosèƒŒæ™¯éŸ³ä¹autoplay/","link":"","permalink":"/2019/06/01/iosèƒŒæ™¯éŸ³ä¹autoplay/","excerpt":"","text":"å‰ç«¯é¡µé¢audioæ— æ³•è‡ªåŠ¨æ’­æ”¾è¿™ä¸ªåœ¨ IOS/Android ä¸Šé¢ç›®å‰å·²ç»æ˜¯ä¸ªæƒ¯ä¾‹ï¼Œå¦‚æœè°ƒç”¨audio.playå¿…é¡»åœ¨äº‹ä»¶é‡Œé¢å“åº”ï¼Œæ¢å¥è¯è¯´ï¼Œç”¨æˆ·è¿˜æ²¡æœ‰äº¤äº’ï¼Œä¸è®©è°ƒplayã€‚ç½‘ä¸Šä¹Ÿæœ‰ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯å¼•å¯¼ç”¨æˆ·è§¦å‘äº‹ä»¶ï¼Œèƒ½è§£å†³autoplayçš„é—®é¢˜ï¼Œä½†æ˜¯å±€é™æ€§å¾ˆå¤§ï¼Œå¦‚æœè¦æ’­æ”¾å¤šä¸ªéŸ³ä¹ä¹Ÿå°±å‡‰å‡‰ï¼ŒåŒæ—¶ä¹Ÿæœ‰AudioContextè§£å†³æ–¹æ¡ˆï¼Œç»è¿‡å°è¯•è¿˜æ˜¯æ²¡è¾¾åˆ°é¢„æœŸï¼Œä¸ªäººåœ¨å…¬å¸é¡¹ç›®ä¸­æœ‰ä¸ªéœ€æ±‚æ˜¯è¿›é¡µé¢æ’­æ”¾èƒŒæ™¯éŸ³ä¹ï¼ŒåŒæ—¶ï¼ŒåŸºäºä¸åŒé˜¶æ®µï¼Œä¼šæ’­æ”¾å„ç§éŸ³æ•ˆï¼Œå› ä¸ºiosç­–ç•¥é™åˆ¶ï¼Œæ‰¾åˆ°å¦‚ä¸‹è§£å†³æ–¹æ¡ˆï¼Œpsï¼šé¡¹ç›®æ˜¯åŸºäºvueçš„ soundjsçš„å¼•å…¥soundjsæ˜¯ä¸“é—¨å¤„ç†éŸ³é¢‘çš„ä¸€ä¸ªjsåº“ï¼Œè¿™é‡Œä¸åšè¿‡å¤šä»‹ç»ï¼Œä¼ é€é—¨ å› ä¸ºé¡¹ç›®æ˜¯åŸºäºvueçš„ï¼Œä½†é—æ†¾çš„æ˜¯soundjsæ²¡æœ‰npmåŒ…ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡å®˜ç½‘æä¾›çš„cdnåœ¨é¡¹ç›®å…¥å£index.htmlé€šè¿‡scriptå¼•å…¥javascript1&lt;script type=\"text/javascript\" src=\"https://code.createjs.com/1.0.0/createjs.min.js\"&gt;&lt;/script&gt; æ‰“å¼€soundjsæºç javascript12this.createjs=this.createjs||&#123;&#125;...... å¯ä»¥çœ‹åˆ°é‡Œé¢åˆ›å»ºäº†ä¸€ä¸ªå«createjsçš„å¯¹è±¡ï¼Œç»‘å®šåœ¨thisä¸Šé¢ï¼Œå½“ç„¶äº†ï¼Œæ ¹æ®ä¸Šä¸‹æ–‡æ¥è®²æ­¤æ—¶çš„thisæŒ‡ä»£çš„æ˜¯windowè€Œä¸æ˜¯vueå®ä¾‹,å› ä¸ºæˆ‘ä»¬æ˜¯åœ¨å…¥å£index.htmlå¼•å…¥çš„ï¼Œç®—æ˜¯å…¨å±€å¼•ç”¨ï¼Œå› æ­¤æˆ‘ä»¬è¦ä½¿ç”¨createjsåªéœ€è¦window.createjså³å¯ã€‚ ç»‘å®šéŸ³ä¹åˆ—è¡¨é¦–å…ˆæˆ‘è¿™é‡Œæœ‰ä¸€ä¸ªéŸ³ä¹åˆ—è¡¨javascript123456789101112131415list: [ &#123; name: 'a', // éŸ³é¢‘åå­— src: '../../static/a.mp3' // éŸ³é¢‘è·¯å¾„ &#125;, &#123; name: 'b', src: '../../static/b.mp3' &#125;, &#123; name: 'c', src: '../../static/c.mp3' &#125; ] æ¥ä¸‹æ¥éœ€è¦å°†éŸ³ä¹åˆ—è¡¨ç»‘å®šåˆ°createjså¯¹è±¡ä¸Š javascript12345for (let i = 0; i &lt; this.list.length; i++) &#123; window.createjs.source || (window.createjs.source = &#123;&#125;) // æ·»åŠ sourceå±æ€§å­˜å‚¨éŸ³ä¹ä¿¡æ¯ window.createjs.Sound.registerSound(this.list[i].src, this.list[i].name) // ç»‘å®šéŸ³ä¹ä¿¡æ¯åˆ°createjså®ä¾‹ window.createjs.source[this.list[i].name] = window.createjs.Sound.createInstance(this.list[i].name) // åˆ›å»ºæ’­å®ä¾‹ï¼Œæ·»åŠ æ˜ å°„&#125; éŸ³ä¹æ“ä½œæ¥ä¸‹æ¥åˆ›å»ºä¸‰ä¸ªæ“ä½œéŸ³ä¹çš„æ–¹æ³• æ’­æ”¾éŸ³ä¹javascript123456789playSound (e, t, f) &#123; let i = window.createjs.source[e] i.playState &amp;&amp; i.stop() i.play(t) f &amp;&amp; f())&#125;// e: éœ€è¦æ’­æ”¾çš„éŸ³ä¹åå­—ï¼Œè¿™é‡Œå’ŒéŸ³ä¹listé‡Œé¢çš„naneå­—æ®µå¯¹åº”// t: æ’­æ”¾æ¨¡å¼ï¼Œä¼ å…¥ä¸€ä¸ªå¯¹è±¡&#123;loop: -1&#125; ,-1ä»£è¡¨æ— é™å¾ªç¯ï¼Œ1ä»£è¡¨ä»…æ’­æ”¾ä¸€æ¬¡// f: callback æš‚åœéŸ³ä¹javascript123pausedSound (e, f) &#123; window.createjs.source[e].paused = !window.createjs.source[e].paused, f &amp;&amp; f()&#125;, åœæ­¢æ’­æ”¾javascript123stopSound (e, f) &#123; return e ? window.createjs.source[e].stop() : window.createjs.Sound.stop(), f &amp;&amp; f()&#125; é™éŸ³javascript123mutedSound () &#123; window.createjs.Sound.muted = !window.createjs.Sound.muted&#125;","categories":[{"name":"vue","slug":"vue","permalink":"/categories/vue/"}],"tags":[{"name":"vue","slug":"vue","permalink":"/tags/vue/"},{"name":"audio","slug":"audio","permalink":"/tags/audio/"}],"keywords":[{"name":"vue","slug":"vue","permalink":"/categories/vue/"}]},{"title":"vue-clié…ç½®å¤šå…¥å£","slug":"vue-clié…ç½®å¤šå…¥å£","date":"2019-04-23T03:21:55.000Z","updated":"2020-02-15T12:54:59.864Z","comments":true,"path":"2019/04/23/vue-clié…ç½®å¤šå…¥å£/","link":"","permalink":"/2019/04/23/vue-clié…ç½®å¤šå…¥å£/","excerpt":"","text":"å› å®é™…éœ€è¦ï¼Œåœ¨å…¬å¸ç§»åŠ¨ç«¯é¡¹ç›®ä¸Šçº¿åæœºç»„åšpcç‰ˆï¼Œæ­¤æ—¶ï¼Œå¦‚æœé‡æ–°æ„å»ºä¸€ä¸ªpcé¡¹ç›®çš„è¯ä¸€æ¥ç»´æŠ¤ä¸ä¾¿ï¼ŒäºŒæ¥å¾ˆå¤šå…¬å…±èµ„æºå¯ä»¥é‡å¤åˆ©ç”¨ï¼Œå› æ­¤åœ¨åŸæ¥ç§»åŠ¨ç«¯çš„åŸºç¡€ä¸Šæ„å»ºå¤šå…¥å£ï¼Œå®ç°ä¸€ä¸ªé¡¹ç›®ä¸¤ä¸ªç‰ˆæœ¬ï¼Œç”šè‡³å¤šä¸ª ä¸€ã€ç›®å½•ç»“æ„åˆ†æ é…ç½®å¤šå…¥å£å…¶å®å°±æ˜¯å°†pcç‰ˆå’Œæ‰‹æœºç‰ˆå…±ç”¨ä¸€ä¸ªcliï¼Œåœ¨srcç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªentriesç›®å½•ï¼Œé‡Œé¢åˆ†åˆ«åˆ›å»ºpcã€mobileç›®å½•å­˜æ”¾åˆ†åˆ«çš„å…¥å£æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥ï¼Œå°†index.htmlã€main.jsã€App.vueç§»åŠ¨åˆ°pcç›®å½•å¹¶æ”¹åï¼Œæ‰‹æœºç«¯å¤åˆ¶pcæ”¹å åŸç›®å½•ç»“æ„css1234567891011121314151617181920212223242526272829â”œâ”€â”€ README.md é¡¹ç›®ä»‹ç»â”œâ”€â”€ index.html å…¥å£é¡µé¢â”œâ”€â”€ build æ„å»ºè„šæœ¬ç›®å½•â”‚ â”œâ”€â”€ build-server.js è¿è¡Œæœ¬åœ°æ„å»ºæœåŠ¡å™¨ï¼Œå¯ä»¥è®¿é—®æ„å»ºåçš„é¡µé¢â”‚ â”œâ”€â”€ build.js ç”Ÿäº§ç¯å¢ƒæ„å»ºè„šæœ¬â”‚ â”œâ”€â”€ dev-client.js å¼€å‘æœåŠ¡å™¨çƒ­é‡è½½è„šæœ¬ï¼Œä¸»è¦ç”¨æ¥å®ç°å¼€å‘é˜¶æ®µçš„é¡µé¢è‡ªåŠ¨åˆ·æ–°â”‚ â”œâ”€â”€ dev-server.js è¿è¡Œæœ¬åœ°å¼€å‘æœåŠ¡å™¨â”‚ â”œâ”€â”€ utils.js æ„å»ºç›¸å…³å·¥å…·æ–¹æ³•â”‚ â”œâ”€â”€ webpack.base.conf.js wabpackåŸºç¡€é…ç½®â”‚ â”œâ”€â”€ webpack.dev.conf.js wabpackå¼€å‘ç¯å¢ƒé…ç½®â”‚ â””â”€â”€ webpack.prod.conf.js wabpackç”Ÿäº§ç¯å¢ƒé…ç½®â”œâ”€â”€ config é¡¹ç›®é…ç½®â”‚ â”œâ”€â”€ dev.env.js å¼€å‘ç¯å¢ƒå˜é‡â”‚ â”œâ”€â”€ index.js é¡¹ç›®é…ç½®æ–‡ä»¶â”‚ â”œâ”€â”€ prod.env.js ç”Ÿäº§ç¯å¢ƒå˜é‡â”‚ â””â”€â”€ test.env.js æµ‹è¯•ç¯å¢ƒå˜é‡â”œâ”€â”€ package.json npmåŒ…é…ç½®æ–‡ä»¶ï¼Œé‡Œé¢å®šä¹‰äº†é¡¹ç›®çš„npmè„šæœ¬ï¼Œä¾èµ–åŒ…ç­‰ä¿¡æ¯â”œâ”€â”€ src æºç ç›®å½• â”‚ â”œâ”€â”€ main.js å…¥å£jsæ–‡ä»¶â”‚ â”œâ”€â”€ app.vue æ ¹ç»„ä»¶â”‚ â”œâ”€â”€ components å…¬å…±ç»„ä»¶ç›®å½•â”‚ â”œâ”€â”€ assets èµ„æºç›®å½•ï¼Œè¿™é‡Œçš„èµ„æºä¼šè¢«wabpackæ„å»ºâ”‚ â”‚ â””â”€â”€ imagesâ”‚ â”‚ â””â”€â”€ logo.pngâ”‚ â”œâ”€â”€ routes å‰ç«¯è·¯ç”±â”‚ â”‚ â””â”€â”€ index.jsâ”œâ”€â”€ static çº¯é™æ€èµ„æºï¼Œä¸ä¼šè¢«wabpackæ„å»ºã€‚â””â”€â”€ test æµ‹è¯•æ–‡ä»¶ç›®å½•ï¼ˆunit&amp;e2eï¼‰ â””â”€â”€ unit å•å…ƒæµ‹è¯• é…ç½®å¤šå…¥å£ç›®å½•css12345678910111213â”œâ”€â”€ srcâ”‚ â”œâ”€â”€ entries æ–°çš„å…¥å£ç›®å½•â”‚ â”‚ â”‚â”€â”€ pc pcç‰ˆå…¥å£æ–‡ç›®å½•â”‚ â”‚ â”‚ â”œâ”€â”€pc.js pcç‰ˆå…¥å£js(ä»¥å‰çš„main.js)â”‚ â”‚ â”‚ â”œâ”€â”€pc.vue pcç‰ˆå…¥å£vue(ä»¥å‰çš„App.vue)â”‚ â”‚ â”‚ â””â”€â”€pc.html pcç‰ˆå…¥å£html(ä»¥å‰çš„index.html) â”‚ â”‚ â””â”€â”€ mobile æ‰‹æœºç‰ˆå…¥å£æ–‡ç›®å½•â”‚ â”‚ â”œâ”€â”€mobile.js æ‰‹æœºç‰ˆå…¥å£js(ä»¥å‰çš„main.js)â”‚ â”‚ â”œâ”€â”€mobile.vue æ‰‹æœºç‰ˆå…¥å£vue(ä»¥å‰çš„App.vue)â”‚ â”‚ â””â”€â”€mobile.html æ‰‹æœºç‰ˆå…¥å£vue(ä»¥å‰çš„App.vue)â”‚ â””â”€â”€â”€ router â”‚ â”œâ”€â”€mobile.js æ‰‹æœºç‰ˆè·¯ç”±â”‚ â””â”€â”€pc.js pcç‰ˆè·¯ç”± äºŒã€å…¥å£æ–‡ä»¶ä¿®æ”¹ä»¥pc.vueä¸ºä¾‹ï¼ŒmobileåŒç†pgsql123456789import Vue from 'vue'import Pc from './pc.vue'import router from '../.././router/pc.js'new Vue(&#123; el: '#app', router, components: &#123; Pc &#125;, template: '&lt;Pc/&gt;'&#125;) ä¸‰ã€ä¿®æ”¹utilsé…ç½®æ–‡ä»¶æ‰“å¼€/build/utils.jsåŠ å…¥å¦‚ä¸‹å†…å®¹javascript1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950var glob = require('glob')// é¡µé¢æ¨¡æ¿var HtmlWebpackPlugin = require('html-webpack-plugin')// å–å¾—ç›¸åº”çš„é¡µé¢è·¯å¾„ï¼Œå› ä¸ºä¹‹å‰çš„é…ç½®ï¼Œæ‰€ä»¥æ˜¯srcæ–‡ä»¶å¤¹ä¸‹çš„entriesæ–‡ä»¶å¤¹var PAGE_PATH = path.resolve(__dirname, '../src/entries') // ç”¨äºåšç›¸åº”çš„mergeå¤„ç†var merge = require('webpack-merge')//å¤šå…¥å£é…ç½®// é€šè¿‡globæ¨¡å—è¯»å–pageæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰å¯¹åº”æ–‡ä»¶å¤¹ä¸‹çš„jsåç¼€æ–‡ä»¶ï¼Œå¦‚æœè¯¥æ–‡ä»¶å­˜åœ¨// é‚£ä¹ˆå°±ä½œä¸ºå…¥å£å¤„ç†exports.entries = function() &#123; var entryFiles = glob.sync(PAGE_PATH + '/*/*.js') // å¯»æ‰¾å…¥å£jsï¼ˆåŸmain.jsï¼‰ var map = &#123;&#125; entryFiles.forEach((filePath) =&gt; &#123; var filename = filePath.substring(filePath.lastIndexOf('\\/') + 1, filePath.lastIndexOf('.')) map[filename] = filePath &#125;) return map&#125;//å¤šé¡µé¢è¾“å‡ºé…ç½®// ä¸ä¸Šé¢çš„å¤šé¡µé¢å…¥å£é…ç½®ç›¸åŒï¼Œè¯»å–pageæ–‡ä»¶å¤¹ä¸‹çš„å¯¹åº”çš„htmlåç¼€æ–‡ä»¶ï¼Œç„¶åæ”¾å…¥æ•°ç»„ä¸­exports.htmlPlugin = function() &#123; let entryHtml = glob.sync(PAGE_PATH + '/*/*.html') let arr = [] entryHtml.forEach((filePath) =&gt; &#123; let filename = filePath.substring(filePath.lastIndexOf('\\/') + 1, filePath.lastIndexOf('.')) let conf = &#123; // æ¨¡æ¿æ¥æº template: filePath, // æ–‡ä»¶åç§° filename: filename + '.html', // é¡µé¢æ¨¡æ¿éœ€è¦åŠ å¯¹åº”çš„jsè„šæœ¬ï¼Œå¦‚æœä¸åŠ è¿™è¡Œåˆ™æ¯ä¸ªé¡µé¢éƒ½ä¼šå¼•å…¥æ‰€æœ‰çš„jsè„šæœ¬ chunks: ['manifest', 'vendor', filename], inject: true &#125; if (process.env.NODE_ENV === 'production') &#123; conf = merge(conf, &#123; minify: &#123; removeComments: true, collapseWhitespace: true, removeAttributeQuotes: true &#125;, chunksSortMode: 'dependency' &#125;) &#125; arr.push(new HtmlWebpackPlugin(conf)) &#125;) return arr&#125; å››ã€ä¿®æ”¹webpack.dev.confæ‰“å¼€/build/webpack.dev.conf.jsåšå¦‚ä¸‹ä¿®æ”¹ï¼š æ‰¾åˆ° plugins:æ•°ç»„ï¼Œå°†å¦‚ä¸‹å†…å®¹æ³¨é‡Šæˆ–åˆ é™¤ css12345new HtmlWebpackPlugin(&#123; filename: 'index.html', template: 'index.html', inject: true&#125;), åœ¨pluginsæ•°ç»„ä¸Šæ‹¼æ¥ä¸Šåœ¨utils.jså†…è·å–åˆ°çš„å…¥å£å†…å®¹ä¿®æ”¹å®Œæˆä»¥åçš„pluginså¦‚ä¸‹ï¼š haxe123456789101112131415161718192021222324plugins: [ new webpack.DefinePlugin(&#123; 'process.env': require('../config/dev.env') &#125;), new webpack.HotModuleReplacementPlugin(), new webpack.NamedModulesPlugin(), // HMR shows correct file names in console on update. new webpack.NoEmitOnErrorsPlugin(), // https://github.com/ampedandwired/html-webpack-plugin // æ³¨é‡Šå¼€å§‹ // new HtmlWebpackPlugin(&#123; // filename: 'index.html', // template: 'index.html', // inject: true // &#125;), // æ³¨é‡Šç»“æŸ // copy custom static assets new CopyWebpackPlugin([ &#123; from: path.resolve(__dirname, '../static'), to: config.dev.assetsSubDirectory, ignore: ['.*'] &#125; ]) ].concat(utils.htmlPlugin()) // è¿™é‡Œæ˜¯æ·»åŠ çš„éƒ¨åˆ† ä¿®æ”¹webpack.prod.confæ‰“å¼€/build/webpack.prod.confåšå¦‚ä¸‹ä¿®æ”¹ï¼š æ‰¾åˆ° plugins:æ•°ç»„ï¼Œå°†å¦‚ä¸‹å†…å®¹æ³¨é‡Šæˆ–åˆ é™¤ yaml12345678910111213141516new HtmlWebpackPlugin(&#123; filename: process.env.NODE_ENV === 'testing' ? 'index.html' : config.build.index, template: 'index.html', inject: true, minify: &#123; removeComments: true, collapseWhitespace: true, removeAttributeQuotes: false // more options: // https://github.com/kangax/html-minifier#options-quick-reference &#125;, // necessary to consistently work with multiple chunks via CommonsChunkPlugin chunksSortMode: 'dependency'&#125;), åœ¨pluginsæ•°ç»„ä¸Šæ‹¼æ¥ä¸Šåœ¨utils.jså†…è·å–åˆ°çš„å…¥å£å†…å®¹ (æ“ä½œåŒä¸Šä¸€æ­¥) äº”ã€æ·»åŠ å®¢æˆ·ç«¯åˆ¤æ–­å®¢æˆ·ç«¯è®¿é—®é¡¹ç›®æ—¶ï¼Œé€šè¿‡jsåˆ¤æ–­å±•ç¤ºå“ªä¸ªç‰ˆæœ¬åœ¨pcç‰ˆæœ¬å…¥å£pc.htmlæ–‡ä»¶å†…æ·»åŠ å¦‚ä¸‹jssmalltalk123if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) &#123; window.location.href = '/mobile.html#/'&#125; åŒç†ï¼Œåœ¨mobile.htmlæ·»åŠ å¦‚ä¸‹jssmalltalk123if (!/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) &#123; window.location.href = '/pc.html#/'&#125; å…­ã€åç»­è¯´æ˜ä»¥ä¸Šæ­¥éª¤æ“ä½œå®Œæˆä»¥åä¾¿æˆåŠŸçš„æ·»åŠ äº†å¤šå…¥å£ï¼Œä½†æ˜¯æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š æœ¬åœ°è¿è¡Œè°ƒè¯•çš„æ—¶å€™ï¼Œä»¥å‰æˆ‘ä»¬æ˜¯localhost:8080å°±å¯ä»¥è®¿é—®äº†ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬éœ€è¦ localhost:8080/pc.htmlæˆ–è€…localhost:8080/mobile.html é¡¹ç›®é€šè¿‡webpackæ‰“åŒ…ä»¥åä¼šåœ¨æ ¹ç›®å½•ç”Ÿæˆmobile.htmlå’Œpc.html,åœ¨é¡¹ç›®éƒ¨ç½²çš„æ—¶å€™éœ€è¦é…ç½®é»˜é¦–é¡µï¼Œä¹Ÿå°±æ˜¯æŒ‡å®šæ˜¯mobile.htmlæˆ–è€…pc.html","categories":[{"name":"vue","slug":"vue","permalink":"/categories/vue/"}],"tags":[{"name":"vue","slug":"vue","permalink":"/tags/vue/"}],"keywords":[{"name":"vue","slug":"vue","permalink":"/categories/vue/"}]},{"title":"Hexo+Githubæ­å»ºä¸ªäººåšå®¢","slug":"Hexo+Githubæ­å»ºä¸ªäººåšå®¢","date":"2018-12-07T04:13:03.000Z","updated":"2020-02-15T12:54:59.856Z","comments":true,"path":"2018/12/07/Hexo+Githubæ­å»ºä¸ªäººåšå®¢/","link":"","permalink":"/2018/12/07/Hexo+Githubæ­å»ºä¸ªäººåšå®¢/","excerpt":"","text":"æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢é©¿ç«™ï¼Œæœ¬ç«™æ˜¯ä½¿ç”¨Hexo+GithubåŸºäºåŸºäºNode.jsçš„é™æ€åšå®¢æ¡†æ¶, å®˜æ–¹æ–‡æ¡£è¯·å‚è€ƒHexo å®‰è£…NodeåŠç¯å¢ƒé…ç½®Nodeå®˜ç½‘ä½ å¯ä»¥æ ¹æ®ä¸åŒå¹³å°ç³»ç»Ÿé€‰æ‹©ä½ éœ€è¦çš„Node.jså®‰è£…åŒ…ï¼Œå®‰è£…è¿‡ç¨‹å¾ˆç®€å•ï¼Œä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥å°±okæ³¨æ„ï¼šLinuxä¸Šå®‰è£…Node.jséœ€è¦å®‰è£…Pythonï¼Œå»ºè®®å®‰è£…Python 3.6ä»¥ä¸Šç‰ˆæœ¬ã€‚ å®‰è£…Hexoè„šæ‰‹æ¶åœ¨å®‰è£…äº†nodeä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨nodeçš„åŒ…ç®¡ç†å™¨npmå®‰è£…hexoäº†ï¼Œæ“ä½œå¦‚ä¸‹bash1npm install hexo-cli -g gitç›¸å…³é…ç½®æœ¬åœ°æ­å»ºå¥½åšå®¢é¡¹ç›®ä¹‹åéœ€è¦æäº¤åˆ°githubä¸Šå».é¦–å…ˆå»GitHubç”³è¯·ä¸ªäººè´¦å·ï¼Œä»¥ä¾¿åæœŸç”¨æ¥åšåšå®¢çš„è¿œç¨‹åˆ›åº“ã€åŸŸåã€æœåŠ¡å™¨ä¹‹ç±»çš„ï¼Œgithubè´¦å·ä¸å†å•°å—¦äº†,è·Ÿä¸€èˆ¬çš„æ³¨å†Œè´¦å·å·®ä¸å¤š å®‰è£…gitæ‰“å¼€gitå®˜ç½‘ä¸‹è½½gitï¼Œå®‰è£…è¿‡ç¨‹å…¨ç¨‹é»˜è®¤é…ç½®ï¼Œä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥å®‰è£… æœ¬åœ°åˆ›å»ºssh keyæ¡Œé¢å³é”®git bash hereï¼Œç„¶åï¼šexcel1ssh-keygen -t rsa -C \"é‚®ç®±åœ°å€\" ä¹‹åä¼šè¦æ±‚ç¡®è®¤è·¯å¾„å’Œè¾“å…¥å¯†ç ï¼Œè®°ä½è¿™ä¸ªè·¯å¾„ï¼Œæˆ‘ä»¬è¿™ä½¿ç”¨é»˜è®¤çš„ä¸€è·¯å›è½¦å°±è¡Œã€‚æˆåŠŸçš„è¯ä¼šåœ¨.sshæ–‡ä»¶å¤¹ç”Ÿæˆid_rsa.pubæ–‡ä»¶ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€ï¼Œå¤åˆ¶é‡Œé¢çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦çš„key githubæ·»åŠ ssh keyå›åˆ°githubé¡µé¢ä¸Šï¼Œç‚¹å‡»å¤´åƒå³ä¾§å€’ä¸‰è§’ï¼Œé€‰æ‹©Settingsï¼ˆè´¦æˆ·é…ç½®ï¼‰ï¼Œå·¦è¾¹é€‰æ‹©SSH Keysï¼Œç‚¹å‡»å³ä¸Šè§’Add SSH Key,titleéšä¾¿å¡«ï¼Œä¸‹æ–¹æ–‡æœ¬æ¡†ç²˜è´´ä¸Šä¸€æ­¥ä¸Šç”Ÿæˆçš„keyç¡®å®š ssh keyæœ¬åœ°éªŒè¯å›åˆ°åˆšæ‰ç”Ÿæˆkeyçš„å‘½ä»¤è¡Œï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤éªŒè¯githubç”¨æˆ·åå’Œé‚®ç®±bash12git config --global user.name \"ä½ çš„ç”¨æˆ·å\"git config --global user.email \"ä½ çš„é‚®ç®±\" æ³¨æ„ï¼šæ‰§è¡Œè¿™ä¸¤æ¡å‘½ä»¤æˆåŠŸåæ²¡æœ‰ä»»ä½•æç¤º é¡¹ç›®æ­å»ºæ¥ä¸‹æ¥åˆå§‹åŒ–Hexoé¡¹ç›®ï¼Œé¦–å…ˆåœ¨éœ€è¦ä¿å­˜é¡¹ç›®çš„ç›®å½•é¼ æ ‡å³é”®é€‰æ‹©â€git bash hereâ€,ç„¶åï¼š bash1hexo init blog blogä¸ºä½ åšå®¢çš„é¡¹ç›®åç§°ï¼Œæ¥ä¸‹æ¥åˆ‡æ¢åˆ°åšå®¢è·¯å¾„bash1cd blog å®‰è£…é¡¹ç›®ä¾èµ–åŒ…cmake1npm install è‡³æ­¤ï¼Œåšå®¢åˆå§‹åŒ–å®Œæˆï¼Œå¯ä»¥å¯åŠ¨hexoæœåŠ¡äº†ebnf1hexo s å‘½ä»¤è¡Œæç¤ºï¼šjava12INFO Start processingINFO Hexo is running at http://localhost:4000/. Press Ctrl+C to stop. æ¥ä¸‹æ¥å¯ä»¥åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ http://localhost:4000 è®¿é—®åšå®¢ ä¸»é¢˜æ›´æ¢ åœ¨ä¸»é¢˜ç½‘ç«™æŸ¥æ‰¾è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜ï¼Œæ‰¾åˆ°ä»¥åç‚¹å‡»è¿›å»é¢„è§ˆï¼Œåœ¨åšå®¢é¢„è§ˆé¡µé¢æ‰¾åˆ°åšä¸»çš„githubé“¾æ¥ è¿›å…¥åšä¸»githubé¦–é¡µï¼Œæ‰¾åˆ°ä¸»é¢˜å¯¹åº”çš„ä»“åº“ï¼Œç‚¹å‡»å³ä¾§ç»¿è‰²â€clone or downloadâ€æŒ‰é’®è·å–ä¸»é¢˜ä»“åº“åœ°å€ ä¸‹è½½é¦–å…ˆåœ¨å‘½ä»¤è¡Œä½¿ç”¨cdå‘½ä»¤åˆ‡æ¢åˆ°themesç›®å½•ï¼Œç„¶åcrmsh1git clone ä¸»é¢˜åœ°å€ ç­‰å¾…ä¸‹è½½å®Œæ¯•ä»¥åä¼šåœ¨themesæ–‡ä»¶å¤¹å†…ç”Ÿæˆä¸€ä¸ªä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œæ¥ä¸‹æ¥ä¿®æ”¹æ ¹ç›®å½•_config.ymlçš„themeé€‰é¡¹ä¸ºä½ åˆšæ‰ä¸‹è½½çš„ä¸»é¢˜åï¼Œæ¥ä¸‹æ¥æ¸…é™¤ä¸€ä¸‹ç¼“å­˜ebnf1hexo clean ç„¶åç¼–è¯‘ebnf1hexo g ç„¶åé‡å¯æœåŠ¡(åœ¨ä¹‹å‰å¯åŠ¨æœåŠ¡çš„å‘½ä»¤è¡Œä½¿ç”¨ctrl+cåœæ­¢æœåŠ¡)ï¼Œç„¶åebnf1hexo s æ¥ä¸‹æ¥åœ¨æµè§ˆå™¨é¢„è§ˆå°±å¯ä»¥çœ‹åˆ°æ–°ä¸»é¢˜çš„æ•ˆæœäº† æ‰˜ç®¡åˆ°gitHubåˆ›å»ºåšå®¢æ‰˜ç®¡ä»“åº“åˆ›å»ºä¸€ä¸ªä¸è‡ªå·±ç”¨æˆ·ååŒåçš„repositoryï¼Œåœ¨è‡ªå·±Githubé¡µé¢ï¼Œç‚¹å‡»å¤´åƒå·¦ä¾§+æŒ‰é’®ï¼Œé€‰æ‹©new repositoryï¼Œæ¯”å¦‚æˆ‘çš„Githubè´¦å·æ˜¯Givingcodeï¼Œé‚£ä¹ˆæˆ‘åº”è¯¥åˆ›å»ºçš„repositoryåå­—åº”è¯¥æ˜¯Givingcode.github.io æ·»åŠ deployé…ç½®é¦–å…ˆåœ¨æ ¹ç›®å½•_config.ymlæ–‡ä»¶å†…é…ç½®gitbash1234deploy: type: git repository: git@github.com:ç”¨æˆ·å/ç”¨æˆ·å.github.io.git branch: master repositoryï¼šå°±æ˜¯ä½ çš„gitHubåŒåä»“åº“çš„åœ°å€ ä»£ç æ‰˜ç®¡å®‰è£… hexo-deployer-gitä¾èµ–åŒ…sql1npm install hexo-deployer-git --save ç„¶åä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ bash1hexo d æ­¤æ—¶ï¼Œä½ å°±å¯ä»¥åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ â€œç”¨æˆ·å.github.ioâ€æ¥è®¿é—®ä½ çš„ä¸ªäººåšå®¢(ç”¨æˆ·åï¼šä½ gitHubçš„ç”¨æˆ·å) åŸŸåç»‘å®šåŸŸåè§£æåŸŸåç”³è¯·çš„é€”å¾„éå¸¸å¤šï¼Œå»ºè®®ä½¿ç”¨é˜¿é‡Œäº‘çš„ï¼Œæ–¹ä¾¿åæœŸå¤‡æ¡ˆï¼Œåœ¨é˜¿é‡Œäº‘è´­ä¹°äº†åŸŸåä¹‹åï¼Œåˆ°åŸŸåç®¡ç†ä¸­å¿ƒè¿›è¡ŒåŸŸåè§£æï¼Œæ·»åŠ ä»¥ä¸‹å‡ æ¡è®°å½•å€¼ï¼š è®°å½•ç±»å‹ ä¸»æœºè®°å½• è§£æçº¿è·¯(isp) è®°å½•å€¼ CNAME www é»˜è®¤ ç”¨æˆ·å.github.io A @ é»˜è®¤ 192.30.252.153 A @ é»˜è®¤ 192.30.252.154 åˆ›å»ºåŸŸåå…³è”æ–‡ä»¶åœ¨é¡¹ç›®æ ¹ç›®å½•sourceç›®å½•æ–°å»ºåä¸ºCNAMEçš„æ–‡ä»¶ï¼Œï¼ˆæ³¨æ„ï¼šè¯¥æ–‡ä»¶æ²¡æœ‰åç¼€åï¼‰ç„¶ååœ¨CNAMEæ–‡ä»¶é‡Œé¢å¡«å†™ä½ çš„åŸŸåï¼Œå¦‚ï¼šxxx.com æ³¨æ„ï¼šä¸å¸¦wwwä¹Ÿä¸å¸¦httpï¼Œåªéœ€è¦åŸŸåå°±å¥½ æ¥ä¸‹æ¥é‡æ–°ç¼–è¯‘æ¨é€ä¸€ä¸‹bash12hexo g # ç¼–è¯‘hexo d # æ¨é€ æç¤ºï¼šINFO Deploy done: git ä¹‹åå°±å¯ä»¥ä½¿ç”¨åŸŸåè®¿é—®ä½ çš„ä¸ªäººåšå®¢äº†","categories":[{"name":"Hexo","slug":"Hexo","permalink":"/categories/Hexo/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"/tags/Hexo/"}],"keywords":[{"name":"Hexo","slug":"Hexo","permalink":"/categories/Hexo/"}]},{"title":"Adobe PhotoShop CCæ¿€æ´»ç ´è§£","slug":"Adobe PhotoShop CCæ¿€æ´»ç ´è§£","date":"2018-10-29T05:13:03.000Z","updated":"2020-02-15T13:26:27.270Z","comments":true,"path":"2018/10/29/Adobe PhotoShop CCæ¿€æ´»ç ´è§£/","link":"","permalink":"/2018/10/29/Adobe PhotoShop CCæ¿€æ´»ç ´è§£/","excerpt":"","text":"å·¥å…·ä¸‹è½½åœ¨æˆ‘çš„ç™¾åº¦ç½‘ç›˜æå–ç ï¼šajifä¸‹è½½å‹ç¼©åŒ…,è§£å‹,å±•å¼€Adobe Photoshop CC 2017-18.0(64 bit)ï¼Œå¾—åˆ°å¦‚ä¸‹æ–‡ä»¶ï¼š å®‰è£…ps é¦–å…ˆæ–­å¼€è®¡ç®—æœºç½‘ç»œ(ç¦ç”¨ç”µè„‘ç½‘ç»œæˆ–è€…æ‹”ç½‘çº¿æˆ–è€…æ–­wifi) åŒå‡»Set-up.exe,å¾—åˆ°å¦‚ä¸‹ç•Œé¢ï¼Œç­‰å¾…è¿›åº¦æ¡è·‘å®Œï¼Œé¢„è®¡3åˆ†é’Ÿå·¦å³ å®‰è£…ç»“æŸåä¼šåœ¨å¼€å§‹èœå•ç”Ÿæˆå¦‚ä¸‹2ä¸ªå¿«æ·æ–¹å¼ ç‚¹å‡»è“è‰²psæŒ‰é’®è¿è¡Œï¼Œé€‰æ‹©ä»¥åç™»å½• é€‰æ‹©å¼€å§‹ä½¿ç”¨ æ¥å— æ¥ä¸‹æ¥ä¼šæ‰“å¼€psç•Œé¢ï¼Œç­‰å¾…10så·¦å³ç­‰å®ƒåŠ è½½å®Œæ‰€æœ‰ç»„ä»¶ï¼Œå…³é—­psè½¯ä»¶ ç ´è§£æ¿€æ´» åŒå‡»æ‰“å¼€æ¿€æ´»å·¥å…· åœ¨ä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©Adobe Photoshop cc2015.5 ç‚¹å‡»installé€‰æ‹©amtlib.dllæ–‡ä»¶é»˜è®¤åœ¨C:\\Program Files\\Adobe\\Adobe Photoshop CC 2017æ–‡ä»¶å¤¹ä¸‹ ç‚¹å‡»AdvacedæŒ‰é’®ï¼Œç„¶åå…³é—­5ã€æ¿€æ´»ç ´è§£å®Œæˆï¼Œé‡æ–°è¿æ¥ç”µè„‘ç½‘ç»œï¼Œå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨psäº†","categories":[{"name":"ç ´è§£","slug":"ç ´è§£","permalink":"/categories/ç ´è§£/"}],"tags":[{"name":"PhotoShop","slug":"PhotoShop","permalink":"/tags/PhotoShop/"},{"name":"æ¿€æ´»ç ´è§£","slug":"æ¿€æ´»ç ´è§£","permalink":"/tags/æ¿€æ´»ç ´è§£/"}],"keywords":[{"name":"ç ´è§£","slug":"ç ´è§£","permalink":"/categories/ç ´è§£/"}]},{"title":"vueå®ç°æ‹–æ‹½","slug":"vueå®ç°æ‹–æ‹½","date":"2018-10-21T09:21:43.000Z","updated":"2020-02-15T12:54:59.858Z","comments":true,"path":"2018/10/21/vueå®ç°æ‹–æ‹½/","link":"","permalink":"/2018/10/21/vueå®ç°æ‹–æ‹½/","excerpt":"","text":"html123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475&lt;template&gt; &lt;div class=\"sidebar\"&gt; &lt;div class=\"slideContent\" :style=\"&#123;left: left + 'px', top: top + 'px'&#125;\"&gt; &lt;div class=\"move\" @mousedown=\"move($event)\"&gt; &lt;i class=\"el-icon-rank\"/&gt; &lt;/div&gt; &lt;div class=\"content\"&gt;....&lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; export default &#123; name: \"index\", data() &#123; return &#123; left: window.innerWidth - 445, top: window.innerHeight - 640, &#125; &#125;, methods: &#123; move(e) &#123; const t = window.innerWidth - 375, a = window.innerHeight - 605 const i = document.getElementsByClassName(\"slideContent\")[0] const n = e.clientX - i.offsetLeft const s = e.clientY - i.offsetTop; return document.onmousemove = e =&gt; &#123; let r = e.clientX - n let o = e.clientY - s return r &lt;= 0 ? r = 0 : r &gt;= t &amp;&amp; (r = t), o &lt;= 20 ? o = 20 : o &gt;= a &amp;&amp; (o = a), i.style.left = r + \"px\", i.style.top = o + \"px\", !1 &#125;, document.onmouseup = () =&gt; &#123; document.onmousemove = null, document.onmouseup = null &#125;, document.onmouseleave = () =&gt; &#123; document.onmousemove = null, document.onmouseup = null &#125;, !1 &#125;, &#125; &#125;&lt;/script&gt;&lt;style lang=\"scss\" scoped&gt; .sidebar &#123; .slideContent &#123; position: fixed; background: rgb(239, 238, 244); width: 375px; height: 600px; right: 70px; top: 0px; z-index: 90; color: #fff; box-shadow: 0 5px 10px rgba(6, 6, 6, .3); .move &#123; cursor: move; user-select: none; position: relative; border-radius: 3px 3px 0 0; height: 20px; color: #333; background: linear-gradient(0deg, #bbb, #eee); width: 100%; line-height: 10px; display: block; padding: 5px 10px; i &#123; float: right; &#125; &#125; &#125; &#125;&lt;/style&gt;","categories":[{"name":"vue","slug":"vue","permalink":"/categories/vue/"}],"tags":[{"name":"vue","slug":"vue","permalink":"/tags/vue/"}],"keywords":[{"name":"vue","slug":"vue","permalink":"/categories/vue/"}]},{"title":"AWSåˆ›å»ºEC2","slug":"AWSæ­å»ºEC2","date":"2018-10-11T08:13:03.000Z","updated":"2020-04-15T05:57:44.847Z","comments":true,"path":"2018/10/11/AWSæ­å»ºEC2/","link":"","permalink":"/2018/10/11/AWSæ­å»ºEC2/","excerpt":"","text":"åˆ‡æ¢pemä¸ºè´¦å·ç™»é™† ä¸‹è½½xxx.pemæ–‡ä»¶åˆ°æœ¬åœ° å‘½ä»¤è¡Œcdåˆ°xxx.pemæ‰€åœ¨è·¯å¾„ï¼Œä½¿ç”¨pemç™»é™†bash123456789101112131415161718192021ssh -i \"xxx.pem\" ec2-user@ec2-18-224-140-75.us-east-2.compute.amazonaws.com# åˆ›å»ºrootå¯†ç sudo passwd root # è¾“å…¥ä¸¤æ¬¡å¯†ç ï¼ŒæœŸé—´æ²¡æœ‰ä»»ä½•æç¤º# åˆ‡æ¢åˆ°rootèº«ä»½su root# ç¼–è¾‘äºšé©¬é€Šä¸»æœºçš„sshç™»å½•æ–¹å¼ vi /etc/ssh/sshd_config # æŠŠ PasswordAuthentication no æ”¹ä¸º PasswordAuthentication yes # ps: å¦‚æœæ²¡æœ‰åˆ™æ–°æ’è¿›å» # é‡å¯sshdä½¿ä¿®æ”¹ç”Ÿæ•ˆservice sshd restart# ä¿®æ”¹rootç”¨æˆ·å(ä¿®æ”¹rootç™»å½•ç”¨æˆ·åå‡å°‘ä¸»æœºè¢«æš´åŠ›ç ´è§£çš„é£é™©)vi /etc/passwd# ä¿®æ”¹ç¬¬1è¡Œç¬¬1ä¸ªrootä¸ºæ–°çš„ç”¨æˆ·åï¼Œescç„¶å:wqä¿å­˜é€€å‡ºvi /etc/shadow# ä¿®æ”¹ç¬¬1è¡Œç¬¬1ä¸ªrootä¸ºæ–°çš„ç”¨æˆ·åï¼Œescç„¶å:wq! å¼ºåˆ¶ä¿å­˜é€€å‡º# é‡å¯æœåŠ¡å™¨reboot# ä½¿ç”¨git bashæˆ–è€…xshellä¹‹ç±»çš„sshå®¢æˆ·ç«¯é€šè¿‡ç”¨æˆ·åå¯†ç è¿œç¨‹è¿æ¥ssh ç”¨æˆ·å@ipåœ°å€ æ­å»ºftpæœåŠ¡å™¨psï¼šè¿™æ˜¯å•ç‹¬æ­å»ºftpæœåŠ¡å™¨ç”¨äºä¸Šä¼ ä¸‹è½½æ–‡ä»¶ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸å»ºè®®è¿™ä¹ˆæ“ä½œï¼Œå®¹æ˜“è¢«æ”»å‡»ï¼Œå¦‚æœå¸¸ç”¨sshå®¢æˆ·ç«¯ä¸ºxShellï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨xFtprouteros12345678910111213141516171819202122232425262728# ä½¿ç”¨ yum å®‰è£… vsftpdyum install -y vsftpd# å¯åŠ¨ VSFTPDservice vsftpd start# æŸ¥çœ‹ç«¯å£netstat -nltp | grep 21# é…ç½® FTP æƒé™# ç¼–è¾‘ /etc/vsftpd/vsftpd.confï¼Œæ‰¾åˆ°ä¸‹é¢ä¸¤å¤„é…ç½®å¹¶ä¿®æ”¹ï¼š# ç¦ç”¨åŒ¿åç”¨æˆ· 12 YES æ”¹ä¸ºNOanonymous_enable=NO# ç¦æ­¢åˆ‡æ¢æ ¹ç›®å½• 101 è¡Œ åˆ é™¤#chroot_local_user=YES# é‡æ–°å¯åŠ¨ FTP æœåŠ¡service vsftpd restart# åˆ›å»º FTP ç”¨æˆ·ï¼ˆuseradd ç”¨æˆ·åï¼‰useradd web# ä¸ºç”¨æˆ· ftpuser è®¾ç½®å¯†ç echo \"123456\" | passwd web --stdin# é™åˆ¶ç”¨æˆ· ftpuseråªèƒ½é€šè¿‡ FTP è®¿é—®æœåŠ¡å™¨ï¼Œè€Œä¸èƒ½ç›´æ¥ç™»å½•æœåŠ¡å™¨ï¼šusermod -s /sbin/nologin web# ä¸ºç”¨æˆ· ftpuseråˆ›å»ºä¸»ç›®å½•å¹¶çº¦å®šï¼š# /data/ftp ä¸ºä¸»ç›®å½•, è¯¥ç›®å½•ä¸å¯ä¸Šä¼ æ–‡ä»¶ # /data/ftp/pub æ–‡ä»¶åªèƒ½ä¸Šä¼ åˆ°è¯¥ç›®å½•ä¸‹mkdir -p /data/ftp/pub# è®¾ç½®è®¿é—®æƒé™chmod a-w /data/ftp &amp;&amp; chmod 777 -R /data/ftp/pub# è®¾ç½®ä¸ºç”¨æˆ·çš„ä¸»ç›®å½•ï¼šusermod -d /data/ftp web æ³¨æ„ï¼šè®°å¾—å…³é—­é˜²ç«å¢™æˆ–è€…å¼€æ”¾FTPé»˜è®¤ç«¯å£(21) å…³é—­SELinuxæœåŠ¡ angelscript1setenforce 0 å…³é—­é˜²ç«å¢™ ebnf1iptables -F å®‰è£…nodebash123456789101112131415161718192021# ä¸‹è½½nodeå‹ç¼©åŒ…wget https://npm.taobao.org/mirrors/node/v10.6.0/node-v10.6.0-linux-x64.tar.xz# è§£å‹tar -xvf node-v10.6.0-linux-x64.tar.xz# æ›´æ”¹nodeå®‰è£…ç›®å½•mv node-v10.6.0-linux-x64 /root/node# é…ç½®å…¨å±€ç¯å¢ƒå˜é‡ ln -s /root/node/bin/node /usr/sbin/nodeln -s /root/node/bin/npm /usr/sbin/npm# å®‰è£…å®ˆæŠ¤ç¨‹åºforevernpm install forever -g# æŸ¥æ‰¾foreverçš„å®‰è£…è·¯å¾„find / -name forerver# æˆ‘è¿™é‡ŒæŸ¥åˆ°æ˜¯åœ¨ï¼š/node/bin/ï¼Œæ·»åŠ foreveråˆ°PATHvi /etc/profile# åœ¨ç»“å°¾çš„åœ°æ–¹æ·»åŠ è®°å½•export PATH=$PATH:/node/bin# é‡å»ºç¼“å­˜source /etc/profile# foreverå¯ç”¨nodeæœåŠ¡forever start xxx.js å®‰è£…ngnixbash123456789101112131415161718192021222324# å®‰è£…wgetyum install -y weget# å®‰è£…ç¼–è¯‘å·¥å…·å’Œç›¸å…³çš„åº“æ–‡ä»¶ yum -y install make zlib zlib-devel gcc-c++ libtool openssl openssl-devel# ä¸‹è½½PCREï¼ˆè®©Nginxæ”¯æŒRULåœ°å€çš„é‡å®šå‘åŠŸèƒ½ï¼‰wget https://sourceforge.net/projects/pcre/files/pcre/8.41/pcre-8.41.tar.gz# è§£å‹tar -xvzf pcre-8.41.tar.gz# è¿›å…¥å®‰è£…åŒ…ç›®å½•cd pcre-8.41# ç¼–è¯‘å®‰è£…./configuremake &amp;&amp; make install# ä¸‹è½½å®‰è£… Nginxwget http://nginx.org/download/nginx-1.14.0.tar.gz# è§£å‹tar -xvzf nginx-1.14.0.tar.gz# è¿›å…¥å®‰è£…åŒ…ç›®å½•ï¼šcd nginx-1.14.0# ç¼–è¯‘å®‰è£…ï¼š./configure --prefix=/usr/local/share/applications/nginx-1.14.0/ --with-http_ssl_modulemake &amp;&amp; make install# å¯åŠ¨Ngnix/usr/local/share/applications/nginx-1.14.0/sbin/nginx æ¥ä¸‹æ¥é…ç½®é¡¹ç›®è·¯å¾„å’ŒåŸŸå Code12345678910111213141516171819202122server &#123; listen 80; server_name aaa.com; location / &#123; root é¡¹ç›®è·¯å¾„1; index index.html index.htm; # ç«¯å£ä»£ç† proxy_pass http://127.0.0.1:3000; &#125;&#125;server &#123; listen 80; server_name bbb.com; location / &#123; root é¡¹ç›®è·¯å¾„2; index index.html index.htm; # ç«¯å£ä»£ç† proxy_pass http://127.0.0.1:4000; &#125;&#125; é…ç½®å®Œæ¯•ä»¥åreloadä¸€ä¸‹confbash1/usr/local/share/applications/nginx-1.14.0/sbin/nginx -s reload Ngnixå¸¸è§„æ“ä½œdts1234567891011# å¯åŠ¨nginx/usr/local/share/applications/nginx-1.14.0/sbin/nginx # é‡æ–°è½½å…¥é…ç½®æ–‡ä»¶/usr/local/share/applications/nginx-1.14.0/sbin/nginx -s reload # é‡å¯ Nginx/usr/local/share/applications/nginx-1.14.0/sbin/nginx -s reopen # åœæ­¢ Nginx/usr/local/share/applications/nginx-1.14.0/sbin/nginx -s stop Ngnixå¸¸è§„é€‰é¡¹ é…ç½®æ–‡ä»¶è·¯å¾„/usr/local/share/applications/nginx-1.14.0/confé»˜è®¤é¡¹ç›®ç›®å½•/nginx-1.14.0/html å®‰è£…mysqlbash12345678910111213141516171819202122232425262728293031# æŸ¥çœ‹æ˜¯å¦æœ‰è‡ªå¸¦çš„MySqlåº“ï¼Œå¦‚æœå…ˆæœ‰å¸è½½rpm -qa | grep mysql# åˆ é™¤mysql-lib(ç³»ç»Ÿè‡ªå¸¦çš„ç‰ˆæœ¬è¿‡ä½)yum remove mysql-libs# ä¸‹è½½mysqlwget https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.12-1.el6.x86_64.rpm-bundle.tar # è§£å‹tar -xvf mysql-5.7.12-1.el6.x86_64.rpm-bundle.tar # ä¾æ¬¡å®‰è£…mysqlåŒ…ï¼ˆcommonã€libsã€clientã€serverï¼‰rpm -ivh mysql-community-common-5.7.12-1.el6.x86_64.rpmrpm -ivh mysql-community-libs-5.7.12-1.el6.x86_64.rpmrpm -ivh mysql-community-client-5.7.12-1.el6.x86_64.rpm rpm -ivh mysql-community-server-5.7.12-1.el6.x86_64.rpm # å¯åŠ¨mysqlæœåŠ¡service mysqld start# æŸ¥çœ‹é»˜è®¤å¯†ç grep 'password' /var/log/mysqld.log# [Note] A temporary password is generated for root@localhost: x2sX3Gb6+Dtm# root@localhost: è¿™é‡Œåé¢å°±æ˜¯é»˜è®¤å¯†ç # ç™»é™†mysql -uroot -p# ä¿®æ”¹é»˜è®¤å¯†ç SET PASSWORD = PASSWORD('Abcd1234.');# psï¼šè¿™é‡Œéœ€è¦å¤§å°å†™æ•°ç»„å­—ç¬¦ç›¸ç»“åˆï¼Œä¸ç„¶ä¼šé€šä¸è¿‡# åˆ·æ–°ç³»ç»Ÿæƒé™flush privileges;# å¼€å¯è¿œç¨‹ç™»å½•æƒé™GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'Abcd1234.' WITH GRANT OPTION;# åˆ·æ–°ç³»ç»Ÿæƒé™flush privileges;# æ¥ä¸‹æ¥å°±å¯ä»¥è¿œç¨‹ç™»é™†äº† å®‰è£…é˜¿å¸•å¥‡bash1234# å®‰è£…é˜¿å¸•å¥‡yum install httpd -y# å¼€å¯æœåŠ¡systemctl start httpd æ·»åŠ é˜¿å¸•å¥‡å·¥ä½œç©ºé—´ä¿®æ”¹/etc/httpd/conf/httpd.confé…ç½®æ–‡ä»¶æŒ‡å®šé˜¿å¸•å¥‡workspaceä¸º/var/www/htmlä¿®æ”¹å‰apache1234&lt;Directory&gt; AllowOverride none Require all denied&lt;/Directory&gt; ä¿®æ”¹ålasso1234&lt;Directory \"/var/www/html\"&gt; AllowOverride none Require all denied&lt;/Directory&gt; å¯åŠ¨æœåŠ¡ crmsh1systemctl start httpd åŸŸåç»‘å®šåœ¨/etc/httpd/confç›®å½•ä¸‹åˆ›å»ºdefault.confæ·»åŠ å¦‚ä¸‹å†…å®¹ apache1234&lt;VirtualHost *:80&gt; DocumentRoot \"/var/www/html\" ServerName www.lidg.vip&lt;VirtualHost&gt; DocumentRoot:å·¥ä½œç©ºé—´ServerNameï¼šåŸŸå æ­å»ºvpn å®‰è£…wget bash1yum -y install wget å®‰è£…setuptools vim123456789wget --no-check-certificate https://pypi.python.org/packages/source/s/setuptools/setuptools-19.6.tar.gz#md5=c607dd118eae682c44ed146367a17e26 tar -zxvf setuptools-19.6.tar.gz cd setuptools-19.6 python setup.py build python setup.py install ä¸‹è½½pipå®‰è£…åŒ…ï¼Œè§£å‹åˆ°æŸä¸ªä½ç½®ï¼Œæˆ‘è¿™é‡Œä¸‹è½½çš„æ˜¯18.1ç‰ˆæœ¬ï¼Œç„¶åå°±å¯ä»¥å®‰è£…äº† bash123456789wget --no-check-certificate https://pypi.python.org/packages/source/p/pip/pip-8.0.2.tar.gz#md5=3a73c4188f8dbad6a1e6f6d44d117eeb tar -zxvf pip-8.0.2.tar.gz cd pip-8.0.2 python setup.py build python setup.py install å®‰è£…shadowsocks cmake1pip install shadowsocks æ·»åŠ shadowsocksé…ç½®æ–‡ä»¶ jboss-cli123mkdir /etc/shadowsocks/cd /etc/shadowsocks/vi config.json ç²˜è´´å¦‚ä¸‹å†…å®¹ï¼šjson123456789&#123; \"server\":\"0.0.0.0\", \"server_port\":8388, \"local_port\":1080, \"password\":\"æŠŠè¿™æ®µæ±‰å­—æ›¿æ¢ä¸ºä½ çš„vpnè¿æ¥å¯†ç \", \"timeout\":600, \"method\":\"aes-256-cfb\", \"fast_open\":false&#125; å¯åŠ¨æœåŠ¡pgsql1ssserver -c /etc/shadowsocks/config.json -d start","categories":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"/tags/Linux/"},{"name":"EC2","slug":"EC2","permalink":"/tags/EC2/"},{"name":"vpn","slug":"vpn","permalink":"/tags/vpn/"},{"name":"Nginx","slug":"Nginx","permalink":"/tags/Nginx/"}],"keywords":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}]},{"title":"RedHatå¸¸è§„æ“ä½œ","slug":"RedHatå¸¸è§„æ“ä½œ","date":"2018-09-29T08:13:03.000Z","updated":"2020-02-15T11:58:37.598Z","comments":true,"path":"2018/09/29/RedHatå¸¸è§„æ“ä½œ/","link":"","permalink":"/2018/09/29/RedHatå¸¸è§„æ“ä½œ/","excerpt":"","text":"RedHatè®¾ç½®ç½‘ç»œå¼€æœºè‡ªåŠ¨è¿æ¥ åˆ‡æ¢åˆ°rootè´¦æˆ· å®‰è£…ç½‘ç»œå·¥å…· cmake1yum install -y net-tools\\* ä½¿ç”¨vimä¿®æ”¹ /etc/sysconfig/network-scripts/ifcfg-enpxxxxxxæ–‡ä»¶ifcfg-enpxxxxxxæ–‡ä»¶ä¸ºä½ çš„ç½‘å¡åé…ç½®æ–‡ä»¶å°†æ–‡ä»¶æœ€åä¸€è¡Œçš„ONBOOT= noæ”¹ä¸ºyesï¼Œä¿å­˜å³å¯ã€‚ä¸ªåˆ«æƒ…å†µä¸‹ï¼Œä¸ºäº†åæœŸè¿œç¨‹è¿æ¥æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥åšå¦‚ä¸‹æ›´æ”¹ä¿®æ”¹ä¸Šè¾¹æ–‡ä»¶ ï¼šBOOTPROTO=staticåŒæ—¶æ–‡ä»¶çš„æœ€åæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼šIPADDR=176.202.123.234 #é™æ€IPGATEWAY=176.202.123.1 #é»˜è®¤ç½‘å…³NETMASK=255.255.255.0 #å­ç½‘æ©ç DNS1=176.202.0.227 #DNS é…ç½® psï¼šä»¥ä¸Šå‚æ•°æ ¹æ®è‡ªå·±ç½‘æ®µè®¾ç½®å³å¯ è®¾ç½®å®Œæ¯•ä»¥åï¼Œé‡å¯ç½‘å¡routeros1service network restart","categories":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"/tags/Linux/"}],"keywords":[{"name":"Linux","slug":"Linux","permalink":"/categories/Linux/"}]},{"title":"vueç§»åŠ¨ç«¯å±å¹•é€‚é…è§£å†³æ–¹æ¡ˆnew","slug":"vueç§»åŠ¨ç«¯å±å¹•é€‚é…è§£å†³æ–¹æ¡ˆnew","date":"2018-09-08T06:57:41.000Z","updated":"2020-02-15T12:54:59.857Z","comments":true,"path":"2018/09/08/vueç§»åŠ¨ç«¯å±å¹•é€‚é…è§£å†³æ–¹æ¡ˆnew/","link":"","permalink":"/2018/09/08/vueç§»åŠ¨ç«¯å±å¹•é€‚é…è§£å†³æ–¹æ¡ˆnew/","excerpt":"","text":"é¡¹ç›®åŸåœ°å€å‚è€ƒè¿™é‡Œ æ’ä»¶å®‰è£…bash12345# å®‰è£…é€‚é…æ’ä»¶lib-flexiblenpm i lib-flexible -S# å®‰è£…pxè½¬remæ’ä»¶npm i px2rem-loader -S æ–‡ä»¶å¼•å…¥åœ¨vueçš„å…¥å£æ–‡ä»¶main.jså†…å¼•å…¥lib-flexiblebash1import 'lib-flexible/flexible.js' æ·»åŠ metaæ ‡ç­¾åœ¨å…¥å£index.htmlå†…æ·»åŠ è§†å£ä¿®é¥°metahtml1&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; é…ç½®utilsåœ¨build/utils.jsæ–‡ä»¶å†…ï¼šåœ¨cssLoadersé‡Œé¢æ·»åŠ px2remLoaderæ–¹æ³•ç”¨äºå°†pxè½¬æ¢ä¸ºremjavascript123456const px2remLoader = &#123; loader: 'px2rem-loader', options: &#123; 'remUnit':75,'baseDpr':2 // è®¾è®¡ç¨¿widthä¸º750ï¼Œå› æ­¤è¿™é‡Œæ˜¯75 &#125; &#125; æ¥ä¸‹æ¥å°†px2remLoaderæ–¹æ³•æ·»åŠ åˆ°generateLoadersçš„loadersæ•°ç»„å†…javascript1const loaders = [cssLoader, px2remLoader] ä½¿ç”¨æ–¹æ³•ä»¥ä¸Šå‡ ä¸ªæ­¥éª¤é…ç½®å®Œæ¯•ä»¥åï¼Œé‡å¯æœåŠ¡ï¼Œç„¶åç»„ä»¶ä¸­å†™å°ºå¯¸å•ä½å°±å¯ä»¥ç›´æ¥å†™pxï¼Œå…·ä½“å€¼ç›´æ¥æŒ‰ç…§è®¾è®¡ç¨¿æ¥åšå°±ok","categories":[{"name":"vue","slug":"vue","permalink":"/categories/vue/"}],"tags":[{"name":"vue","slug":"vue","permalink":"/tags/vue/"},{"name":"ç§»åŠ¨ç«¯","slug":"ç§»åŠ¨ç«¯","permalink":"/tags/ç§»åŠ¨ç«¯/"}],"keywords":[{"name":"vue","slug":"vue","permalink":"/categories/vue/"}]},{"title":"vueç§»åŠ¨ç«¯å±å¹•é€‚é…","slug":"vueç§»åŠ¨ç«¯å±å¹•é€‚é…","date":"2018-08-30T03:21:55.000Z","updated":"2020-02-15T12:54:59.855Z","comments":true,"path":"2018/08/30/vueç§»åŠ¨ç«¯å±å¹•é€‚é…/","link":"","permalink":"/2018/08/30/vueç§»åŠ¨ç«¯å±å¹•é€‚é…/","excerpt":"","text":"vueç§»åŠ¨ç«¯å±å¹•é€‚é…,æŸ¥çœ‹é¡¹ç›®åœ°å€ æ•ˆæœé¢„è§ˆbash1234567891011# é¡¹ç›®clonegit clone git@github.com:NicolasGui/flexible.git# è¿›å…¥é¡¹ç›®ç›®å½•cd flexible# å®‰è£…ä¾èµ–npm install# å¯åŠ¨æœåŠ¡ localhost:8080npm run dev åŸç†æ¦‚è¿°æ’ä»¶å®‰è£…bash12345# æ’ä»¶ä¸€ï¼šamfe-flexiblenpm install amfe-flexible --save# æ’ä»¶äºŒï¼š node-sassnpm install amfe-flexible --save # åŒæ—¶ï¼Œåœ¨main.jsæ–‡ä»¶å†…å¼•å…¥npm install sass-loader --save ç¼–å†™jså¤„ç†æ–¹æ³•åœ¨utilsç›®å½•ä¸‹åˆ›å»ºflex.jsæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼šjavascript123456789101112import Vue from 'vue'Vue.prototype.$setTitle = function (text) &#123; document.title = text&#125;Vue.prototype.$getPX = function (design, designWidth = 750) &#123; // 750ä¸ºè®¾è®¡ç¨¿å®½åº¦ // è·å–çª—å£å°ºå¯¸ let width = document.documentElement.getBoundingClientRect().width // è®¡ç®—ç¼©æ”¾æ¯”ä¾‹ let scale = width / designWidth // è·å–å®æ—¶å°ºå¯¸ return design * scale&#125; åŒæ—¶ï¼Œåœ¨main.jsæ–‡ä»¶å†…å¼•å…¥è¯¥jsæ–‡ä»¶javascript12345678910111213import Vue from 'vue'import App from './App'import router from './router'import 'amfe-flexible'import './utils/flex'Vue.config.productionTip = falsenew Vue(&#123; el: '#app', router, components: &#123; App &#125;, template: '&lt;App/&gt;'&#125;) ç¼–å†™csså¤„ç†æ–¹æ³•åœ¨srcç›®å½•åˆ›å»ºstylesç›®å½•ï¼ŒåŒæ—¶åœ¨è¯¥ç›®å½•æ–°å¢common.scssæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼šscss123456789101112131415161718192021222324252627282930313233343536body,div,ul,ol,dl,li,dt,dd,h1,h2,h3,h4,p,form,iframe,input,textarea,a,span,em,strong,img,html,nav,header,article,button,footer,var &#123; padding:0; margin:0;&#125;body &#123; font:12px/1.2rem \"Microsoft YaHei\",tahoma,arial,sans-serif;min-width:320px;position:relative; &#125;form,input &#123;background:none;border:none;&#125;ul,dl,ol &#123;list-style-type:none;&#125;h1, h2, h3, h4, h5 &#123; font:12px/1.2rem \"Microsoft YaHei\",arial,tahoma; &#125;a &#123; text-decoration:none; &#125;a:hover,a:focus &#123; outline:none; &#125;table &#123; border-collapse:collapse;border-spacing:0; &#125;img &#123; border:none; &#125;strong,b &#123; font-weight:normal; &#125;em,i,var &#123; font-style:normal; &#125;p &#123; text-indent:0; &#125;.clear &#123; clear:both;height:0;line-height:0;overflow:hidden;width:0; &#125;.clearfix:after &#123; clear:both;content:\".\";display:block;font-size:0;height:0;visibility:hidden; &#125; // å°ºå¯¸è½¬æ¢ @function px2rem($px, $base-font-size: 75px) &#123; /*è®¾è®¡ç¨¿å®½åº¦ä¸º750ï¼Œå› æ­¤æ­¤å¤„ä¸º75*/ @if (unitless($px)) &#123; @return px2rem($px + 0px); &#125; @else if (unit($px) == rem) &#123; @return $px; &#125; @return ($px / $base-font-size) * 1rem; &#125; // å­—ä½“è½¬æ¢ @mixin font-dpr($font-size) &#123; font-size: $font-size; [data-dpr=\"2\"] &amp; &#123; font-size: $font-size * 2; &#125; [data-dpr=\"3\"] &amp; &#123; font-size: $font-size * 3; &#125; &#125; csså†…ä½¿ç”¨scss123456&lt;style scoped lang='scss'&gt; @import '../styles/common.scss'; .content&#123; width:px2rem(750); /*750ä¸ºè®¾è®¡ç¨¿å®é™…å°ºå¯¸*/ font-size:px2rem(20) /*20ä¸ºè®¾è®¡ç¨¿å®é™…å°ºå¯¸*/&lt;/style&gt; jså†…ä½¿ç”¨javascript12345678910111213141516171819export default &#123; name:'test', data() &#123; return &#123; w:0; &#125; &#125;, watch:&#123; getWidth() &#123; this.w=this.$getPX(500); &#125; &#125; &#125;, computed: &#123; fun() &#123; return (this.w/this.$getPX(500)*100).toFixed(2) + ''; &#125; &#125; &#125;","categories":[{"name":"vue","slug":"vue","permalink":"/categories/vue/"}],"tags":[{"name":"vue","slug":"vue","permalink":"/tags/vue/"},{"name":"ç§»åŠ¨ç«¯","slug":"ç§»åŠ¨ç«¯","permalink":"/tags/ç§»åŠ¨ç«¯/"}],"keywords":[{"name":"vue","slug":"vue","permalink":"/categories/vue/"}]},{"title":"MACå‡çº§Python3.x","slug":"MACå‡çº§Python3.x","date":"2018-02-05T07:02:29.000Z","updated":"2020-02-15T11:58:37.597Z","comments":true,"path":"2018/02/05/MACå‡çº§Python3.x/","link":"","permalink":"/2018/02/05/MACå‡çº§Python3.x/","excerpt":"","text":"ç®€ä»‹macè‡ªå¸¦Pythonä¸º2.7ï¼Œå¦‚ä½•å‡çº§è‡ªå¸¦ç‰ˆæœ¬ï¼Œå…¶å®è¿™ä¸ªé—®é¢˜ç½‘ä¸Šäº‰è®®æ¯”è¾ƒå¤§ï¼Œæœ‰å¤§ç¥åˆ é™¤è‡ªå¸¦pythoné‡æ–°å®‰è£…çš„ï¼Œä½†æ˜¯ä¸ªäººå»ºè®®ä¿ç•™è‡ªå¸¦Pythonï¼Œé€šè¿‡brewå®‰è£…ï¼Œå¼€å‘æµ‹è¯•ä¸¤ä¸è¯¯ï¼Œæ“ä½œå¦‚ä¸‹ï¼š æŸ¥çœ‹Pythonç‰ˆæœ¬é¦–å…ˆpython -Vå¾—åˆ°å½“å‰ç³»ç»Ÿç‰ˆæœ¬æ˜¯2.7.10ï¼Œç„¶åé€šè¿‡brewå®‰è£…ï¼Œä¸çŸ¥é“brewçš„è‡ªè¡Œåº¦å¨˜ brewå‘½ä»¤bash1brew install python3 ä¹‹åçš„è¯å‘¢å¯èƒ½æŠ¥é”™subunit1234Error: An unexpected error occurred during the `brew link` stepThe formula built, but is not symlinked into /usr/localPermission denied - /usr/local/FrameworksError: Permission denied - /usr/local/Frameworks è§£å†³åŠæ³•æŸ¥çœ‹äº†æ—¥å¿—å‘ç°/usr/local/ä¸‹æ²¡æœ‰è·¯å¾„/usr/local/Frameworks ï¼Œæ‰€ä»¥å…ˆåˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œæ‰§è¡Œmaxima1sudo mkdir /usr/local/Frameworks ç„¶åä¿®æ”¹ä¸€ä¸‹æƒé™elixir1sudo chown $(whoami):admin /usr/local/Frameworks æ¥ä¸‹æ¥å†linkä¸€ä¸‹armasm1brew link python3 æç¤ºangelscript1Linking /usr/local/Cellar/python3/3.6.3... 1 symlinks created ä»£è¡¨æˆåŠŸäº†ï¼Œæ­¤æ—¶æˆ‘ä»¬python -Vå‘ç°ç»“æœè¿˜æ˜¯2.7.10,å•¥åŸå› å‘¢ï¼Ÿç³»ç»Ÿé»˜è®¤é€‰æ‹©äº†è‡ªå¸¦çš„pythonï¼Œè§£å†³å¾ˆç®€å•ï¼ŒæŠŠå¸¸è§„pythonå‘½ä»¤æ¢æˆpython3ï¼Œæ¯”å¦‚ï¼špython3 -V","categories":[{"name":"mac","slug":"mac","permalink":"/categories/mac/"}],"tags":[{"name":"mac","slug":"mac","permalink":"/tags/mac/"},{"name":"Python","slug":"Python","permalink":"/tags/Python/"}],"keywords":[{"name":"mac","slug":"mac","permalink":"/categories/mac/"}]},{"title":"ä½¿ç”¨macè‡ªå¸¦é˜¿å¸•å¥‡","slug":"ä½¿ç”¨macè‡ªå¸¦é˜¿å¸•å¥‡","date":"2017-02-24T07:02:29.000Z","updated":"2020-02-15T12:54:59.861Z","comments":true,"path":"2017/02/24/ä½¿ç”¨macè‡ªå¸¦é˜¿å¸•å¥‡/","link":"","permalink":"/2017/02/24/ä½¿ç”¨macè‡ªå¸¦é˜¿å¸•å¥‡/","excerpt":"","text":"ç®€ä»‹Apacheå¯¹äºå‰ç«¯ç¨‹åºå‘˜æ¥è¯´æ˜¯å¿…ä¸å¯å°‘çš„ä¸€æ¬¾webæœåŠ¡å™¨ï¼ŒMacç³»ç»Ÿè‡ªèº«å¸¦äº†apacheï¼Œå¯ä»¥ç›´æ¥ç”¨æ¥æ­å»ºæœ¬åœ°webæœåŠ¡å™¨ï¼Œé…ç½®è¿‡ç¨‹ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œæœ¬æ–‡å°†åšç®€è¦æè¿°ï¼Œå¼€å§‹å§ å¯åŠ¨Apachemacæ˜¯é»˜è®¤è‡ªåŠ¨å¯åŠ¨Apacheçš„ï¼Œåˆ¤æ–­macæ˜¯å¦å¯åŠ¨äº†Apacheå¾ˆç®€å•ï¼Œæµè§ˆå™¨åœ°å€æ è¾“å…¥http://127.0.0.1 å›è½¦å³å¯ï¼Œå¦‚æœé¡µé¢æ˜¾ç¤ºIt worksï¼è¯æ˜okï¼Œä»‹ç»å‡ ä¸ªå¸¸ç”¨å‘½ä»¤ï¼š bash12345sudo apachectl start //å¼€å¯apachesudo apachectl restart //é‡å¯apachesudo apachectl stop //å…³é—­apache: phpç‰ˆæœ¬æ£€æŸ¥åœ¨æ–°çš„Mac High Sierraä¸­å¯¹phpç‰ˆæœ¬è¿›è¡Œäº†å‡çº§ï¼Œæ‰€ä»¥å…ˆç¡®å®šä½ macçš„phpç‰ˆæœ¬ebnf1php -v å¦‚æœæç¤ºPHP 7.1.7 (cli) (built: Jul 15 2017 18:08:09) ( NTS )ï¼Œåˆ™ä»£è¡¨phpæ˜¯7.xç‰ˆæœ¬çš„ åŸºæœ¬é…ç½®psï¼šåœ¨è¿›è¡Œä¸€ä¸‹æ“ä½œæ—¶å€™ï¼Œå…ˆåœ¨ç»ˆç«¯æ‰§è¡Œsudo apachectl stopåœæ­¢apacheæœåŠ¡ æ›´æ”¹work spaceApacheåœ¨Windowsä¸‹é»˜è®¤work spaceä¸ºhtdocsï¼Œåœ¨macä¸‹æœ‰æ‰€åŒºåˆ«ï¼Œè·¯å¾„ä¸ºï¼š/Library/WebServer/Documentså› æ­¤æˆ‘ä»¬éœ€è¦æŠŠå‰ç«¯ä»£ç æ‹·è´åˆ°è¯¥ç›®å½•è¿›è¡Œæµ‹è¯•ï¼Œä½†æ˜¯è¯¥ç›®å½•è—è¿™ä¹ˆæ·±åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­æ˜¾ç„¶æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œå› æ­¤æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ä¿®æ”¹é˜¿å¸•å¥‡ä¸»é…ç½®æ–‡ä»¶httpd.confæ¥æŒ‡å®šwork spaceï¼Œæ­¥éª¤å¦‚ä¸‹ï¼šmacé…ç½®æ–‡ä»¶ç›®å½•ä¸ºï¼š/etc ï¼Œé»˜è®¤æ˜¯éšè—çš„ï¼Œå› æ­¤å’±ä»¬åœ¨ç»ˆç«¯é‡Œé¢æ‰§è¡Œï¼šopen /etc/apache2/ å°±å¯ä»¥æ‰“å¼€Apacheä¸»ç›®å½•ï¼Œæ‰¾åˆ°httpd.confæ–‡ä»¶ï¼Œä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œ å¦‚æœä¸æƒ³é‚£ä¹ˆéº»çƒ¦çš„è¯å¯ä»¥ä½¿ç”¨viç¼–è¾‘ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š bash1sudo vi /etc/apache2/httpd.conf æ¥ä¸‹æ¥æŒ‰ä¸€ä¸‹é”®ç›˜ä¸Šçš„ié”®ï¼Œåº•éƒ¨æç¤ºinsertâ€¦â€¦ä¾¿å¯ä»¥ç§»åŠ¨å…‰æ ‡è¿›è¡Œç¼–è¾‘äº†ç¼–è¾‘ä»¥ä¸‹å†…å®¹ï¼ŒåŸæœ¬ä¸ºï¼šbash12DocumentRoot \"/Library/WebServer/Documents\"&lt;Directory \"/Library/WebServer/Documents\"&gt; ä¿®æ”¹ä¸ºè‡ªå®šä¹‰ç›®å½•ï¼Œæ¯”å¦‚æˆ‘æ”¹æˆæ ¹ç›®å½•çš„sitesæ–‡ä»¶å¤¹ï¼Œé‚£å°±æ˜¯ï¼šbash12DocumentRoot \"/Users/ç”¨æˆ·å/Sites\"&lt;Directory \"/Users/ç”¨æˆ·å/Sites\"&gt; ps:ç”¨æˆ·åå³ä½ macçš„ç”¨æˆ·åï¼Œæ¯”å¦‚æˆ‘çš„ç”¨æˆ·åæ˜¯nicolasï¼Œé‚£æ”¹åˆ¶ååº”è¯¥æ˜¯ï¼šbash12DocumentRoot \"/Users/nicolas/Sites\"&lt;Directory \"/Users/nicolas/Sites\"&gt; è¿™æ ·å­çš„è¯æˆ‘ä»¬å°±å¯ä»¥æŠŠApacheçš„work spaceæ›´æ”¹åˆ°æ ¹è·¯å¾„ä¸‹çš„sitesäº† æ›´æ”¹é»˜è®¤ç«¯å£è·Ÿæ›´æ”¹é»˜è®¤å·¥ä½œç©ºé—´ä¸€æ ·çš„æ–¹å¼æ‰“å¼€httpd.confï¼Œæ‰¾åˆ°Listen 80è¿™ä¸€è¡Œï¼Œå°†80æ”¹ä¸ºä½ éœ€è¦çš„ç«¯å£å°±å¥½ æ˜¾ç¤ºæ–‡ä»¶ç›®å½•Apacheåœ¨æ²¡æœ‰indexçš„æƒ…å†µä¸‹é»˜è®¤ä¸ä¼šæ˜¾ç¤ºæ–‡ä»¶ç›®å½•ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹httpd.confå®ç°æ–‡ä»¶åˆ—è¡¨çš„å±•ç¤ºï¼Œæ–¹ä¾¿è°ƒè¯•æ“ä½œå¦‚ä¸‹ï¼šå°†httpd.confé‡Œé¢Options FollowSymLinks Multiviewsä¹‹ååŠ ä¸ŠIndexesï¼Œä¿®æ”¹ä¹‹åä¸ºbash1Options FollowSymLinks Multiviews Indexes æ·»åŠ php7çš„æ”¯æŒåœ¨é‡Œé¢æ‰¾åˆ°apache1#LoadModule php7_module libexec/apache2/libphp7.so åˆ é™¤å‰é¢çš„#ï¼Œä¿®æ”¹ä¹‹åæ˜¯smali1LoadModule php7_module libexec/apache2/libphp7.so æ¥ä¸‹æ¥ä¿®æ”¹ä¿®æ”¹servernameï¼ˆå¿…è¦æ“ä½œï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼‰apache12#ServerAdmin you@example.comServerName localhost ä»¥ä¸Šæ“ä½œéƒ½å®Œæˆä»¥åï¼ŒæŒ‰ä¸‹ esc ï¼Œè¾“å…¥ :wq ç„¶åå›è½¦ç´§æ¥ç€åœ¨ç»ˆç«¯sudo apachectl startå³å¯","categories":[{"name":"mac","slug":"mac","permalink":"/categories/mac/"}],"tags":[{"name":"mac","slug":"mac","permalink":"/tags/mac/"},{"name":"Apache","slug":"Apache","permalink":"/tags/Apache/"}],"keywords":[{"name":"mac","slug":"mac","permalink":"/categories/mac/"}]}]}