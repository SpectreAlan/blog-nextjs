<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Givingcode</title>
  
  <subtitle>å¦‚æœç¬¬ä¸€æ¬¡å¤±è´¥äº†ï¼Œé‚£è¿™æ˜¯1.0ç‰ˆæœ¬ï¼Œè¯·ç»§ç»­åŠªåŠ›</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="/"/>
  <updated>2020-02-15T11:58:37.598Z</updated>
  <id>/</id>
  
  <author>
    <name>Givingcode</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ReactçŠ¶æ€é€»è¾‘å¤ç”¨</title>
    <link href="/2020/02/15/React%E7%8A%B6%E6%80%81%E9%80%BB%E8%BE%91%E5%A4%8D%E7%94%A8/"/>
    <id>/2020/02/15/ReactçŠ¶æ€é€»è¾‘å¤ç”¨/</id>
    <published>2020-02-15T06:22:33.000Z</published>
    <updated>2020-02-15T11:58:37.598Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Mixin"><a href="#Mixin" class="headerlink" title="Mixin"></a>Mixin</h1><h2 id="å…³äºMixin"><a href="#å…³äºMixin" class="headerlink" title="å…³äºMixin"></a>å…³äºMixin</h2><p>Mixinï¼ˆæ··å…¥ï¼‰æ˜¯ä¸€ç§é€šè¿‡æ‰©å±•æ”¶é›†åŠŸèƒ½çš„æ–¹å¼ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯å°†ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ‹·è´åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸Šé¢å»ï¼Œä¸è¿‡ä½ å¯ä»¥æ‹·è´ä»»æ„å¤šä¸ªå¯¹è±¡çš„ä»»æ„æ–¹æ³•åˆ°ä¸€ä¸ªæ–°å¯¹è±¡ä¸Šå»ï¼Œè¿™æ˜¯ç»§æ‰¿æ‰€ä¸èƒ½å®ç°çš„ã€‚å®ƒçš„å‡ºç°ä¸»è¦å°±æ˜¯ä¸ºäº†è§£å†³ä»£ç å¤ç”¨é—®é¢˜ã€‚ å†™ä¸€ä¸ªç®€å•çš„Mixinæ–¹æ³•ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setMixin</span>(<span class="params">target, mixin</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">arguments</span>[<span class="number">2</span>]) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">2</span>, len = <span class="built_in">arguments</span>.length; i &lt; len; i++) &#123;</span><br><span class="line">      target.prototype[<span class="built_in">arguments</span>[i]] = mixin.prototype[<span class="built_in">arguments</span>[i]];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> methodName <span class="keyword">in</span> mixin.prototype) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="built_in">Object</span>.hasOwnProperty(target.prototype, methodName)) &#123;</span><br><span class="line">        target.prototype[methodName] = mixin.prototype[methodName];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">setMixin(User,LogMixin,<span class="string">'actionLog'</span>);</span><br><span class="line">setMixin(Goods,LogMixin,<span class="string">'requestLog'</span>);</span><br></pre></td></tr></table></figure></div></p><h2 id="Mixinåº”ç”¨"><a href="#Mixinåº”ç”¨" class="headerlink" title="Mixinåº”ç”¨"></a>Mixinåº”ç”¨</h2><p>Reactä¹Ÿæä¾›äº†Mixinçš„å®ç°ï¼Œå¦‚æœå®Œå…¨ä¸åŒçš„ç»„ä»¶æœ‰ç›¸ä¼¼çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥æ¥å®ç°ä»£ç å¤ç”¨ï¼Œå½“ç„¶åªæœ‰åœ¨ä½¿ç”¨createClassæ¥åˆ›å»ºReactç»„ä»¶æ—¶æ‰å¯ä»¥ä½¿ç”¨ï¼Œå› ä¸ºåœ¨Reactç»„ä»¶çš„es6å†™æ³•ä¸­å®ƒå·²ç»è¢«åºŸå¼ƒæ‰äº†ã€‚<br>ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œå¾ˆå¤šç»„ä»¶æˆ–é¡µé¢éƒ½éœ€è¦è®°å½•ç”¨æˆ·è¡Œä¸ºï¼Œæ€§èƒ½æŒ‡æ ‡ç­‰ã€‚å¦‚æœæˆ‘ä»¬åœ¨æ¯ä¸ªç»„ä»¶éƒ½å¼•å…¥å†™æ—¥å¿—çš„é€»è¾‘ï¼Œä¼šäº§ç”Ÿå¤§é‡é‡å¤ä»£ç ï¼Œé€šè¿‡Mixinæˆ‘ä»¬å¯ä»¥è§£å†³è¿™ä¸€é—®é¢˜ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> LogMixin = &#123;</span><br><span class="line">  log: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'log'</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  componentDidMount: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'in'</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  componentWillUnmount: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'out'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> User = React.createClass(&#123;</span><br><span class="line">  mixins: [LogMixin],</span><br><span class="line">  render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Goods = React.createClass(&#123;</span><br><span class="line">  mixins: [LogMixin],</span><br><span class="line">  render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div></p><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ol><li>Mixin å¯èƒ½ä¼šç›¸äº’ä¾èµ–ï¼Œç›¸äº’è€¦åˆï¼Œä¸åˆ©äºä»£ç ç»´æŠ¤</li><li>ä¸åŒçš„Mixinä¸­çš„æ–¹æ³•å¯èƒ½ä¼šç›¸äº’å†²çª</li><li>Mixinéå¸¸å¤šæ—¶ï¼Œç»„ä»¶æ˜¯å¯ä»¥æ„ŸçŸ¥åˆ°çš„ï¼Œç”šè‡³è¿˜è¦ä¸ºå…¶åšç›¸å…³å¤„ç†ï¼Œè¿™æ ·ä¼šç»™ä»£ç é€ æˆæ»šé›ªçƒå¼çš„å¤æ‚æ€§</li></ol><h1 id="HOC"><a href="#HOC" class="headerlink" title="HOC"></a>HOC</h1><h2 id="å…³äºHOC"><a href="#å…³äºHOC" class="headerlink" title="å…³äºHOC"></a>å…³äºHOC</h2><p> é«˜é˜¶ç»„ä»¶å¯ä»¥çœ‹ä½œReactå¯¹è£…é¥°æ¨¡å¼çš„ä¸€ç§å®ç°ï¼Œé«˜é˜¶ç»„ä»¶å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸”è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ã€‚ HOCæ˜¯Reactä¸­çš„é«˜çº§æŠ€æœ¯ï¼Œç”¨æ¥é‡ç”¨ç»„ä»¶é€»è¾‘ã€‚ä½†é«˜é˜¶ç»„ä»¶æœ¬èº«å¹¶ä¸æ˜¯React APIã€‚å®ƒåªæ˜¯ä¸€ç§æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼æ˜¯ç”±Reactè‡ªèº«çš„ç»„åˆæ€§è´¨å¿…ç„¶äº§ç”Ÿçš„<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">visible</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; visible, ...props &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">      <span class="keyword">if</span> (visible === <span class="literal">false</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><p> ä¸Šé¢çš„ä»£ç å°±æ˜¯ä¸€ä¸ªHOCçš„ç®€å•åº”ç”¨ï¼Œå‡½æ•°æ¥æ”¶ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°ç»„ä»¶ï¼Œæ–°ç»„å»ºå¯ä»¥æ¥æ”¶ä¸€ä¸ªvisible propsï¼Œæ ¹æ®visibleçš„å€¼æ¥åˆ¤æ–­æ˜¯å¦æ¸²æŸ“Visibleã€‚</p><h2 id="å®ç°æ–¹å¼"><a href="#å®ç°æ–¹å¼" class="headerlink" title="å®ç°æ–¹å¼"></a>å®ç°æ–¹å¼</h2><h3 id="å±æ€§ä»£ç†"><a href="#å±æ€§ä»£ç†" class="headerlink" title="å±æ€§ä»£ç†"></a>å±æ€§ä»£ç†</h3><p>å‡½æ•°è¿”å›ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç»„ä»¶ï¼Œç„¶ååœ¨renderä¸­è¿”å›è¦åŒ…è£¹çš„ç»„ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä»£ç†æ‰€æœ‰ä¼ å…¥çš„propsï¼Œå¹¶ä¸”å†³å®šå¦‚ä½•æ¸²æŸ“ï¼Œå®é™…ä¸Š ï¼Œè¿™ç§æ–¹å¼ç”Ÿæˆçš„é«˜é˜¶ç»„ä»¶å°±æ˜¯åŸç»„ä»¶çš„çˆ¶ç»„ä»¶ï¼Œä¸Šé¢çš„å‡½æ•°visibleå°±æ˜¯ä¸€ä¸ªHOCå±æ€§ä»£ç†çš„å®ç°æ–¹å¼</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">proxyHOC</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>å¯¹æ¯”åŸç”Ÿç»„ä»¶å¢å¼ºçš„é¡¹ï¼š</p><ul><li>å¯æ“ä½œæ‰€æœ‰ä¼ å…¥çš„props</li><li>å¯æ“ä½œç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</li><li>å¯æ“ä½œç»„ä»¶çš„staticæ–¹æ³•</li><li>è·å–refs</li></ul><h3 id="åå‘ç»§æ‰¿"><a href="#åå‘ç»§æ‰¿" class="headerlink" title="åå‘ç»§æ‰¿"></a>åå‘ç»§æ‰¿</h3><p>è¿”å›ä¸€ä¸ªç»„ä»¶ï¼Œç»§æ‰¿åŸç»„ä»¶ï¼Œåœ¨renderä¸­è°ƒç”¨åŸç»„ä»¶çš„renderã€‚ç”±äºç»§æ‰¿äº†åŸç»„ä»¶ï¼Œèƒ½é€šè¿‡thisè®¿é—®åˆ°åŸç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€propsã€stateã€renderç­‰ï¼Œç›¸æ¯”å±æ€§ä»£ç†å®ƒèƒ½æ“ä½œæ›´å¤šçš„å±æ€§ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inheritHOC</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">WrappedComponent</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">super</span>.render();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>å¯¹æ¯”åŸç”Ÿç»„ä»¶å¢å¼ºçš„é¡¹ï¼š</p><ul><li>å¯æ“ä½œæ‰€æœ‰ä¼ å…¥çš„props</li><li>å¯æ“ä½œç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</li><li>å¯æ“ä½œç»„ä»¶çš„staticæ–¹æ³•</li><li>è·å–refs</li><li>å¯æ“ä½œstate</li><li>å¯ä»¥æ¸²æŸ“åŠ«æŒ</li></ul><h2 id="å®é™…åº”ç”¨"><a href="#å®é™…åº”ç”¨" class="headerlink" title="å®é™…åº”ç”¨"></a>å®é™…åº”ç”¨</h2><h3 id="ç»„åˆæ¸²æŸ“"><a href="#ç»„åˆæ¸²æŸ“" class="headerlink" title="ç»„åˆæ¸²æŸ“"></a>ç»„åˆæ¸²æŸ“</h3><p>å¯ä½¿ç”¨ä»»ä½•å…¶ä»–ç»„ä»¶å’ŒåŸç»„ä»¶è¿›è¡Œç»„åˆæ¸²æŸ“ï¼Œè¾¾åˆ°æ ·å¼ã€å¸ƒå±€å¤ç”¨ç­‰æ•ˆæœã€‚</p><ul><li><p>é€šè¿‡å±æ€§ä»£ç†å®ç°</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stylHOC</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"title"</span>&gt;</span>&#123;this.props.title&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li><li><p>é€šè¿‡åå‘ç»§æ‰¿å®ç°</p></li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">styleHOC</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">WrappedComponent</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"title"</span>&gt;</span>&#123;this.props.title&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;super.render()&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="æ¡ä»¶æ¸²æŸ“"><a href="#æ¡ä»¶æ¸²æŸ“" class="headerlink" title="æ¡ä»¶æ¸²æŸ“"></a>æ¡ä»¶æ¸²æŸ“</h3><ul><li><p>é€šè¿‡å±æ€§ä»£ç†å®ç°</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">visibleHOC</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.props.visible === <span class="literal">false</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li><li><p>é€šè¿‡åå‘ç»§æ‰¿å®ç°</p></li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">visibleHOC</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">WrappedComponent</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.props.visible === <span class="literal">false</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.render()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="æ“ä½œprops"><a href="#æ“ä½œprops" class="headerlink" title="æ“ä½œprops"></a>æ“ä½œprops</h3><p>å¯ä»¥å¯¹ä¼ å…¥ç»„ä»¶çš„propsè¿›è¡Œå¢åŠ ã€ä¿®æ”¹ã€åˆ é™¤æˆ–è€…æ ¹æ®ç‰¹å®šçš„propsè¿›è¡Œç‰¹æ®Šçš„æ“ä½œã€‚</p><ul><li>é€šè¿‡å±æ€§ä»£ç†å®ç°<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">proxyHOC</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">const</span> newProps = &#123;</span><br><span class="line">        ...this.props,</span><br><span class="line">        user: <span class="string">'ConardLi'</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...newProps</span>&#125; /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><h3 id="è·å–refs"><a href="#è·å–refs" class="headerlink" title="è·å–refs"></a>è·å–refs</h3><p>é«˜é˜¶ç»„ä»¶ä¸­å¯è·å–åŸç»„ä»¶çš„refï¼Œé€šè¿‡refè·å–ç»„ä»¶å®åŠ›ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ï¼Œå½“ç¨‹åºåˆå§‹åŒ–å®Œæˆåè°ƒç”¨åŸç»„ä»¶çš„logæ–¹æ³•</p><ul><li>é€šè¿‡å±æ€§ä»£ç†å®ç°<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">refHOC</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">      <span class="keyword">this</span>.wapperRef.log()</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...this.props</span>&#125; <span class="attr">ref</span>=<span class="string">&#123;ref</span> =&gt;</span> &#123; this.wapperRef = ref &#125;&#125; /&gt;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><h3 id="çŠ¶æ€ç®¡ç†"><a href="#çŠ¶æ€ç®¡ç†" class="headerlink" title="çŠ¶æ€ç®¡ç†"></a>çŠ¶æ€ç®¡ç†</h3><p>å°†åŸç»„ä»¶çš„çŠ¶æ€æå–åˆ°HOCä¸­è¿›è¡Œç®¡ç†ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ï¼Œæˆ‘ä»¬å°†Inputçš„valueæå–åˆ°HOCä¸­è¿›è¡Œç®¡ç†ï¼Œä½¿å®ƒå˜æˆå—æ§ç»„ä»¶ï¼ŒåŒæ—¶ä¸å½±å“å®ƒä½¿ç”¨onChangeæ–¹æ³•è¿›è¡Œä¸€äº›å…¶ä»–æ“ä½œã€‚åŸºäºè¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„åŒå‘ç»‘å®šï¼Œå…·ä½“è¯·çœ‹åŒå‘ç»‘å®šã€‚</p><ul><li>é€šè¿‡å±æ€§ä»£ç†å®ç°<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">proxyHoc</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">      <span class="keyword">super</span>(props);</span><br><span class="line">      <span class="keyword">this</span>.state = &#123; <span class="attr">value</span>: <span class="string">''</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    onChange = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; onChange &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">      <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">        value: event.target.value,</span><br><span class="line">      &#125;, () =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> onChange ===<span class="string">'function'</span>)&#123;</span><br><span class="line">          onChange(event);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">const</span> newProps = &#123;</span><br><span class="line">        value: <span class="keyword">this</span>.state.value,</span><br><span class="line">        onChange: <span class="keyword">this</span>.onChange,</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...this.props</span>&#125; &#123;<span class="attr">...newProps</span>&#125; /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HOC</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">input</span> &#123;<span class="attr">...this.props</span>&#125;&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> proxyHoc(HOC);</span><br></pre></td></tr></table></figure></div></li></ul><h3 id="æ“ä½œstate"><a href="#æ“ä½œstate" class="headerlink" title="æ“ä½œstate"></a>æ“ä½œstate</h3><p>ä¸Šé¢çš„ä¾‹å­é€šè¿‡å±æ€§ä»£ç†åˆ©ç”¨HOCçš„stateå¯¹åŸç»„ä»¶è¿›è¡Œäº†ä¸€å®šçš„å¢å¼ºï¼Œä½†å¹¶ä¸èƒ½ç›´æ¥æ§åˆ¶åŸç»„ä»¶çš„stateï¼Œè€Œé€šè¿‡åå‘ç»§æ‰¿ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ“ä½œåŸç»„ä»¶çš„stateã€‚ä½†æ˜¯å¹¶ä¸æ¨èç›´æ¥ä¿®æ”¹æˆ–æ·»åŠ åŸç»„ä»¶çš„stateï¼Œå› ä¸ºè¿™æ ·æœ‰å¯èƒ½å’Œç»„ä»¶å†…éƒ¨çš„æ“ä½œæ„æˆå†²çªã€‚</p><ul><li>é€šè¿‡åå‘ç»§æ‰¿å®ç°<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debugHOC</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">WrappedComponent</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'props'</span>, <span class="keyword">this</span>.props);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'state'</span>, <span class="keyword">this</span>.state);</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;div className=<span class="string">"debuging"</span>&gt;</span><br><span class="line">          &#123;<span class="keyword">super</span>.render()&#125;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></div></li></ul><p>ä¸Šé¢çš„HOCåœ¨renderä¸­å°†propså’Œstateæ‰“å°å‡ºæ¥ï¼Œå¯ä»¥ç”¨ä½œè°ƒè¯•é˜¶æ®µï¼Œå½“ç„¶ä½ å¯ä»¥åœ¨é‡Œé¢å†™æ›´å¤šçš„è°ƒè¯•ä»£ç ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œåªéœ€è¦åœ¨æˆ‘ä»¬æƒ³è¦è°ƒè¯•çš„ç»„ä»¶ä¸ŠåŠ ä¸Š@debugå°±å¯ä»¥å¯¹è¯¥ç»„ä»¶è¿›è¡Œè°ƒè¯•ï¼Œè€Œä¸éœ€è¦åœ¨æ¯æ¬¡è°ƒè¯•çš„æ—¶å€™å†™å¾ˆå¤šå†—ä½™ä»£ç ã€‚(å¦‚æœä½ è¿˜ä¸çŸ¥é“æ€ä¹ˆä½¿ç”¨HOCï¼Œè¯·ğŸ‘‡å¦‚ä½•ä½¿ç”¨HOC)</p><h3 id="æ¸²æŸ“åŠ«æŒ"><a href="#æ¸²æŸ“åŠ«æŒ" class="headerlink" title="æ¸²æŸ“åŠ«æŒ"></a>æ¸²æŸ“åŠ«æŒ</h3><p>é«˜é˜¶ç»„ä»¶å¯ä»¥åœ¨renderå‡½æ•°ä¸­åšéå¸¸å¤šçš„æ“ä½œï¼Œä»è€Œæ§åˆ¶åŸç»„ä»¶çš„æ¸²æŸ“è¾“å‡ºã€‚åªè¦æ”¹å˜äº†åŸç»„ä»¶çš„æ¸²æŸ“ï¼Œæˆ‘ä»¬éƒ½å°†å®ƒç§°ä¹‹ä¸ºä¸€ç§æ¸²æŸ“åŠ«æŒã€‚<br>å®é™…ä¸Šï¼Œä¸Šé¢çš„ç»„åˆæ¸²æŸ“å’Œæ¡ä»¶æ¸²æŸ“éƒ½æ˜¯æ¸²æŸ“åŠ«æŒçš„ä¸€ç§ï¼Œé€šè¿‡åå‘ç»§æ‰¿ï¼Œä¸ä»…å¯ä»¥å®ç°ä»¥ä¸Šä¸¤ç‚¹ï¼Œè¿˜å¯ç›´æ¥å¢å¼ºç”±åŸç»„ä»¶renderå‡½æ•°äº§ç”Ÿçš„Reactå…ƒç´ ã€‚</p><ul><li>é€šè¿‡åå‘ç»§æ‰¿å®ç°<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hijackHOC</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">WrappedComponent</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">const</span> tree = <span class="keyword">super</span>.render();</span><br><span class="line">      <span class="keyword">let</span> newProps = &#123;&#125;;</span><br><span class="line">      <span class="keyword">if</span> (tree &amp;&amp; tree.type === <span class="string">'input'</span>) &#123;</span><br><span class="line">        newProps = &#123; <span class="attr">value</span>: <span class="string">'æ¸²æŸ“è¢«åŠ«æŒäº†'</span> &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> props = <span class="built_in">Object</span>.assign(&#123;&#125;, tree.props, newProps);</span><br><span class="line">      <span class="keyword">const</span> newTree = React.cloneElement(tree, props, tree.props.children);</span><br><span class="line">      <span class="keyword">return</span> newTree;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><h2 id="å¦‚ä½•ä½¿ç”¨ï¼Ÿ"><a href="#å¦‚ä½•ä½¿ç”¨ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ï¼Ÿ"></a>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</h2><p>ä¸Šé¢çš„ç¤ºä¾‹ä»£ç éƒ½å†™çš„æ˜¯å¦‚ä½•å£°æ˜ä¸€ä¸ªHOCï¼ŒHOCå®é™…ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†è¦å¢å¼ºçš„ç»„ä»¶ä½œä¸ºå‚æ•°è°ƒç”¨HOCå‡½æ•°ï¼Œå¾—åˆ°å¢å¼ºåçš„ç»„ä»¶ã€‚<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>åŸç»„ä»¶<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> inheritHOC(myComponent);</span><br></pre></td></tr></table></figure></div></p><h3 id="Compose"><a href="#Compose" class="headerlink" title="Compose"></a>Compose</h3><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸€ä¸ªç»„ä»¶å¯èƒ½è¢«å¤šä¸ªHOCå¢å¼ºï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯è¢«æ‰€æœ‰çš„HOCå¢å¼ºåçš„ç»„ä»¶<br>å‡è®¾ç°åœ¨æˆ‘ä»¬æœ‰loggerï¼Œvisibleï¼Œstyleç­‰å¤šä¸ªHOCï¼Œç°åœ¨è¦åŒæ—¶å¢å¼ºä¸€ä¸ªInputç»„ä»¶ï¼š<br>logger(visible(style(Input)))<br>è¿™ç§ä»£ç éå¸¸çš„éš¾ä»¥é˜…è¯»ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å°è£…ä¸€ä¸ªç®€å•çš„å‡½æ•°ç»„åˆå·¥å…·ï¼Œå°†å†™æ³•æ”¹å†™å¦‚ä¸‹ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> compose = <span class="function">(<span class="params">...fns</span>) =&gt;</span> fns.reduce(<span class="function">(<span class="params">f, g</span>) =&gt;</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> g(f(...args)));</span><br><span class="line">compose(logger,visible,style)(Input);</span><br></pre></td></tr></table></figure></div></p><p>composeå‡½æ•°è¿”å›ä¸€ä¸ªæ‰€æœ‰å‡½æ•°ç»„åˆåçš„å‡½æ•°ï¼Œcompose(f, g, h) å’Œ (â€¦args) =&gt; f(g(h(â€¦args)))æ˜¯ä¸€æ ·çš„ã€‚å¾ˆå¤šç¬¬ä¸‰æ–¹åº“éƒ½æä¾›äº†ç±»ä¼¼composeçš„å‡½æ•°ï¼Œä¾‹å¦‚lodash.flowRightï¼ŒReduxæä¾›çš„combineReducerså‡½æ•°ç­‰ã€‚</p><h3 id="Decorators"><a href="#Decorators" class="headerlink" title="Decorators"></a>Decorators</h3><p>æˆ‘ä»¬è¿˜å¯ä»¥å€ŸåŠ©ES7ä¸ºæˆ‘ä»¬æä¾›çš„Decoratorsæ¥è®©æˆ‘ä»¬çš„å†™æ³•å˜çš„æ›´åŠ ä¼˜é›…ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@logger</span><br><span class="line">@visible</span><br><span class="line">@style</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Input</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><p>Decoratorsæ˜¯ES7çš„ä¸€ä¸ªææ¡ˆï¼Œè¿˜æ²¡æœ‰è¢«æ ‡å‡†åŒ–ï¼Œä½†ç›®å‰Babelè½¬ç å™¨å·²ç»æ”¯æŒï¼Œæˆ‘ä»¬éœ€è¦æå‰é…ç½®babel-plugin-transform-decorators-legacyï¼š<br>â€œpluginsâ€: [â€œtransform-decorators-legacyâ€]<br>è¿˜å¯ä»¥ç»“åˆä¸Šé¢çš„composeå‡½æ•°ä½¿ç”¨ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hoc = compose(logger, visible, style);</span><br><span class="line">@hoc</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Input</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><h2 id="HOCçš„å®é™…åº”ç”¨"><a href="#HOCçš„å®é™…åº”ç”¨" class="headerlink" title="HOCçš„å®é™…åº”ç”¨"></a>HOCçš„å®é™…åº”ç”¨</h2><p>ä¸‹é¢æ˜¯ä¸€äº›æˆ‘åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å®é™…å¯¹HOCçš„å®é™…åº”ç”¨åœºæ™¯ï¼Œç”±äºæ–‡ç« ç¯‡å¹…åŸå› ï¼Œä»£ç ç»è¿‡å¾ˆå¤šç®€åŒ–ï¼Œå¦‚æœ‰é—®é¢˜æ¬¢è¿åœ¨è¯„è®ºåŒºæŒ‡å‡ºï¼š</p><h3 id="æ—¥å¿—æ‰“ç‚¹"><a href="#æ—¥å¿—æ‰“ç‚¹" class="headerlink" title="æ—¥å¿—æ‰“ç‚¹"></a>æ—¥å¿—æ‰“ç‚¹</h3><p>å®é™…ä¸Šè¿™å±äºä¸€ç±»æœ€å¸¸è§çš„åº”ç”¨ï¼Œå¤šä¸ªç»„ä»¶æ‹¥æœ‰ç±»ä¼¼çš„é€»è¾‘ï¼Œæˆ‘ä»¬è¦å¯¹é‡å¤çš„é€»è¾‘è¿›è¡Œå¤ç”¨ï¼Œ å®˜æ–¹æ–‡æ¡£ä¸­CommentListçš„ç¤ºä¾‹ä¹Ÿæ˜¯è§£å†³äº†ä»£ç å¤ç”¨é—®é¢˜ï¼Œå†™çš„å¾ˆè¯¦ç»†<br>æŸäº›é¡µé¢éœ€è¦è®°å½•ç”¨æˆ·è¡Œä¸ºï¼Œæ€§èƒ½æŒ‡æ ‡ç­‰ç­‰ï¼Œé€šè¿‡é«˜é˜¶ç»„ä»¶åšè¿™äº›äº‹æƒ…å¯ä»¥çœå»å¾ˆå¤šé‡å¤ä»£ç ã€‚<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logHoc</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    componentWillMount() &#123;</span><br><span class="line">      <span class="keyword">this</span>.start = <span class="built_in">Date</span>.now();</span><br><span class="line">    &#125;</span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">      <span class="keyword">this</span>.end = <span class="built_in">Date</span>.now();</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;WrappedComponent.dispalyName&#125;</span> æ¸²æŸ“æ—¶é—´ï¼š<span class="subst">$&#123;<span class="keyword">this</span>.end - <span class="keyword">this</span>.start&#125;</span> ms`</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;user&#125;</span>è¿›å…¥<span class="subst">$&#123;WrappedComponent.dispalyName&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    componentWillUnmount() &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;user&#125;</span>é€€å‡º<span class="subst">$&#123;WrappedComponent.dispalyName&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><h3 id="å¯ç”¨ã€æƒé™æ§åˆ¶"><a href="#å¯ç”¨ã€æƒé™æ§åˆ¶" class="headerlink" title="å¯ç”¨ã€æƒé™æ§åˆ¶"></a>å¯ç”¨ã€æƒé™æ§åˆ¶</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">auth</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; visible, auth, display = <span class="literal">null</span>, ...props &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">      <span class="keyword">if</span> (visible === <span class="literal">false</span> || (auth &amp;&amp; authList.indexOf(auth) === <span class="number">-1</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> display</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>authListæ˜¯æˆ‘ä»¬åœ¨è¿›å…¥ç¨‹åºæ—¶å‘åç«¯è¯·æ±‚çš„æ‰€æœ‰æƒé™åˆ—è¡¨ï¼Œå½“ç»„ä»¶æ‰€éœ€è¦çš„æƒé™ä¸åˆ—è¡¨ä¸­ï¼Œæˆ–è€…è®¾ç½®çš„ visibleæ˜¯falseï¼Œæˆ‘ä»¬å°†å…¶æ˜¾ç¤ºä¸ºä¼ å…¥çš„ç»„ä»¶æ ·å¼ï¼Œæˆ–è€…nullã€‚æˆ‘ä»¬å¯ä»¥å°†ä»»ä½•éœ€è¦è¿›è¡Œæƒé™æ ¡éªŒçš„ç»„ä»¶åº”ç”¨HOCï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@auth</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Input</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;  ...  &#125;</span><br><span class="line">@auth</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Button</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;  ...  &#125;</span><br><span class="line"></span><br><span class="line">&lt;Button auth=<span class="string">"user/addUser"</span>&gt;æ·»åŠ ç”¨æˆ·&lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">&lt;Input auth="user/</span>search<span class="string">" visible=&#123;false&#125; &gt;æ·»åŠ ç”¨æˆ·&lt;/Input&gt;</span></span><br></pre></td></tr></table></figure></div></p><h3 id="åŒå‘ç»‘å®š"><a href="#åŒå‘ç»‘å®š" class="headerlink" title="åŒå‘ç»‘å®š"></a>åŒå‘ç»‘å®š</h3><p>åœ¨vueä¸­ï¼Œç»‘å®šä¸€ä¸ªå˜é‡åå¯å®ç°åŒå‘æ•°æ®ç»‘å®šï¼Œå³è¡¨å•ä¸­çš„å€¼æ”¹å˜åç»‘å®šçš„å˜é‡ä¹Ÿä¼šè‡ªåŠ¨æ”¹å˜ã€‚è€ŒReactä¸­æ²¡æœ‰åšè¿™æ ·çš„å¤„ç†ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¡¨å•å…ƒç´ éƒ½æ˜¯éå—æ§ç»„ä»¶ã€‚ç»™è¡¨å•å…ƒç´ ç»‘å®šä¸€ä¸ªçŠ¶æ€åï¼Œå¾€å¾€éœ€è¦æ‰‹åŠ¨ä¹¦å†™onChangeæ–¹æ³•æ¥å°†å…¶æ”¹å†™ä¸ºå—æ§ç»„ä»¶ï¼Œåœ¨è¡¨å•å…ƒç´ éå¸¸å¤šçš„æƒ…å†µä¸‹è¿™äº›é‡å¤æ“ä½œæ˜¯éå¸¸ç—›è‹¦çš„ã€‚<br>æˆ‘ä»¬å¯ä»¥å€ŸåŠ©é«˜é˜¶ç»„ä»¶æ¥å®ç°ä¸€ä¸ªç®€å•çš„åŒå‘ç»‘å®šï¼Œä»£ç ç•¥é•¿ï¼Œå¯ä»¥ç»“åˆä¸‹é¢çš„æ€ç»´å¯¼å›¾è¿›è¡Œç†è§£ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªFormç»„ä»¶ï¼Œè¯¥ç»„ä»¶ç”¨äºåŒ…è£¹æ‰€æœ‰éœ€è¦åŒ…è£¹çš„è¡¨å•ç»„ä»¶ï¼Œé€šè¿‡contexå‘å­ç»„ä»¶æš´éœ²ä¸¤ä¸ªå±æ€§ï¼š<br>modelï¼šå½“å‰Formç®¡æ§çš„æ‰€æœ‰æ•°æ®ï¼Œç”±è¡¨å•nameå’Œvalueç»„æˆï¼Œå¦‚{name:â€™ConardLiâ€™,pwd:â€™123â€™}ã€‚modelå¯ç”±å¤–éƒ¨ä¼ å…¥ï¼Œä¹Ÿå¯è‡ªè¡Œç®¡æ§ã€‚<br>changeModelï¼šæ”¹å˜modelä¸­æŸä¸ªnameçš„å€¼ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Form</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> childContextTypes = &#123;</span><br><span class="line">    model: PropTypes.object,</span><br><span class="line">    changeModel: PropTypes.func</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">constructor</span>(props, context) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props, context);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      model: props.model || &#123;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillReceiveProps(nextProps) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nextProps.model) &#123;</span><br><span class="line">      <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">        model: nextProps.model</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  changeModel = <span class="function">(<span class="params">name, value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      model: &#123; ...this.state.model, [name]: value &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  getChildContext() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      changeModel: <span class="keyword">this</span>.changeModel,</span><br><span class="line">      model: <span class="keyword">this</span>.props.model || <span class="keyword">this</span>.state.model</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  onSubmit = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.model);</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;this.props.children&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.onSubmit&#125;</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>ä¸‹é¢å®šä¹‰ç”¨äºåŒå‘ç»‘å®šçš„HOCï¼Œå…¶ä»£ç†äº†è¡¨å•çš„onChangeå±æ€§å’Œvalueå±æ€§ï¼š<br>å‘ç”ŸonChangeäº‹ä»¶æ—¶è°ƒç”¨ä¸Šå±‚Formçš„changeModelæ–¹æ³•æ¥æ”¹å˜contextä¸­çš„modelã€‚<br>åœ¨æ¸²æŸ“æ—¶å°†valueæ”¹ä¸ºä»contextä¸­å–å‡ºçš„å€¼ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">proxyHoc</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> contextTypes = &#123;</span><br><span class="line">      model: PropTypes.object,</span><br><span class="line">      changeModel: PropTypes.func</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    onChange = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; changeModel &#125; = <span class="keyword">this</span>.context;</span><br><span class="line">      <span class="keyword">const</span> &#123; onChange &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">      <span class="keyword">const</span> &#123; v_model &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">      changeModel(v_model, event.target.value);</span><br><span class="line">      <span class="keyword">if</span>(<span class="keyword">typeof</span> onChange === <span class="string">'function'</span>)&#123;onChange(event);&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; model &#125; = <span class="keyword">this</span>.context;</span><br><span class="line">      <span class="keyword">const</span> &#123; v_model &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span></span></span></span><br><span class="line"><span class="xml">        &#123;...this.props&#125;</span></span><br><span class="line"><span class="xml">        value=&#123;model[v_model]&#125;</span></span><br><span class="line"><span class="xml">        onChange=&#123;this.onChange&#125;</span></span><br><span class="line"><span class="xml">      /&gt;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@proxyHoc</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Input</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">input</span> &#123;<span class="attr">...this.props</span>&#125;&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>ä¸Šé¢çš„ä»£ç åªæ˜¯ç®€ç•¥çš„ä¸€éƒ¨åˆ†ï¼Œé™¤äº†inputï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†HOCåº”ç”¨åœ¨selectç­‰å…¶ä»–è¡¨å•ç»„ä»¶ï¼Œç”šè‡³è¿˜å¯ä»¥å°†ä¸Šé¢çš„HOCå…¼å®¹åˆ°spanã€tableç­‰å±•ç¤ºç»„ä»¶ï¼Œè¿™æ ·åšå¯ä»¥å¤§å¤§ç®€åŒ–ä»£ç ï¼Œè®©æˆ‘ä»¬çœå»äº†å¾ˆå¤šçŠ¶æ€ç®¡ç†çš„å·¥ä½œï¼Œä½¿ç”¨å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Form &gt;</span><br><span class="line">        &lt;Input v_model=<span class="string">"name"</span>&gt;&lt;<span class="regexp">/Input&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Input v_model="pwd"&gt;&lt;/</span>Input&gt;</span><br><span class="line">      &lt;<span class="regexp">/Form&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></div><h3 id="è¡¨å•æ ¡éªŒ"><a href="#è¡¨å•æ ¡éªŒ" class="headerlink" title="è¡¨å•æ ¡éªŒ"></a>è¡¨å•æ ¡éªŒ</h3><p>åŸºäºä¸Šé¢çš„åŒå‘ç»‘å®šçš„ä¾‹å­ï¼Œæˆ‘ä»¬å†æ¥ä¸€ä¸ªè¡¨å•éªŒè¯å™¨ï¼Œè¡¨å•éªŒè¯å™¨å¯ä»¥åŒ…å«éªŒè¯å‡½æ•°ä»¥åŠæç¤ºä¿¡æ¯ï¼Œå½“éªŒè¯ä¸é€šè¿‡æ—¶ï¼Œå±•ç¤ºé”™è¯¯ä¿¡æ¯ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">validateHoc</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">      <span class="keyword">super</span>(props);</span><br><span class="line">      <span class="keyword">this</span>.state = &#123; <span class="attr">error</span>: <span class="string">''</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    onChange = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; validator &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">      <span class="keyword">if</span> (validator &amp;&amp; <span class="keyword">typeof</span> validator.func === <span class="string">'function'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!validator.func(event.target.value)) &#123;</span><br><span class="line">          <span class="keyword">this</span>.setState(&#123; <span class="attr">error</span>: validator.msg &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">this</span>.setState(&#123; <span class="attr">error</span>: <span class="string">''</span> &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">WrappedComponent</span> <span class="attr">onChange</span>=<span class="string">&#123;this.onChange&#125;</span>  &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.state.error || ''&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> validatorName = &#123;</span><br><span class="line">  func: <span class="function">(<span class="params">val</span>) =&gt;</span> val &amp;&amp; !<span class="built_in">isNaN</span>(val),</span><br><span class="line">  msg: <span class="string">'è¯·è¾“å…¥æ•°å­—'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> validatorPwd = &#123;</span><br><span class="line">  func: <span class="function">(<span class="params">val</span>) =&gt;</span> val &amp;&amp; val.length &gt; <span class="number">6</span>,</span><br><span class="line">  msg: <span class="string">'å¯†ç å¿…é¡»å¤§äº6ä½'</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;HOCInput validator=&#123;validatorName&#125; v_model=<span class="string">"name"</span>&gt;&lt;<span class="regexp">/HOCInput&gt;</span></span><br><span class="line"><span class="regexp">&lt;HOCInput validator=&#123;validatorPwd&#125; v_model="pwd"&gt;&lt;/</span>HOCInput&gt;</span><br></pre></td></tr></table></figure></div></p><p>å½“ç„¶ï¼Œè¿˜å¯ä»¥åœ¨Formæäº¤çš„æ—¶å€™åˆ¤æ–­æ‰€æœ‰éªŒè¯å™¨æ˜¯å¦é€šè¿‡ï¼ŒéªŒè¯å™¨ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºæ•°ç»„ç­‰ç­‰ï¼Œç”±äºæ–‡ç« ç¯‡å¹…åŸå› ï¼Œä»£ç è¢«ç®€åŒ–äº†å¾ˆå¤šï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±å®ç°ã€‚<br>Reduxçš„connect</p><p>reduxä¸­çš„connectï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªHOCï¼Œä¸‹é¢å°±æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆçš„connectå®ç°ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> connect = <span class="function">(<span class="params">mapStateToProps, mapDispatchToProps</span>) =&gt;</span> <span class="function">(<span class="params">WrappedComponent</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Connect</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> contextTypes = &#123;</span><br><span class="line">      store: PropTypes.object</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">constructor</span> () &#123;</span><br><span class="line">      <span class="keyword">super</span>()</span><br><span class="line">      <span class="keyword">this</span>.state = &#123;</span><br><span class="line">        allProps: &#123;&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    componentWillMount () &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; store &#125; = <span class="keyword">this</span>.context</span><br><span class="line">      <span class="keyword">this</span>._updateProps()</span><br><span class="line">      store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>._updateProps())</span><br><span class="line">    &#125;</span><br><span class="line">    _updateProps () &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; store &#125; = <span class="keyword">this</span>.context</span><br><span class="line">      <span class="keyword">let</span> stateProps = mapStateToProps ? mapStateToProps(store.getState(), <span class="keyword">this</span>.props): &#123;&#125; </span><br><span class="line">      <span class="keyword">let</span> dispatchProps = mapDispatchToProps? mapDispatchToProps(store.dispatch, <span class="keyword">this</span>.props) : &#123;&#125; </span><br><span class="line">      <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">        allProps: &#123;</span><br><span class="line">          ...stateProps,</span><br><span class="line">          ...dispatchProps,</span><br><span class="line">          ...this.props</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render () &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...this.state.allProps</span>&#125; /&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> Connect</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><p>ä»£ç éå¸¸æ¸…æ™°ï¼Œconnectå‡½æ•°å…¶å®å°±åšäº†ä¸€ä»¶äº‹ï¼Œå°†mapStateToPropså’ŒmapDispatchToPropsåˆ†åˆ«è§£æ„åä¼ ç»™åŸç»„ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨åŸç»„ä»¶å†…å°±å¯ä»¥ç›´æ¥ç”¨propsè·å–stateä»¥åŠdispatchå‡½æ•°äº†ã€‚</p><h2 id="ä½¿ç”¨HOCçš„æ³¨æ„äº‹é¡¹"><a href="#ä½¿ç”¨HOCçš„æ³¨æ„äº‹é¡¹" class="headerlink" title="ä½¿ç”¨HOCçš„æ³¨æ„äº‹é¡¹"></a>ä½¿ç”¨HOCçš„æ³¨æ„äº‹é¡¹</h2><h3 id="å‘Šè¯«â€”é™æ€å±æ€§æ‹·è´"><a href="#å‘Šè¯«â€”é™æ€å±æ€§æ‹·è´" class="headerlink" title="å‘Šè¯«â€”é™æ€å±æ€§æ‹·è´"></a>å‘Šè¯«â€”é™æ€å±æ€§æ‹·è´</h3><p>å½“æˆ‘ä»¬åº”ç”¨HOCå»å¢å¼ºå¦ä¸€ä¸ªç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬å®é™…ä½¿ç”¨çš„ç»„ä»¶å·²ç»ä¸æ˜¯åŸç»„ä»¶äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‹¿ä¸åˆ°åŸç»„ä»¶çš„ä»»ä½•é™æ€å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨HOCçš„ç»“å°¾æ‰‹åŠ¨æ‹·è´ä»–ä»¬ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">proxyHOC</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">HOCComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  HOCComponent.staticMethod = WrappedComponent.staticMethod;</span><br><span class="line">  <span class="comment">// ... </span></span><br><span class="line">  <span class="keyword">return</span> HOCComponent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><p>å¦‚æœåŸç»„ä»¶æœ‰éå¸¸å¤šçš„é™æ€å±æ€§ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯éå¸¸ç—›è‹¦çš„ï¼Œè€Œä¸”ä½ éœ€è¦å»äº†è§£éœ€è¦å¢å¼ºçš„æ‰€æœ‰ç»„ä»¶çš„é™æ€å±æ€§æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨hoist-non-react-staticsæ¥å¸®åŠ©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨å¸®æˆ‘ä»¬æ‹·è´æ‰€æœ‰éReactçš„é™æ€æ–¹æ³•ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hoistNonReactStatic <span class="keyword">from</span> <span class="string">'hoist-non-react-statics'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">proxyHOC</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">HOCComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  hoistNonReactStatic(HOCComponent,WrappedComponent);</span><br><span class="line">  <span class="keyword">return</span> HOCComponent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><h3 id="å‘Šè¯«â€”ä¼ é€’refs"><a href="#å‘Šè¯«â€”ä¼ é€’refs" class="headerlink" title="å‘Šè¯«â€”ä¼ é€’refs"></a>å‘Šè¯«â€”ä¼ é€’refs</h3><p>ä½¿ç”¨é«˜é˜¶ç»„ä»¶åï¼Œè·å–åˆ°çš„refå®é™…ä¸Šæ˜¯æœ€å¤–å±‚çš„å®¹å™¨ç»„ä»¶ï¼Œè€ŒéåŸç»„ä»¶ï¼Œä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦ç”¨åˆ°åŸç»„ä»¶çš„refã€‚<br>é«˜é˜¶ç»„ä»¶å¹¶ä¸èƒ½åƒé€ä¼ propsé‚£æ ·å°†refsé€ä¼ ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥å®Œæˆrefçš„ä¼ é€’ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hoc</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    getWrappedRef = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.wrappedRef;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> <span class="attr">ref</span>=<span class="string">&#123;ref</span> =&gt;</span> &#123; this.wrappedRef = ref &#125;&#125; &#123;...this.props&#125; /&gt;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@hoc</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Input</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123; <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">input</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Input ref=&#123;ref =&gt; &#123; <span class="keyword">this</span>.inpitRef = ref.getWrappedRef() &#125;&#125; &gt;&lt;<span class="regexp">/Input&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></div></p><p>React 16.3ç‰ˆæœ¬æä¾›äº†ä¸€ä¸ªforwardRef APIæ¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œrefsä¼ é€’ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨é«˜é˜¶ç»„ä»¶ä¸Šè·å–çš„refå°±æ˜¯åŸç»„ä»¶çš„refäº†ï¼Œè€Œä¸éœ€è¦å†æ‰‹åŠ¨ä¼ é€’ï¼Œå¦‚æœä½ çš„Reactç‰ˆæœ¬å¤§äº16.3ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼:<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hoc</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">HOC</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; forwardedRef, ...props &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> <span class="attr">ref</span>=<span class="string">&#123;forwardedRef&#125;</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> React.forwardRef(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">HOC</span> <span class="attr">forwardedRef</span>=<span class="string">&#123;ref&#125;</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><h3 id="å‘Šè¯«â€”ä¸è¦åœ¨renderæ–¹æ³•å†…åˆ›å»ºé«˜é˜¶ç»„ä»¶"><a href="#å‘Šè¯«â€”ä¸è¦åœ¨renderæ–¹æ³•å†…åˆ›å»ºé«˜é˜¶ç»„ä»¶" class="headerlink" title="å‘Šè¯«â€”ä¸è¦åœ¨renderæ–¹æ³•å†…åˆ›å»ºé«˜é˜¶ç»„ä»¶"></a>å‘Šè¯«â€”ä¸è¦åœ¨renderæ–¹æ³•å†…åˆ›å»ºé«˜é˜¶ç»„ä»¶</h3><p>React Diffç®—æ³•çš„åŸåˆ™æ˜¯ï¼š</p><ul><li>ä½¿ç”¨ç»„ä»¶æ ‡è¯†ç¡®å®šæ˜¯å¸è½½è¿˜æ˜¯æ›´æ–°ç»„ä»¶</li><li>å¦‚æœç»„ä»¶çš„å’Œå‰ä¸€æ¬¡æ¸²æŸ“æ—¶æ ‡è¯†æ˜¯ç›¸åŒçš„ï¼Œé€’å½’æ›´æ–°å­ç»„ä»¶</li><li>å¦‚æœæ ‡è¯†ä¸åŒå¸è½½ç»„ä»¶é‡æ–°æŒ‚è½½æ–°ç»„ä»¶</li><li>æ¯æ¬¡è°ƒç”¨é«˜é˜¶ç»„ä»¶ç”Ÿæˆçš„éƒ½æ˜¯æ˜¯ä¸€ä¸ªå…¨æ–°çš„ç»„ä»¶ï¼Œç»„ä»¶çš„å”¯ä¸€æ ‡è¯†å“åº”çš„ä¹Ÿä¼šæ”¹å˜ï¼Œå¦‚æœåœ¨renderæ–¹æ³•è°ƒç”¨äº†é«˜é˜¶ç»„ä»¶ï¼Œè¿™ä¼šå¯¼è‡´ç»„ä»¶æ¯æ¬¡éƒ½ä¼šè¢«å¸è½½åé‡æ–°æŒ‚è½½ã€‚</li><li>çº¦å®š-ä¸è¦æ”¹å˜åŸå§‹ç»„ä»¶</li></ul><p>å®˜æ–¹æ–‡æ¡£å¯¹é«˜é˜¶ç»„ä»¶çš„è¯´æ˜ï¼š</p><ul><li>é«˜é˜¶ç»„ä»¶å°±æ˜¯ä¸€ä¸ªæ²¡æœ‰å‰¯ä½œç”¨çš„çº¯å‡½æ•°ã€‚</li><li>æˆ‘ä»¬å†æ¥çœ‹çœ‹çº¯å‡½æ•°çš„å®šä¹‰ï¼š</li></ul><p>å¦‚æœå‡½æ•°çš„è°ƒç”¨å‚æ•°ç›¸åŒï¼Œåˆ™æ°¸è¿œè¿”å›ç›¸åŒçš„ç»“æœã€‚å®ƒä¸ä¾èµ–äºç¨‹åºæ‰§è¡ŒæœŸé—´å‡½æ•°å¤–éƒ¨ä»»ä½•çŠ¶æ€æˆ–æ•°æ®çš„å˜åŒ–ï¼Œå¿…é¡»åªä¾èµ–äºå…¶è¾“å…¥å‚æ•°ã€‚ è¯¥å‡½æ•°ä¸ä¼šäº§ç”Ÿä»»ä½•å¯è§‚å¯Ÿçš„å‰¯ä½œç”¨ï¼Œä¾‹å¦‚ç½‘ç»œè¯·æ±‚ï¼Œè¾“å…¥å’Œè¾“å‡ºè®¾å¤‡æˆ–æ•°æ®çªå˜ã€‚</p><p>å¦‚æœæˆ‘ä»¬åœ¨é«˜é˜¶ç»„ä»¶å¯¹åŸç»„ä»¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">InputComponent.prototype.componentWillReceiveProps = <span class="function"><span class="keyword">function</span>(<span class="params">nextProps</span>) </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure></div><p>è¿™æ ·å°±ç ´åäº†æˆ‘ä»¬å¯¹é«˜é˜¶ç»„ä»¶çš„çº¦å®šï¼ŒåŒæ—¶ä¹Ÿæ”¹å˜äº†ä½¿ç”¨é«˜é˜¶ç»„ä»¶çš„åˆè¡·ï¼šæˆ‘ä»¬ä½¿ç”¨é«˜é˜¶ç»„ä»¶æ˜¯ä¸ºäº†å¢å¼ºè€Œéæ”¹å˜åŸç»„ä»¶ã€‚</p><h3 id="çº¦å®š-é€ä¼ ä¸ç›¸å…³çš„props"><a href="#çº¦å®š-é€ä¼ ä¸ç›¸å…³çš„props" class="headerlink" title="çº¦å®š-é€ä¼ ä¸ç›¸å…³çš„props"></a>çº¦å®š-é€ä¼ ä¸ç›¸å…³çš„props</h3><p>ä½¿ç”¨é«˜é˜¶ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä»£ç†æ‰€æœ‰çš„propsï¼Œä½†å¾€å¾€ç‰¹å®šçš„HOCåªä¼šç”¨åˆ°å…¶ä¸­çš„ä¸€ä¸ªæˆ–å‡ ä¸ªpropsã€‚æˆ‘ä»¬éœ€è¦æŠŠå…¶ä»–ä¸ç›¸å…³çš„propsé€ä¼ ç»™åŸç»„ä»¶ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">visible</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; visible, ...props &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">      <span class="keyword">if</span> (visible === <span class="literal">false</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>æˆ‘ä»¬åªä½¿ç”¨visibleå±æ€§æ¥æ§åˆ¶ç»„ä»¶çš„æ˜¾ç¤ºå¯éšè—ï¼ŒæŠŠå…¶ä»–propsé€ä¼ ä¸‹å»ã€‚<br>çº¦å®š-displayName<br>åœ¨ä½¿ç”¨React Developer Toolsè¿›è¡Œè°ƒè¯•æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨äº†HOCï¼Œè°ƒè¯•ç•Œé¢å¯èƒ½å˜å¾—éå¸¸éš¾ä»¥é˜…è¯»ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@visible</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Show</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªæ ‡ç­¾<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@visible</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Title</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªæ ‡é¢˜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>ä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ä¸ºHOCæŒ‡å®šä¸€ä¸ªdisplayNameï¼Œå®˜æ–¹æ¨èä½¿ç”¨HOCName(WrappedComponentName)ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> displayName = <span class="string">`Visible(<span class="subst">$&#123;WrappedComponent.displayName&#125;</span>)`</span></span><br></pre></td></tr></table></figure></div><p>è¿™ä¸ªçº¦å®šå¸®åŠ©ç¡®ä¿é«˜é˜¶ç»„ä»¶æœ€å¤§ç¨‹åº¦çš„çµæ´»æ€§å’Œå¯é‡ç”¨æ€§ã€‚</p><h2 id="ä½¿ç”¨HOCçš„åŠ¨æœº"><a href="#ä½¿ç”¨HOCçš„åŠ¨æœº" class="headerlink" title="ä½¿ç”¨HOCçš„åŠ¨æœº"></a>ä½¿ç”¨HOCçš„åŠ¨æœº</h2><p>å›é¡¾ä¸‹ä¸Šæ–‡æåˆ°çš„ Mixin å¸¦æ¥çš„é£é™©ï¼š</p><ul><li>Mixin å¯èƒ½ä¼šç›¸äº’ä¾èµ–ï¼Œç›¸äº’è€¦åˆï¼Œä¸åˆ©äºä»£ç ç»´æŠ¤</li><li>ä¸åŒçš„Mixinä¸­çš„æ–¹æ³•å¯èƒ½ä¼šç›¸äº’å†²çª</li><li>Mixinéå¸¸å¤šæ—¶ï¼Œç»„ä»¶æ˜¯å¯ä»¥æ„ŸçŸ¥åˆ°çš„ï¼Œç”šè‡³è¿˜è¦ä¸ºå…¶åšç›¸å…³å¤„ç†ï¼Œè¿™æ ·ä¼šç»™ä»£ç é€ æˆæ»šé›ªçƒå¼çš„å¤æ‚æ€§</li></ul><p>è€ŒHOCçš„å‡ºç°å¯ä»¥è§£å†³è¿™äº›é—®é¢˜ï¼š</p><ul><li>é«˜é˜¶ç»„ä»¶å°±æ˜¯ä¸€ä¸ªæ²¡æœ‰å‰¯ä½œç”¨çš„çº¯å‡½æ•°ï¼Œå„ä¸ªé«˜é˜¶ç»„ä»¶ä¸ä¼šäº’ç›¸ä¾èµ–è€¦åˆ</li><li>é«˜é˜¶ç»„ä»¶ä¹Ÿæœ‰å¯èƒ½é€ æˆå†²çªï¼Œä½†æˆ‘ä»¬å¯ä»¥åœ¨éµå®ˆçº¦å®šçš„æƒ…å†µä¸‹é¿å…è¿™äº›è¡Œä¸º</li><li>é«˜é˜¶ç»„ä»¶å¹¶ä¸å…³å¿ƒæ•°æ®ä½¿ç”¨çš„æ–¹å¼å’ŒåŸå› ï¼Œè€Œè¢«åŒ…è£¹çš„ç»„ä»¶ä¹Ÿä¸å…³å¿ƒæ•°æ®æ¥è‡ªä½•å¤„ã€‚é«˜é˜¶ç»„ä»¶çš„å¢åŠ ä¸ä¼šä¸ºåŸç»„ä»¶å¢åŠ è´Ÿæ‹…</li></ul><h2 id="HOCçš„ç¼ºé™·"><a href="#HOCçš„ç¼ºé™·" class="headerlink" title="HOCçš„ç¼ºé™·"></a>HOCçš„ç¼ºé™·</h2><ol><li>HOCéœ€è¦åœ¨åŸç»„ä»¶ä¸Šè¿›è¡ŒåŒ…è£¹æˆ–è€…åµŒå¥—ï¼Œå¦‚æœå¤§é‡ä½¿ç”¨HOCï¼Œå°†ä¼šäº§ç”Ÿéå¸¸å¤šçš„åµŒå¥—ï¼Œè¿™è®©è°ƒè¯•å˜å¾—éå¸¸å›°éš¾ã€‚</li><li>HOCå¯ä»¥åŠ«æŒpropsï¼Œåœ¨ä¸éµå®ˆçº¦å®šçš„æƒ…å†µä¸‹ä¹Ÿå¯èƒ½é€ æˆå†²çªã€‚</li></ol><h1 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h1><p>Hooksæ˜¯React v16.7.0-alphaä¸­åŠ å…¥çš„æ–°ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨classä»¥å¤–ä½¿ç”¨stateå’Œå…¶ä»–Reactç‰¹æ€§ã€‚<br>ä½¿ç”¨Hooksï¼Œä½ å¯ä»¥åœ¨å°†å«æœ‰stateçš„é€»è¾‘ä»ç»„ä»¶ä¸­æŠ½è±¡å‡ºæ¥ï¼Œè¿™å°†å¯ä»¥è®©è¿™äº›é€»è¾‘å®¹æ˜“è¢«æµ‹è¯•ã€‚åŒæ—¶ï¼ŒHookså¯ä»¥å¸®åŠ©ä½ åœ¨ä¸é‡å†™ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨è¿™äº›é€»è¾‘ã€‚æ‰€ä»¥ï¼Œå®ƒä¹Ÿå¯ä»¥ä½œä¸ºä¸€ç§å®ç°çŠ¶æ€é€»è¾‘å¤ç”¨çš„æ–¹æ¡ˆã€‚<br>é˜…è¯»ä¸‹é¢çš„ç« èŠ‚ä½¿ç”¨Hookçš„åŠ¨æœºä½ å¯ä»¥å‘ç°ï¼Œå®ƒå¯ä»¥åŒæ—¶è§£å†³Mixinå’ŒHOCå¸¦æ¥çš„é—®é¢˜ã€‚</p><h2 id="å®˜æ–¹æä¾›çš„Hooks"><a href="#å®˜æ–¹æä¾›çš„Hooks" class="headerlink" title="å®˜æ–¹æä¾›çš„Hooks"></a>å®˜æ–¹æä¾›çš„Hooks</h2><h3 id="State-Hook"><a href="#State-Hook" class="headerlink" title="State Hook"></a>State Hook</h3><p>æˆ‘ä»¬è¦ä½¿ç”¨classç»„ä»¶å®ç°ä¸€ä¸ªè®¡æ•°å™¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè¿™æ ·å†™ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Count</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;p&gt;You clicked &#123;<span class="keyword">this</span>.state.count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;() =&gt; &#123; this.setState(&#123; count: this.state.count + 1 &#125;) &#125;&#125;&gt;</span></span><br><span class="line"><span class="regexp">          Click me</span></span><br><span class="line"><span class="regexp">        &lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></div></p><p>é€šè¿‡useStateï¼Œæˆ‘ä»¬ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ä¹Ÿèƒ½å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">HookTest</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; &#123; setCount(count + 1); setNumber(number + 1); &#125;&#125;&gt;</span></span><br><span class="line"><span class="regexp">        Click me</span></span><br><span class="line"><span class="regexp">        &lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></div></p><p>useStateæ˜¯ä¸€ä¸ªé’©å­ï¼Œä»–å¯ä»¥ä¸ºå‡½æ•°å¼ç»„ä»¶å¢åŠ ä¸€äº›çŠ¶æ€ï¼Œå¹¶ä¸”æä¾›æ”¹å˜è¿™äº›çŠ¶æ€çš„å‡½æ•°ï¼ŒåŒæ—¶å®ƒæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°ä½œä¸ºçŠ¶æ€çš„é»˜è®¤å€¼ã€‚</p><h3 id="Effect-Hook"><a href="#Effect-Hook" class="headerlink" title="Effect Hook"></a>Effect Hook</h3><p>Effect Hook å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œä¸€äº›å…·æœ‰ side effectï¼ˆå‰¯ä½œç”¨ï¼‰çš„æ“ä½œ</p><h4 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h4><p>useEffectæ–¹æ³•æ¥æ”¶ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼š</p><ol><li><p>å›è°ƒå‡½æ•°ï¼šåœ¨ç¬¬ç»„ä»¶ä¸€æ¬¡renderå’Œä¹‹åçš„æ¯æ¬¡updateåè¿è¡Œï¼ŒReactä¿è¯åœ¨DOMå·²ç»æ›´æ–°å®Œæˆä¹‹åæ‰ä¼šè¿è¡Œå›è°ƒã€‚</p></li><li><p>çŠ¶æ€ä¾èµ–(æ•°ç»„)ï¼šå½“é…ç½®äº†çŠ¶æ€ä¾èµ–é¡¹åï¼Œåªæœ‰æ£€æµ‹åˆ°é…ç½®çš„çŠ¶æ€å˜åŒ–æ—¶ï¼Œæ‰ä¼šè°ƒç”¨å›è°ƒå‡½æ•°ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// åªè¦ç»„ä»¶renderåå°±ä¼šæ‰§è¡Œ</span></span><br><span class="line">&#125;);</span><br><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// åªæœ‰countæ”¹å˜æ—¶æ‰ä¼šæ‰§è¡Œ</span></span><br><span class="line">&#125;,[count]);</span><br></pre></td></tr></table></figure></div></li></ol><h4 id="å›è°ƒè¿”å›å€¼"><a href="#å›è°ƒè¿”å›å€¼" class="headerlink" title="å›è°ƒè¿”å›å€¼"></a>å›è°ƒè¿”å›å€¼</h4><p>useEffectçš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“é¡µé¢æ¸²æŸ“äº†ä¸‹ä¸€æ¬¡æ›´æ–°çš„ç»“æœåï¼Œæ‰§è¡Œä¸‹ä¸€æ¬¡useEffectä¹‹å‰ï¼Œä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°å¸¸å¸¸ç”¨æ¥å¯¹ä¸Šä¸€æ¬¡è°ƒç”¨useEffectè¿›è¡Œæ¸…ç†ã€‚<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">HookTest</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ‰§è¡Œ...'</span>, count);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'æ¸…ç†...'</span>, count);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [count]);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; &#123; setCount(count + 1); setNumber(number + 1); &#125;&#125;&gt;</span></span><br><span class="line"><span class="regexp">        Click me</span></span><br><span class="line"><span class="regexp">        &lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></div></p><p>æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå¹¶ç‚¹å‡»å‡ æ¬¡æŒ‰é’®ï¼Œå¦‚æœåŠ ä¸Šæµè§ˆå™¨æ¸²æŸ“çš„æƒ…å†µï¼Œç»“æœåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š<br> é¡µé¢æ¸²æŸ“â€¦1<br> æ‰§è¡Œâ€¦ 1<br> é¡µé¢æ¸²æŸ“â€¦2<br> æ¸…ç†â€¦ 1<br> æ‰§è¡Œâ€¦ 2<br> é¡µé¢æ¸²æŸ“â€¦3<br> æ¸…ç†â€¦ 2<br> æ‰§è¡Œâ€¦ 3<br> é¡µé¢æ¸²æŸ“â€¦4<br> æ¸…ç†â€¦ 3<br> æ‰§è¡Œâ€¦ 4</p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆåœ¨æµè§ˆå™¨æ¸²æŸ“å®Œåï¼Œå†æ‰§è¡Œæ¸…ç†çš„æ–¹æ³•è¿˜èƒ½æ‰¾åˆ°ä¸Šæ¬¡çš„stateå‘¢ï¼ŸåŸå› å¾ˆç®€å•ï¼Œæˆ‘ä»¬åœ¨useEffectä¸­è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™å½¢æˆäº†ä¸€ä¸ªé—­åŒ…ï¼Œè¿™èƒ½ä¿è¯æˆ‘ä»¬ä¸Šä¸€æ¬¡æ‰§è¡Œå‡½æ•°å­˜å‚¨çš„å˜é‡ä¸è¢«é”€æ¯å’Œæ±¡æŸ“ã€‚<br>ä½ å¯ä»¥å°è¯•ä¸‹é¢çš„ä»£ç å¯èƒ½æ›´å¥½ç†è§£<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> flag = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> clean;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">effect</span>(<span class="params">flag</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(flag);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">clean = effect(flag);</span><br><span class="line">flag = <span class="number">2</span>;</span><br><span class="line">clean();</span><br><span class="line">clean = effect(flag);</span><br><span class="line">flag = <span class="number">3</span>;</span><br><span class="line">clean();</span><br><span class="line">clean = effect(flag);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œç»“æœ</span></span><br><span class="line"></span><br><span class="line">effect... <span class="number">1</span></span><br><span class="line">clean... <span class="number">1</span></span><br><span class="line">effect... <span class="number">2</span></span><br><span class="line">clean... <span class="number">2</span></span><br><span class="line">effect... <span class="number">3</span></span><br></pre></td></tr></table></figure></div></p><h4 id="æ¨¡æ‹ŸcomponentDidMount"><a href="#æ¨¡æ‹ŸcomponentDidMount" class="headerlink" title="æ¨¡æ‹ŸcomponentDidMount"></a>æ¨¡æ‹ŸcomponentDidMount</h4><p>componentDidMountç­‰ä»·äºuseEffectçš„å›è°ƒä»…åœ¨é¡µé¢åˆå§‹åŒ–å®Œæˆåæ‰§è¡Œä¸€æ¬¡ï¼Œå½“useEffectçš„ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„æ—¶å¯ä»¥å®ç°è¿™ä¸ªæ•ˆæœã€‚<br>function useDidMount(callback) {<br>  useEffect(callback, []);<br>}<br>å®˜æ–¹ä¸æ¨èä¸Šé¢è¿™ç§å†™æ³•ï¼Œå› ä¸ºè¿™æœ‰å¯èƒ½å¯¼è‡´ä¸€äº›é”™è¯¯ã€‚</p><h4 id="æ¨¡æ‹ŸcomponentWillUnmount"><a href="#æ¨¡æ‹ŸcomponentWillUnmount" class="headerlink" title="æ¨¡æ‹ŸcomponentWillUnmount"></a>æ¨¡æ‹ŸcomponentWillUnmount</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useUnMount</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> callback, []);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>ä¸åƒ componentDidMount æˆ–è€… componentDidUpdateï¼ŒuseEffect ä¸­ä½¿ç”¨çš„ effect å¹¶ä¸ä¼šé˜»æ»æµè§ˆå™¨æ¸²æŸ“é¡µé¢ã€‚è¿™è®©ä½ çš„ app çœ‹èµ·æ¥æ›´åŠ æµç•…ã€‚</p><h4 id="ref-Hook"><a href="#ref-Hook" class="headerlink" title="ref Hook"></a>ref Hook</h4><p>ä½¿ç”¨useRef Hookï¼Œä½ å¯ä»¥è½»æ¾çš„è·å–åˆ°domçš„refã€‚<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Input</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> inputEl = useRef(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> onButtonClick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    inputEl.current.focus();</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input ref=&#123;inputEl&#125; type=<span class="string">"text"</span> /&gt;</span><br><span class="line">      &lt;button onClick=&#123;onButtonClick&#125;&gt;Focus the input&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><p>æ³¨æ„useRef()å¹¶ä¸ä»…ä»…å¯ä»¥ç”¨æ¥å½“ä½œè·å–refä½¿ç”¨ï¼Œä½¿ç”¨useRefäº§ç”Ÿçš„refçš„currentå±æ€§æ˜¯å¯å˜çš„ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨å®ƒæ¥ä¿å­˜ä¸€ä¸ªä»»æ„å€¼ã€‚</p><h4 id="æ¨¡æ‹ŸcomponentDidUpdate"><a href="#æ¨¡æ‹ŸcomponentDidUpdate" class="headerlink" title="æ¨¡æ‹ŸcomponentDidUpdate"></a>æ¨¡æ‹ŸcomponentDidUpdate</h4><p>componentDidUpdateå°±ç›¸å½“äºé™¤å»ç¬¬ä¸€æ¬¡è°ƒç”¨çš„useEffectï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©useRefç”Ÿæˆä¸€ä¸ªæ ‡è¯†ï¼Œæ¥è®°å½•æ˜¯å¦ä¸ºç¬¬ä¸€æ¬¡æ‰§è¡Œï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useDidUpdate</span>(<span class="params">callback, prop</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> init = useRef(<span class="literal">true</span>);</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (init.current) &#123;</span><br><span class="line">      init.current = <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> callback();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, prop);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><h2 id="ä½¿ç”¨Hookçš„æ³¨æ„äº‹é¡¹"><a href="#ä½¿ç”¨Hookçš„æ³¨æ„äº‹é¡¹" class="headerlink" title="ä½¿ç”¨Hookçš„æ³¨æ„äº‹é¡¹"></a>ä½¿ç”¨Hookçš„æ³¨æ„äº‹é¡¹</h2><h3 id="ä½¿ç”¨èŒƒå›´"><a href="#ä½¿ç”¨èŒƒå›´" class="headerlink" title="ä½¿ç”¨èŒƒå›´"></a>ä½¿ç”¨èŒƒå›´</h3><p>åªèƒ½åœ¨Reactå‡½æ•°å¼ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookä¸­ä½¿ç”¨Hookã€‚<br>Hookçš„æå‡ºä¸»è¦å°±æ˜¯ä¸ºäº†è§£å†³classç»„ä»¶çš„ä¸€ç³»åˆ—é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½åœ¨classç»„ä»¶ä¸­ä½¿ç”¨å®ƒã€‚</p><h3 id="å£°æ˜çº¦æŸ"><a href="#å£°æ˜çº¦æŸ" class="headerlink" title="å£°æ˜çº¦æŸ"></a>å£°æ˜çº¦æŸ</h3><p>ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨Hookã€‚<br>Hooké€šè¿‡æ•°ç»„å®ç°çš„ï¼Œæ¯æ¬¡useState éƒ½ä¼šæ”¹å˜ä¸‹æ ‡ï¼ŒReactéœ€è¦åˆ©ç”¨è°ƒç”¨é¡ºåºæ¥æ­£ç¡®æ›´æ–°ç›¸åº”çš„çŠ¶æ€ï¼Œå¦‚æœuseState è¢«åŒ…è£¹å¾ªç¯æˆ–æ¡ä»¶è¯­å¥ä¸­ï¼Œé‚£æ¯å°±å¯èƒ½ä¼šå¼•èµ·è°ƒç”¨é¡ºåºçš„é”™ä¹±ï¼Œä»è€Œé€ æˆæ„æƒ³ä¸åˆ°çš„é”™è¯¯ã€‚<br>æˆ‘ä»¬å¯ä»¥å®‰è£…ä¸€ä¸ªeslintæ’ä»¶æ¥å¸®åŠ©æˆ‘ä»¬é¿å…è¿™äº›é—®é¢˜ã€‚<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®‰è£…</span></span><br><span class="line">npm install eslint-plugin-react-hooks --save-dev</span><br><span class="line"><span class="comment">// é…ç½®</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"plugins"</span>: [</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="string">"react-hooks"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"rules"</span>: &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="string">"react-hooks/rules-of-hooks"</span>: <span class="string">"error"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><h2 id="è‡ªå®šä¹‰Hook"><a href="#è‡ªå®šä¹‰Hook" class="headerlink" title="è‡ªå®šä¹‰Hook"></a>è‡ªå®šä¹‰Hook</h2><p>åƒä¸Šé¢ä»‹ç»çš„HOCå’Œmixinä¸€æ ·ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥é€šè¿‡è‡ªå®šä¹‰çš„Hookå°†ç»„ä»¶ä¸­ç±»ä¼¼çš„çŠ¶æ€é€»è¾‘æŠ½å–å‡ºæ¥ã€‚<br>è‡ªå®šä¹‰Hookéå¸¸ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”æŠŠç›¸åº”éœ€è¦çš„çŠ¶æ€å’Œeffectå°è£…è¿›å»ï¼ŒåŒæ—¶ï¼ŒHookä¹‹é—´ä¹Ÿæ˜¯å¯ä»¥ç›¸äº’å¼•ç”¨çš„ã€‚ä½¿ç”¨useå¼€å¤´å‘½åè‡ªå®šä¹‰Hookï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿eslintè¿›è¡Œæ£€æŸ¥ã€‚<br>ä¸‹é¢æˆ‘ä»¬çœ‹å‡ ä¸ªå…·ä½“çš„Hookå°è£…ï¼š</p><h3 id="æ—¥å¿—æ‰“ç‚¹-1"><a href="#æ—¥å¿—æ‰“ç‚¹-1" class="headerlink" title="æ—¥å¿—æ‰“ç‚¹"></a>æ—¥å¿—æ‰“ç‚¹</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šé¢å°è£…çš„ç”Ÿå‘½å‘¨æœŸHookã€‚<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> useLogger = <span class="function">(<span class="params">componentName, ...params</span>) =&gt;</span> &#123;</span><br><span class="line">  useDidMount(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;componentName&#125;</span>åˆå§‹åŒ–`</span>, ...params);</span><br><span class="line">  &#125;);</span><br><span class="line">  useUnMount(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;componentName&#125;</span>å¸è½½`</span>, ...params);</span><br><span class="line">  &#125;)</span><br><span class="line">  useDidUpdate(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;componentName&#125;</span>æ›´æ–°`</span>, ...params);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Page1</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">  useLogger(<span class="string">'Page1'</span>,props);</span><br><span class="line">  <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><h3 id="ä¿®æ”¹title"><a href="#ä¿®æ”¹title" class="headerlink" title="ä¿®æ”¹title"></a>ä¿®æ”¹title</h3><p>æ ¹æ®ä¸åŒçš„é¡µé¢åç§°ä¿®æ”¹é¡µé¢title:<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useTitle</span>(<span class="params">title</span>) </span>&#123;</span><br><span class="line">  useEffect(</span><br><span class="line">    () =&gt; &#123;</span><br><span class="line">      <span class="built_in">document</span>.title = title;</span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> (<span class="built_in">document</span>.title = <span class="string">"ä¸»é¡µ"</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    [title]</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Page1</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">  useTitle(<span class="string">'Page1'</span>);</span><br><span class="line">  <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><h3 id="åŒå‘ç»‘å®š-1"><a href="#åŒå‘ç»‘å®š-1" class="headerlink" title="åŒå‘ç»‘å®š"></a>åŒå‘ç»‘å®š</h3><p>æˆ‘ä»¬å°†è¡¨å•onChangeçš„é€»è¾‘æŠ½å–å‡ºæ¥å°è£…æˆä¸€ä¸ªHookï¼Œè¿™æ ·æ‰€æœ‰éœ€è¦è¿›è¡ŒåŒå‘ç»‘å®šçš„è¡¨å•ç»„ä»¶éƒ½å¯ä»¥è¿›è¡Œå¤ç”¨ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useBind</span>(<span class="params">init</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> [value, setValue] = useState(init);</span><br><span class="line">  <span class="keyword">let</span> onChange = useCallback(<span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    setValue(event.currentTarget.value);</span><br><span class="line">  &#125;, []);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    value,</span><br><span class="line">    onChange</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Page1</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> value = useBind(<span class="string">''</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">input</span> &#123;<span class="attr">...value</span>&#125; /&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><p>å½“ç„¶ï¼Œä½ å¯ä»¥å‘ä¸Šé¢çš„HOCé‚£æ ·ï¼Œç»“åˆcontextå’Œformæ¥å°è£…ä¸€ä¸ªæ›´é€šç”¨çš„åŒå‘ç»‘å®šï¼Œæœ‰å…´è¶£å¯ä»¥æ‰‹åŠ¨å®ç°ä¸€ä¸‹ã€‚</p><h2 id="ä½¿ç”¨Hookçš„åŠ¨æœº"><a href="#ä½¿ç”¨Hookçš„åŠ¨æœº" class="headerlink" title="ä½¿ç”¨Hookçš„åŠ¨æœº"></a>ä½¿ç”¨Hookçš„åŠ¨æœº</h2><h3 id="å‡å°‘çŠ¶æ€é€»è¾‘å¤ç”¨çš„é£é™©"><a href="#å‡å°‘çŠ¶æ€é€»è¾‘å¤ç”¨çš„é£é™©" class="headerlink" title="å‡å°‘çŠ¶æ€é€»è¾‘å¤ç”¨çš„é£é™©"></a>å‡å°‘çŠ¶æ€é€»è¾‘å¤ç”¨çš„é£é™©</h3><p>Hookå’ŒMixinåœ¨ç”¨æ³•ä¸Šæœ‰ä¸€å®šçš„ç›¸ä¼¼ä¹‹å¤„ï¼Œä½†æ˜¯Mixinå¼•å…¥çš„é€»è¾‘å’ŒçŠ¶æ€æ˜¯å¯ä»¥ç›¸äº’è¦†ç›–çš„ï¼Œè€Œå¤šä¸ªHookä¹‹é—´äº’ä¸å½±å“ï¼Œè¿™è®©æˆ‘ä»¬ä¸éœ€è¦åœ¨æŠŠä¸€éƒ¨åˆ†ç²¾åŠ›æ”¾åœ¨é˜²æ­¢é¿å…é€»è¾‘å¤ç”¨çš„å†²çªä¸Šã€‚<br>åœ¨ä¸éµå®ˆçº¦å®šçš„æƒ…å†µä¸‹ä½¿ç”¨HOCä¹Ÿæœ‰å¯èƒ½å¸¦æ¥ä¸€å®šå†²çªï¼Œæ¯”å¦‚propsè¦†ç›–ç­‰ç­‰ï¼Œä½¿ç”¨Hookåˆ™å¯ä»¥é¿å…è¿™äº›é—®é¢˜ã€‚</p><h3 id="é¿å…åœ°ç‹±å¼åµŒå¥—"><a href="#é¿å…åœ°ç‹±å¼åµŒå¥—" class="headerlink" title="é¿å…åœ°ç‹±å¼åµŒå¥—"></a>é¿å…åœ°ç‹±å¼åµŒå¥—</h3><p>å¤§é‡ä½¿ç”¨HOCçš„æƒ…å†µä¸‹è®©æˆ‘ä»¬çš„ä»£ç å˜å¾—åµŒå¥—å±‚çº§éå¸¸æ·±ï¼Œä½¿ç”¨Hookï¼Œæˆ‘ä»¬å¯ä»¥å®ç°æ‰å¹³å¼çš„çŠ¶æ€é€»è¾‘å¤ç”¨ï¼Œè€Œé¿å…äº†å¤§é‡çš„ç»„ä»¶åµŒå¥—ã€‚</p><h3 id="è®©ç»„ä»¶æ›´å®¹æ˜“ç†è§£"><a href="#è®©ç»„ä»¶æ›´å®¹æ˜“ç†è§£" class="headerlink" title="è®©ç»„ä»¶æ›´å®¹æ˜“ç†è§£"></a>è®©ç»„ä»¶æ›´å®¹æ˜“ç†è§£</h3><p>åœ¨ä½¿ç”¨classç»„ä»¶æ„å»ºæˆ‘ä»¬çš„ç¨‹åºæ—¶ï¼Œä»–ä»¬å„è‡ªæ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€ï¼Œä¸šåŠ¡é€»è¾‘çš„å¤æ‚ä½¿è¿™äº›ç»„ä»¶å˜å¾—è¶Šæ¥è¶Šåºå¤§ï¼Œå„ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ä¼šè°ƒç”¨è¶Šæ¥è¶Šå¤šçš„é€»è¾‘ï¼Œè¶Šæ¥è¶Šéš¾ä»¥ç»´æŠ¤ã€‚ä½¿ç”¨Hookï¼Œå¯ä»¥è®©ä½ æ›´å¤§é™åº¦çš„å°†å…¬ç”¨é€»è¾‘æŠ½ç¦»ï¼Œå°†ä¸€ä¸ªç»„ä»¶åˆ†å‰²æˆæ›´å°çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯å¼ºåˆ¶åŸºäºç”Ÿå‘½å‘¨æœŸæ–¹æ³•è¿›è¡Œåˆ†å‰²ã€‚</p><h3 id="ä½¿ç”¨å‡½æ•°ä»£æ›¿class"><a href="#ä½¿ç”¨å‡½æ•°ä»£æ›¿class" class="headerlink" title="ä½¿ç”¨å‡½æ•°ä»£æ›¿class"></a>ä½¿ç”¨å‡½æ•°ä»£æ›¿class</h3><p>ç›¸æ¯”å‡½æ•°ï¼Œç¼–å†™ä¸€ä¸ªclasså¯èƒ½éœ€è¦æŒæ¡æ›´å¤šçš„çŸ¥è¯†ï¼Œéœ€è¦æ³¨æ„çš„ç‚¹ä¹Ÿè¶Šå¤šï¼Œæ¯”å¦‚thisæŒ‡å‘ã€ç»‘å®šäº‹ä»¶ç­‰ç­‰ã€‚å¦å¤–ï¼Œè®¡ç®—æœºç†è§£ä¸€ä¸ªå‡½æ•°æ¯”ç†è§£ä¸€ä¸ªclassæ›´å¿«ã€‚Hooksè®©ä½ å¯ä»¥åœ¨classesä¹‹å¤–ä½¿ç”¨æ›´å¤šReactçš„æ–°ç‰¹æ€§ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="React" scheme="/categories/React/"/>
    
    
      <category term="React" scheme="/tags/React/"/>
    
      <category term="Hooks" scheme="/tags/Hooks/"/>
    
      <category term="HOC" scheme="/tags/HOC/"/>
    
      <category term="Mixin" scheme="/tags/Mixin/"/>
    
  </entry>
  
  <entry>
    <title>flutteræ‰“åŒ…--Android</title>
    <link href="/2020/01/14/flutter%E6%89%93%E5%8C%85--Android/"/>
    <id>/2020/01/14/flutteræ‰“åŒ…--Android/</id>
    <published>2020-01-14T08:22:51.000Z</published>
    <updated>2020-02-15T12:29:48.510Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="é¡¹ç›®å›¾ç‰‡"><a href="#é¡¹ç›®å›¾ç‰‡" class="headerlink" title="é¡¹ç›®å›¾ç‰‡"></a>é¡¹ç›®å›¾ç‰‡</h2><p>/android/app/src/main/res/ ç›®å½•ä¸‹æ ¹æ®mipmap-ä¸ºå‰ç¼€æ–‡ä»¶å¤¹å­˜å…¥ç›¸åº”dpiçš„pngå›¾ç‰‡</p><h2 id="é…ç½®APPåç§°ã€å›¾æ ‡å’Œç³»ç»Ÿæƒé™"><a href="#é…ç½®APPåç§°ã€å›¾æ ‡å’Œç³»ç»Ÿæƒé™" class="headerlink" title="é…ç½®APPåç§°ã€å›¾æ ‡å’Œç³»ç»Ÿæƒé™"></a>é…ç½®APPåç§°ã€å›¾æ ‡å’Œç³»ç»Ÿæƒé™</h2><p>åœ¨ /android/app/src/main/AndroidManifest.xmlç›®å½•ä¸‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">android:label=<span class="string">"Appåå­—"</span></span><br><span class="line">android:icon=<span class="string">"@mipmap/ic_launcher"</span>  <span class="comment">//æ­¤å±æ€§ä¸ºAPPå›¾æ ‡ç”¨åˆ°çš„å›¾ç‰‡åç§°</span></span><br></pre></td></tr></table></figure></div><h2 id="APPæ³¨å†Œ"><a href="#APPæ³¨å†Œ" class="headerlink" title="APPæ³¨å†Œ"></a>APPæ³¨å†Œ</h2><p>å°†keytoolæ‰€åœ¨è·¯å¾„æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡,é»˜è®¤æ˜¯åœ¨  C:\Program Files\Android\Android Studio\jre\bin  ä¸‹é¢ï¼Œç„¶åå°†ç”Ÿæˆçš„keyå­˜å‚¨åˆ°eç›˜æ ¹ç›®å½•</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -genkey -v -keystore e:/key.jks -keyalg RSA -keysize <span class="number">2048</span> -validity <span class="number">100000</span> -alias key</span><br></pre></td></tr></table></figure></div><p>å›è½¦ä»¥åä¼šè®©ä½ è¾“å…¥å¯¹åº”çš„ä¿¡æ¯ï¼Œå…¶ä¸­å¯†åŒ™ä¸€å®šè¦è®°ä½ï¼Œæ¥ä¸‹æ¥åˆ°é¡¹ç›®ç›®å½•çš„androidæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºkey.propertiesçš„æ–‡ä»¶ï¼Œå¹¶æ‰“å¼€è´´å…¥ä»¥ä¸‹ä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">storePassword=åˆ›å»ºKEYæ—¶è¾“å…¥çš„å¯†é’¥åº“å¯†ç </span><br><span class="line">keyPassword=åˆ›å»ºKEYæ—¶è¾“å…¥çš„å¯†é’¥å¯†ç     </span><br><span class="line">keyAlias=key</span><br><span class="line">storeFile=e:/key.jks</span><br></pre></td></tr></table></figure></div><h2 id="é…ç½®keyæ³¨å†Œ"><a href="#é…ç½®keyæ³¨å†Œ" class="headerlink" title="é…ç½®keyæ³¨å†Œ"></a>é…ç½®keyæ³¨å†Œ</h2><p>æ‰“å¼€/android/app/build.gradleæ–‡ä»¶ï¼Œåœ¨ android { è¿™ä¸€è¡Œå‰é¢ï¼ŒåŠ å…¥ä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">defkeystorePropertiesFile=rootProject.file(<span class="string">"key.properties"</span>)</span><br><span class="line">defkeystoreProperties=newProperties()</span><br><span class="line">keystoreProperties.load(newFileInputStream(keystorePropertiesFile))</span><br></pre></td></tr></table></figure></div><p>æŠŠå¦‚ä¸‹ä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">buildTypes &#123;</span><br><span class="line">   release &#123;</span><br><span class="line">       signingConfig signingConfigs.debug</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>æ›¿æ¢æˆï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">signingConfigs &#123;</span><br><span class="line">   release &#123;</span><br><span class="line">       keyAlias keystoreProperties[<span class="string">'keyAlias'</span>]</span><br><span class="line">       keyPassword keystoreProperties[<span class="string">'keyPassword'</span>]</span><br><span class="line">       <span class="function">storeFile <span class="title">file</span><span class="params">(keystoreProperties[<span class="string">'storeFile'</span>])</span></span></span><br><span class="line"><span class="function">       storePassword keystoreProperties['storePassword']</span></span><br><span class="line"><span class="function">   &#125;</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">buildTypes </span>&#123;</span><br><span class="line">   release &#123;</span><br><span class="line">       signingConfig signingConfigs.release</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>åˆ°defaultConfigä¸­ï¼Œå½•å…¥APPIDå’Œç‰ˆæœ¬å·ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">defaultConfig &#123;</span><br><span class="line">        <span class="comment">// APPID</span></span><br><span class="line">       applicationId <span class="string">"com.example.myflutter"</span></span><br><span class="line">       <span class="comment">// å¯è¿è¡Œåº”ç”¨çš„æœ€ä½ç‰ˆæœ¬çš„ Android å¹³å°ï¼Œç”±è¯¥å¹³å°çš„ API çº§åˆ«æ ‡è¯†ç¬¦æŒ‡å®š</span></span><br><span class="line">       minSdkVersion <span class="number">16</span></span><br><span class="line">       <span class="comment">// æŒ‡å®šè¿è¡Œåº”ç”¨çš„ç›®æ ‡ API çº§åˆ«ã€‚</span></span><br><span class="line">       <span class="comment">// åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™å…è®¸åº”ç”¨ä½¿ç”¨åœ¨ç›®æ ‡ API çº§åˆ«ä¸­å®šä¹‰çš„æ¸…å•å…ƒç´ æˆ–è¡Œä¸ºï¼Œ</span></span><br><span class="line">       <span class="comment">// è€Œä¸æ˜¯ä»…é™äºä½¿ç”¨é‚£äº›é’ˆå¯¹æœ€ä½ API çº§åˆ«å®šä¹‰çš„å…ƒç´ æˆ–è¡Œä¸ºã€‚</span></span><br><span class="line">       targetSdkVersion <span class="number">27</span></span><br><span class="line">       <span class="comment">//å†…éƒ¨ç‰ˆæœ¬å·</span></span><br><span class="line">       versionCode <span class="number">1</span></span><br><span class="line">       <span class="comment">//å¯¹å¤–å…¬å¸ƒçš„ç‰ˆæœ¬å·</span></span><br><span class="line">       versionName <span class="string">"1.0"</span></span><br><span class="line">       testInstrumentationRunner <span class="string">"android.support.test.runner.AndroidJUnitRunner"</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></div><h2 id="ç¼–è¯‘ç”Ÿæˆapkæ–‡ä»¶"><a href="#ç¼–è¯‘ç”Ÿæˆapkæ–‡ä»¶" class="headerlink" title="ç¼–è¯‘ç”Ÿæˆapkæ–‡ä»¶"></a>ç¼–è¯‘ç”Ÿæˆapkæ–‡ä»¶</h2><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter build apk</span><br></pre></td></tr></table></figure></div><h2 id="å®‰è£…åˆ°æ‰‹æœº"><a href="#å®‰è£…åˆ°æ‰‹æœº" class="headerlink" title="å®‰è£…åˆ°æ‰‹æœº"></a>å®‰è£…åˆ°æ‰‹æœº</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cmake</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter <span class="keyword">install</span> .</span><br></pre></td></tr></table></figure></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="Flutter" scheme="/categories/Flutter/"/>
    
    
      <category term="Flutter" scheme="/tags/Flutter/"/>
    
      <category term="Android" scheme="/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>flutterçŠ¶æ€ç®¡ç†ä¹‹flutter_redux</title>
    <link href="/2019/12/31/flutter%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E4%B9%8Bflutter_redux/"/>
    <id>/2019/12/31/flutterçŠ¶æ€ç®¡ç†ä¹‹flutter_redux/</id>
    <published>2019-12-31T04:13:03.000Z</published>
    <updated>2020-02-15T11:58:37.598Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="ä¸€ã€åˆ›å»ºå…¨å±€state"><a href="#ä¸€ã€åˆ›å»ºå…¨å±€state" class="headerlink" title="ä¸€ã€åˆ›å»ºå…¨å±€state"></a>ä¸€ã€åˆ›å»ºå…¨å±€state</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">dart</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// state.dart</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:nicolas/redux/user/login_redux.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:nicolas/redux/user/user_redux.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:nicolas/redux/middleware/epic_middleware.dart'</span>; <span class="comment">// åœ¨é¡¹ç›®ä¸­å¼•å…¥epic_middlewareä¸­é—´ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:redux/redux.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GlobalState</span> </span>&#123; <span class="comment">// å…¨å±€Reduxå¯¹è±¡ï¼Œä¿å­˜Stateæ•°æ®</span></span><br><span class="line">  <span class="built_in">bool</span> login; <span class="comment">// ç™»é™†çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">  GlobalState(&#123;<span class="keyword">this</span>.login&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å®šä¹‰appReduceråˆ›å»º storeï¼Œé€šè¿‡ appReducer å°† GlobalState å†…çš„login å’Œ å¯¹åº”çš„action å…³è”åœ¨ä¸€èµ·</span></span><br><span class="line">GlobalState appReducer(GlobalState state, action) &#123;</span><br><span class="line">  <span class="keyword">return</span> GlobalState(</span><br><span class="line">    login: loginReducer(state.login, action),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="built_in">List</span>&lt;Middleware&lt;GlobalState&gt;&gt; middleware = [</span><br><span class="line">  EpicMiddleware&lt;GlobalState&gt;(LoginEpic()),</span><br><span class="line">  LoginMiddleware(),</span><br><span class="line">];</span><br></pre></td></tr></table></figure></div><h3 id="äºŒã€åˆ›å»ºloginçš„stateç®¡ç†"><a href="#äºŒã€åˆ›å»ºloginçš„stateç®¡ç†" class="headerlink" title="äºŒã€åˆ›å»ºloginçš„stateç®¡ç†"></a>äºŒã€åˆ›å»ºloginçš„stateç®¡ç†</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">dart</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:nicolas/redux/state.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:nicolas/redux/middleware/epic.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:nicolas/redux/middleware/epic_store.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:redux/redux.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> loginReducer = combineReducers&lt;<span class="built_in">bool</span>&gt;([</span><br><span class="line">  TypedReducer&lt;<span class="built_in">bool</span>, LoginSuccessAction&gt;(_loginResult),</span><br><span class="line">  TypedReducer&lt;<span class="built_in">bool</span>, LogoutAction&gt;(_logoutResult),</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> _loginResult(<span class="built_in">bool</span> result, LoginSuccessAction action) &#123;</span><br><span class="line">  <span class="keyword">if</span> (action.success == <span class="keyword">true</span>) &#123;</span><br><span class="line">    <span class="comment">// ç™»é™†æˆåŠŸä»¥å....</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> action.success;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// LoginSuccessActionè§¦å‘ï¼Œå°±ä¼šè°ƒç”¨åˆ° _loginResultï¼Œå®ƒæ¥å—ä¸€ä¸ªæ–°çš„stateï¼Œå¹¶è¿”å›</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginSuccessAction</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> BuildContext context;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">bool</span> success;</span><br><span class="line"></span><br><span class="line">  LoginSuccessAction(<span class="keyword">this</span>.context, <span class="keyword">this</span>.success);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginAction</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> BuildContext context;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> user;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> password;</span><br><span class="line"></span><br><span class="line">  LoginAction(<span class="keyword">this</span>.context, <span class="keyword">this</span>.user, <span class="keyword">this</span>.password);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginMiddleware</span> <span class="keyword">implements</span> <span class="title">MiddlewareClass</span>&lt;<span class="title">GlobalState</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> call(Store&lt;GlobalState&gt; store, <span class="built_in">dynamic</span> action, NextDispatcher next) &#123;</span><br><span class="line">    <span class="keyword">if</span> (action <span class="keyword">is</span> LogoutAction) &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">'logout'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Make sure to forward actions to the next middleware in the chain!</span></span><br><span class="line">    next(action);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginEpic</span> <span class="keyword">implements</span> <span class="title">EpicClass</span>&lt;<span class="title">GlobalState</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Stream&lt;<span class="built_in">dynamic</span>&gt; call(Stream&lt;<span class="built_in">dynamic</span>&gt; actions, EpicStore&lt;GlobalState&gt; store) &#123;</span><br><span class="line">    <span class="keyword">return</span> Observable(actions)</span><br><span class="line">        .whereType&lt;LoginAction&gt;()</span><br><span class="line">        .switchMap((action) =&gt; _loginIn(action, store));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Stream&lt;<span class="built_in">dynamic</span>&gt; _loginIn(</span><br><span class="line">      LoginAction action, EpicStore&lt;GlobalState&gt; store) <span class="keyword">async</span>* &#123;</span><br><span class="line">    <span class="keyword">var</span> res = <span class="keyword">await</span> UserDio.login( <span class="comment">// ç™»é™†è¯·æ±‚</span></span><br><span class="line">        action.user.trim(), action.password.trim(), store);</span><br><span class="line">    <span class="keyword">yield</span> LoginSuccessAction(action.context, (res != <span class="keyword">null</span> &amp;&amp; res.result)); <span class="comment">// ç™»é™†è¯·æ±‚ç»“æœå¤„ç†</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="ä¸‰ã€æ³¨å†Œå…¨å±€state"><a href="#ä¸‰ã€æ³¨å†Œå…¨å±€state" class="headerlink" title="ä¸‰ã€æ³¨å†Œå…¨å±€state"></a>ä¸‰ã€æ³¨å†Œå…¨å±€state</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">dart</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:nicolas/redux/state.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:nicolas/app.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:nicolas/page/user/login.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_redux/flutter_redux.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:nicolas/common/utils/navigator.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:fluttertoast/fluttertoast.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:redux/redux.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'common/event/index.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:nicolas/common/event/http_error_event.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:nicolas/common/http/code.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(FlutterReduxApp());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlutterReduxApp</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _FlutterReduxAppState createState() =&gt; _FlutterReduxAppState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_FlutterReduxAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">FlutterReduxApp</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="title">with</span> <span class="title">HttpErrorListener</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> store = <span class="keyword">new</span> Store&lt;GlobalState&gt;(appReducer,</span><br><span class="line">      middleware: middleware,</span><br><span class="line">      initialState: <span class="keyword">new</span> GlobalState( <span class="comment">// åˆå§‹åŒ–stateæ•°æ®</span></span><br><span class="line">        login: <span class="keyword">false</span>,</span><br><span class="line">      ));</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> StoreProvider(</span><br><span class="line">      store: store, <span class="comment">// æŒ‚è½½store</span></span><br><span class="line">      child: <span class="keyword">new</span> StoreBuilder&lt;GlobalState&gt;(builder: (context, store) &#123;</span><br><span class="line">        <span class="keyword">return</span> Text(<span class="string">'xxxx);</span></span><br><span class="line"><span class="string">      &#125;),</span></span><br><span class="line"><span class="string">    );</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure></div><h3 id="å››ã€ä½¿ç”¨state"><a href="#å››ã€ä½¿ç”¨state" class="headerlink" title="å››ã€ä½¿ç”¨state"></a>å››ã€ä½¿ç”¨state</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">dart</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">    child: <span class="keyword">new</span> StoreConnector&lt;GlobalState, <span class="built_in">bool</span>&gt;(</span><br><span class="line">        converter: (store) =&gt; store.state.login,</span><br><span class="line">        builder: (context, login) &#123;</span><br><span class="line">            <span class="keyword">return</span> Text(login.toString());</span><br><span class="line">        &#125;,</span><br><span class="line">    )</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="Flutter" scheme="/categories/Flutter/"/>
    
    
      <category term="Flutter" scheme="/tags/Flutter/"/>
    
      <category term="è·¨å¹³å°" scheme="/tags/%E8%B7%A8%E5%B9%B3%E5%8F%B0/"/>
    
  </entry>
  
  <entry>
    <title>iosèƒŒæ™¯éŸ³ä¹autoplay</title>
    <link href="/2019/06/01/ios%E8%83%8C%E6%99%AF%E9%9F%B3%E4%B9%90autoplay/"/>
    <id>/2019/06/01/iosèƒŒæ™¯éŸ³ä¹autoplay/</id>
    <published>2019-06-01T04:26:29.000Z</published>
    <updated>2020-02-15T11:58:37.598Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å‰ç«¯é¡µé¢audioæ— æ³•è‡ªåŠ¨æ’­æ”¾è¿™ä¸ªåœ¨ IOS/Android ä¸Šé¢ç›®å‰å·²ç»æ˜¯ä¸ªæƒ¯ä¾‹ï¼Œå¦‚æœè°ƒç”¨audio.playå¿…é¡»åœ¨äº‹ä»¶é‡Œé¢å“åº”ï¼Œæ¢å¥è¯è¯´ï¼Œç”¨æˆ·è¿˜æ²¡æœ‰äº¤äº’ï¼Œä¸è®©è°ƒplayã€‚ç½‘ä¸Šä¹Ÿæœ‰ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯å¼•å¯¼ç”¨æˆ·è§¦å‘äº‹ä»¶ï¼Œèƒ½è§£å†³autoplayçš„é—®é¢˜ï¼Œä½†æ˜¯å±€é™æ€§å¾ˆå¤§ï¼Œå¦‚æœè¦æ’­æ”¾å¤šä¸ªéŸ³ä¹ä¹Ÿå°±å‡‰å‡‰ï¼ŒåŒæ—¶ä¹Ÿæœ‰AudioContextè§£å†³æ–¹æ¡ˆï¼Œç»è¿‡å°è¯•è¿˜æ˜¯æ²¡è¾¾åˆ°é¢„æœŸï¼Œä¸ªäººåœ¨å…¬å¸é¡¹ç›®ä¸­æœ‰ä¸ªéœ€æ±‚æ˜¯è¿›é¡µé¢æ’­æ”¾èƒŒæ™¯éŸ³ä¹ï¼ŒåŒæ—¶ï¼ŒåŸºäºä¸åŒé˜¶æ®µï¼Œä¼šæ’­æ”¾å„ç§éŸ³æ•ˆï¼Œå› ä¸ºiosç­–ç•¥é™åˆ¶ï¼Œæ‰¾åˆ°å¦‚ä¸‹è§£å†³æ–¹æ¡ˆï¼Œpsï¼šé¡¹ç›®æ˜¯åŸºäºvueçš„</p><h3 id="soundjsçš„å¼•å…¥"><a href="#soundjsçš„å¼•å…¥" class="headerlink" title="soundjsçš„å¼•å…¥"></a>soundjsçš„å¼•å…¥</h3><p>soundjsæ˜¯ä¸“é—¨å¤„ç†éŸ³é¢‘çš„ä¸€ä¸ªjsåº“ï¼Œè¿™é‡Œä¸åšè¿‡å¤šä»‹ç»ï¼Œ<a href="https://www.createjs.com/soundjs" target="_blank" rel="noopener">ä¼ é€é—¨</a> å› ä¸ºé¡¹ç›®æ˜¯åŸºäºvueçš„ï¼Œä½†é—æ†¾çš„æ˜¯soundjsæ²¡æœ‰npmåŒ…ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡å®˜ç½‘æä¾›çš„cdnåœ¨é¡¹ç›®å…¥å£index.htmlé€šè¿‡scriptå¼•å…¥<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"https://code.createjs.com/1.0.0/createjs.min.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></div></p><p>æ‰“å¼€soundjsæºç <br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.createjs=<span class="keyword">this</span>.createjs||&#123;&#125;</span><br><span class="line">......</span><br></pre></td></tr></table></figure></div></p><p>å¯ä»¥çœ‹åˆ°é‡Œé¢åˆ›å»ºäº†ä¸€ä¸ªå«createjsçš„å¯¹è±¡ï¼Œç»‘å®šåœ¨thisä¸Šé¢ï¼Œå½“ç„¶äº†ï¼Œæ ¹æ®ä¸Šä¸‹æ–‡æ¥è®²æ­¤æ—¶çš„thisæŒ‡ä»£çš„æ˜¯windowè€Œä¸æ˜¯vueå®ä¾‹,å› ä¸ºæˆ‘ä»¬æ˜¯åœ¨å…¥å£index.htmlå¼•å…¥çš„ï¼Œç®—æ˜¯å…¨å±€å¼•ç”¨ï¼Œå› æ­¤æˆ‘ä»¬è¦ä½¿ç”¨createjsåªéœ€è¦window.createjså³å¯ã€‚</p><h3 id="ç»‘å®šéŸ³ä¹åˆ—è¡¨"><a href="#ç»‘å®šéŸ³ä¹åˆ—è¡¨" class="headerlink" title="ç»‘å®šéŸ³ä¹åˆ—è¡¨"></a>ç»‘å®šéŸ³ä¹åˆ—è¡¨</h3><p>é¦–å…ˆæˆ‘è¿™é‡Œæœ‰ä¸€ä¸ªéŸ³ä¹åˆ—è¡¨<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">list:</span><br><span class="line">  [</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'a'</span>, <span class="comment">// éŸ³é¢‘åå­—</span></span><br><span class="line">      src: <span class="string">'../../static/a.mp3'</span> <span class="comment">// éŸ³é¢‘è·¯å¾„</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'b'</span>,</span><br><span class="line">      src: <span class="string">'../../static/b.mp3'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'c'</span>,</span><br><span class="line">      src: <span class="string">'../../static/c.mp3'</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure></div></p><p>æ¥ä¸‹æ¥éœ€è¦å°†éŸ³ä¹åˆ—è¡¨ç»‘å®šåˆ°createjså¯¹è±¡ä¸Š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.list.length; i++) &#123;</span><br><span class="line">  <span class="built_in">window</span>.createjs.source || (<span class="built_in">window</span>.createjs.source = &#123;&#125;) <span class="comment">// æ·»åŠ sourceå±æ€§å­˜å‚¨éŸ³ä¹ä¿¡æ¯</span></span><br><span class="line">  <span class="built_in">window</span>.createjs.Sound.registerSound(<span class="keyword">this</span>.list[i].src, <span class="keyword">this</span>.list[i].name) <span class="comment">// ç»‘å®šéŸ³ä¹ä¿¡æ¯åˆ°createjså®ä¾‹</span></span><br><span class="line">  <span class="built_in">window</span>.createjs.source[<span class="keyword">this</span>.list[i].name] = <span class="built_in">window</span>.createjs.Sound.createInstance(<span class="keyword">this</span>.list[i].name) <span class="comment">// åˆ›å»ºæ’­å®ä¾‹ï¼Œæ·»åŠ æ˜ å°„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="éŸ³ä¹æ“ä½œ"><a href="#éŸ³ä¹æ“ä½œ" class="headerlink" title="éŸ³ä¹æ“ä½œ"></a>éŸ³ä¹æ“ä½œ</h3><p>æ¥ä¸‹æ¥åˆ›å»ºä¸‰ä¸ªæ“ä½œéŸ³ä¹çš„æ–¹æ³•</p><h4 id="æ’­æ”¾éŸ³ä¹"><a href="#æ’­æ”¾éŸ³ä¹" class="headerlink" title="æ’­æ”¾éŸ³ä¹"></a>æ’­æ”¾éŸ³ä¹</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">playSound (e, t, f) &#123;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="built_in">window</span>.createjs.source[e]</span><br><span class="line">  i.playState &amp;&amp; i.stop()</span><br><span class="line">  i.play(t)</span><br><span class="line">  f &amp;&amp; f())</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// e: éœ€è¦æ’­æ”¾çš„éŸ³ä¹åå­—ï¼Œè¿™é‡Œå’ŒéŸ³ä¹listé‡Œé¢çš„naneå­—æ®µå¯¹åº”</span></span><br><span class="line"><span class="comment">// t: æ’­æ”¾æ¨¡å¼ï¼Œä¼ å…¥ä¸€ä¸ªå¯¹è±¡&#123;loop: -1&#125; ,-1ä»£è¡¨æ— é™å¾ªç¯ï¼Œ1ä»£è¡¨ä»…æ’­æ”¾ä¸€æ¬¡</span></span><br><span class="line"><span class="comment">// f: callback</span></span><br></pre></td></tr></table></figure></div><h4 id="æš‚åœéŸ³ä¹"><a href="#æš‚åœéŸ³ä¹" class="headerlink" title="æš‚åœéŸ³ä¹"></a>æš‚åœéŸ³ä¹</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pausedSound (e, f) &#123;</span><br><span class="line">    <span class="built_in">window</span>.createjs.source[e].paused = !<span class="built_in">window</span>.createjs.source[e].paused, f &amp;&amp; f()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></div><h4 id="åœæ­¢æ’­æ”¾"><a href="#åœæ­¢æ’­æ”¾" class="headerlink" title="åœæ­¢æ’­æ”¾"></a>åœæ­¢æ’­æ”¾</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">stopSound (e, f) &#123;</span><br><span class="line">   <span class="keyword">return</span> e ? <span class="built_in">window</span>.createjs.source[e].stop() : <span class="built_in">window</span>.createjs.Sound.stop(), f &amp;&amp; f()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h4 id="é™éŸ³"><a href="#é™éŸ³" class="headerlink" title="é™éŸ³"></a>é™éŸ³</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mutedSound () &#123;</span><br><span class="line">    <span class="built_in">window</span>.createjs.Sound.muted = !<span class="built_in">window</span>.createjs.Sound.muted</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="js" scheme="/categories/js/"/>
    
    
      <category term="vue" scheme="/tags/vue/"/>
    
      <category term="webå‰ç«¯" scheme="/tags/web%E5%89%8D%E7%AB%AF/"/>
    
      <category term="audio" scheme="/tags/audio/"/>
    
  </entry>
  
  <entry>
    <title>vue-clié…ç½®å¤šå…¥å£</title>
    <link href="/2019/04/23/vue-cli%E9%85%8D%E7%BD%AE%E5%A4%9A%E5%85%A5%E5%8F%A3/"/>
    <id>/2019/04/23/vue-clié…ç½®å¤šå…¥å£/</id>
    <published>2019-04-23T03:21:55.000Z</published>
    <updated>2020-02-15T11:58:37.599Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>å› å®é™…éœ€è¦ï¼Œåœ¨å…¬å¸ç§»åŠ¨ç«¯é¡¹ç›®ä¸Šçº¿åæœºç»„åšpcç‰ˆï¼Œæ­¤æ—¶ï¼Œå¦‚æœé‡æ–°æ„å»ºä¸€ä¸ªpcé¡¹ç›®çš„è¯ä¸€æ¥ç»´æŠ¤ä¸ä¾¿ï¼ŒäºŒæ¥å¾ˆå¤šå…¬å…±èµ„æºå¯ä»¥é‡å¤åˆ©ç”¨ï¼Œå› æ­¤åœ¨åŸæ¥ç§»åŠ¨ç«¯çš„åŸºç¡€ä¸Šæ„å»ºå¤šå…¥å£ï¼Œå®ç°ä¸€ä¸ªé¡¹ç›®ä¸¤ä¸ªç‰ˆæœ¬ï¼Œç”šè‡³å¤šä¸ª</p></blockquote><h3 id="ä¸€ã€ç›®å½•ç»“æ„åˆ†æ"><a href="#ä¸€ã€ç›®å½•ç»“æ„åˆ†æ" class="headerlink" title="ä¸€ã€ç›®å½•ç»“æ„åˆ†æ"></a>ä¸€ã€ç›®å½•ç»“æ„åˆ†æ</h3><blockquote><p>é…ç½®å¤šå…¥å£å…¶å®å°±æ˜¯å°†pcç‰ˆå’Œæ‰‹æœºç‰ˆå…±ç”¨ä¸€ä¸ªcliï¼Œåœ¨srcç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªentriesç›®å½•ï¼Œé‡Œé¢åˆ†åˆ«åˆ›å»ºpcã€mobileç›®å½•å­˜æ”¾åˆ†åˆ«çš„å…¥å£æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥ï¼Œå°†index.htmlã€main.jsã€App.vueç§»åŠ¨åˆ°pcç›®å½•å¹¶æ”¹åï¼Œæ‰‹æœºç«¯å¤åˆ¶pcæ”¹å</p></blockquote><h4 id="åŸç›®å½•ç»“æ„"><a href="#åŸç›®å½•ç»“æ„" class="headerlink" title="åŸç›®å½•ç»“æ„"></a>åŸç›®å½•ç»“æ„</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">css</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ <span class="selector-tag">README</span><span class="selector-class">.md</span>            é¡¹ç›®ä»‹ç»</span><br><span class="line">â”œâ”€â”€ <span class="selector-tag">index</span><span class="selector-class">.html</span>           å…¥å£é¡µé¢</span><br><span class="line">â”œâ”€â”€ <span class="selector-tag">build</span>              æ„å»ºè„šæœ¬ç›®å½•</span><br><span class="line">â”‚  â”œâ”€â”€ <span class="selector-tag">build-server</span><span class="selector-class">.js</span>         è¿è¡Œæœ¬åœ°æ„å»ºæœåŠ¡å™¨ï¼Œå¯ä»¥è®¿é—®æ„å»ºåçš„é¡µé¢</span><br><span class="line">â”‚  â”œâ”€â”€ <span class="selector-tag">build</span><span class="selector-class">.js</span>            ç”Ÿäº§ç¯å¢ƒæ„å»ºè„šæœ¬</span><br><span class="line">â”‚  â”œâ”€â”€ <span class="selector-tag">dev-client</span><span class="selector-class">.js</span>          å¼€å‘æœåŠ¡å™¨çƒ­é‡è½½è„šæœ¬ï¼Œä¸»è¦ç”¨æ¥å®ç°å¼€å‘é˜¶æ®µçš„é¡µé¢è‡ªåŠ¨åˆ·æ–°</span><br><span class="line">â”‚  â”œâ”€â”€ <span class="selector-tag">dev-server</span><span class="selector-class">.js</span>          è¿è¡Œæœ¬åœ°å¼€å‘æœåŠ¡å™¨</span><br><span class="line">â”‚  â”œâ”€â”€ <span class="selector-tag">utils</span><span class="selector-class">.js</span>            æ„å»ºç›¸å…³å·¥å…·æ–¹æ³•</span><br><span class="line">â”‚  â”œâ”€â”€ <span class="selector-tag">webpack</span><span class="selector-class">.base</span><span class="selector-class">.conf</span><span class="selector-class">.js</span>      <span class="selector-tag">wabpack</span>åŸºç¡€é…ç½®</span><br><span class="line">â”‚  â”œâ”€â”€ <span class="selector-tag">webpack</span><span class="selector-class">.dev</span><span class="selector-class">.conf</span><span class="selector-class">.js</span>       <span class="selector-tag">wabpack</span>å¼€å‘ç¯å¢ƒé…ç½®</span><br><span class="line">â”‚  â””â”€â”€ <span class="selector-tag">webpack</span><span class="selector-class">.prod</span><span class="selector-class">.conf</span><span class="selector-class">.js</span>      <span class="selector-tag">wabpack</span>ç”Ÿäº§ç¯å¢ƒé…ç½®</span><br><span class="line">â”œâ”€â”€ <span class="selector-tag">config</span>             é¡¹ç›®é…ç½®</span><br><span class="line">â”‚  â”œâ”€â”€ <span class="selector-tag">dev</span><span class="selector-class">.env</span><span class="selector-class">.js</span>           å¼€å‘ç¯å¢ƒå˜é‡</span><br><span class="line">â”‚  â”œâ”€â”€ <span class="selector-tag">index</span><span class="selector-class">.js</span>            é¡¹ç›®é…ç½®æ–‡ä»¶</span><br><span class="line">â”‚  â”œâ”€â”€ <span class="selector-tag">prod</span><span class="selector-class">.env</span><span class="selector-class">.js</span>           ç”Ÿäº§ç¯å¢ƒå˜é‡</span><br><span class="line">â”‚  â””â”€â”€ <span class="selector-tag">test</span><span class="selector-class">.env</span><span class="selector-class">.js</span>           æµ‹è¯•ç¯å¢ƒå˜é‡</span><br><span class="line">â”œâ”€â”€ <span class="selector-tag">package</span><span class="selector-class">.json</span>          <span class="selector-tag">npm</span>åŒ…é…ç½®æ–‡ä»¶ï¼Œé‡Œé¢å®šä¹‰äº†é¡¹ç›®çš„<span class="selector-tag">npm</span>è„šæœ¬ï¼Œä¾èµ–åŒ…ç­‰ä¿¡æ¯</span><br><span class="line">â”œâ”€â”€ <span class="selector-tag">src</span>               æºç ç›®å½•  </span><br><span class="line">â”‚  â”œâ”€â”€ <span class="selector-tag">main</span><span class="selector-class">.js</span>             å…¥å£<span class="selector-tag">js</span>æ–‡ä»¶</span><br><span class="line">â”‚  â”œâ”€â”€ <span class="selector-tag">app</span><span class="selector-class">.vue</span>             æ ¹ç»„ä»¶</span><br><span class="line">â”‚  â”œâ”€â”€ <span class="selector-tag">components</span>           å…¬å…±ç»„ä»¶ç›®å½•</span><br><span class="line">â”‚  â”œâ”€â”€ <span class="selector-tag">assets</span>             èµ„æºç›®å½•ï¼Œè¿™é‡Œçš„èµ„æºä¼šè¢«<span class="selector-tag">wabpack</span>æ„å»º</span><br><span class="line">â”‚  â”‚  â””â”€â”€ <span class="selector-tag">images</span></span><br><span class="line">â”‚  â”‚    â””â”€â”€ <span class="selector-tag">logo</span><span class="selector-class">.png</span></span><br><span class="line">â”‚  â”œâ”€â”€ <span class="selector-tag">routes</span>             å‰ç«¯è·¯ç”±</span><br><span class="line">â”‚  â”‚  â””â”€â”€ <span class="selector-tag">index</span><span class="selector-class">.js</span></span><br><span class="line">â”œâ”€â”€ <span class="selector-tag">static</span>             çº¯é™æ€èµ„æºï¼Œä¸ä¼šè¢«<span class="selector-tag">wabpack</span>æ„å»ºã€‚</span><br><span class="line">â””â”€â”€ <span class="selector-tag">test</span>              æµ‹è¯•æ–‡ä»¶ç›®å½•ï¼ˆ<span class="selector-tag">unit</span>&amp;<span class="selector-tag">e2e</span>ï¼‰</span><br><span class="line">  â””â”€â”€ <span class="selector-tag">unit</span>              å•å…ƒæµ‹è¯•</span><br></pre></td></tr></table></figure></div><h4 id="é…ç½®å¤šå…¥å£ç›®å½•"><a href="#é…ç½®å¤šå…¥å£ç›®å½•" class="headerlink" title="é…ç½®å¤šå…¥å£ç›®å½•"></a>é…ç½®å¤šå…¥å£ç›®å½•</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">css</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ <span class="selector-tag">src</span></span><br><span class="line">â”‚  â”œâ”€â”€ <span class="selector-tag">entries</span>        æ–°çš„å…¥å£ç›®å½•</span><br><span class="line">â”‚  â”‚    â”‚â”€â”€ <span class="selector-tag">pc</span>            <span class="selector-tag">pc</span>ç‰ˆå…¥å£æ–‡ç›®å½•</span><br><span class="line">â”‚  â”‚â”‚  â”œâ”€â”€<span class="selector-tag">pc</span><span class="selector-class">.js</span>          <span class="selector-tag">pc</span>ç‰ˆå…¥å£<span class="selector-tag">js</span>(ä»¥å‰çš„<span class="selector-tag">main</span><span class="selector-class">.js</span>)</span><br><span class="line">â”‚  â”‚â”‚  â”œâ”€â”€<span class="selector-tag">pc</span><span class="selector-class">.vue</span>         <span class="selector-tag">pc</span>ç‰ˆå…¥å£<span class="selector-tag">vue</span>(ä»¥å‰çš„<span class="selector-tag">App</span><span class="selector-class">.vue</span>)</span><br><span class="line">â”‚  â”‚â”‚  â””â”€â”€<span class="selector-tag">pc</span><span class="selector-class">.html</span>        <span class="selector-tag">pc</span>ç‰ˆå…¥å£<span class="selector-tag">html</span>(ä»¥å‰çš„<span class="selector-tag">index</span><span class="selector-class">.html</span>)</span><br><span class="line">â”‚  â”‚    â””â”€â”€ <span class="selector-tag">mobile</span>        æ‰‹æœºç‰ˆå…¥å£æ–‡ç›®å½•</span><br><span class="line">â”‚  â”‚   â”œâ”€â”€<span class="selector-tag">mobile</span><span class="selector-class">.js</span>      æ‰‹æœºç‰ˆå…¥å£<span class="selector-tag">js</span>(ä»¥å‰çš„<span class="selector-tag">main</span><span class="selector-class">.js</span>)</span><br><span class="line">â”‚  â”‚   â”œâ”€â”€<span class="selector-tag">mobile</span><span class="selector-class">.vue</span>     æ‰‹æœºç‰ˆå…¥å£<span class="selector-tag">vue</span>(ä»¥å‰çš„<span class="selector-tag">App</span><span class="selector-class">.vue</span>)</span><br><span class="line">â”‚  â”‚   â””â”€â”€<span class="selector-tag">mobile</span><span class="selector-class">.html</span>    æ‰‹æœºç‰ˆå…¥å£<span class="selector-tag">vue</span>(ä»¥å‰çš„<span class="selector-tag">App</span><span class="selector-class">.vue</span>)</span><br><span class="line">â”‚  â””â”€â”€â”€ <span class="selector-tag">router</span>             </span><br><span class="line">â”‚     â”œâ”€â”€<span class="selector-tag">mobile</span><span class="selector-class">.js</span>     æ‰‹æœºç‰ˆè·¯ç”±</span><br><span class="line">â”‚     â””â”€â”€<span class="selector-tag">pc</span><span class="selector-class">.js</span>    <span class="selector-tag">pc</span>ç‰ˆè·¯ç”±</span><br></pre></td></tr></table></figure></div><h3 id="äºŒã€å…¥å£æ–‡ä»¶ä¿®æ”¹"><a href="#äºŒã€å…¥å£æ–‡ä»¶ä¿®æ”¹" class="headerlink" title="äºŒã€å…¥å£æ–‡ä»¶ä¿®æ”¹"></a>äºŒã€å…¥å£æ–‡ä»¶ä¿®æ”¹</h3><p>ä»¥pc.vueä¸ºä¾‹ï¼ŒmobileåŒç†<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">pgsql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Pc <span class="keyword">from</span> <span class="string">'./pc.vue'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'../.././router/pc.js'</span></span><br><span class="line"><span class="built_in">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  router,</span><br><span class="line">  components: &#123; Pc &#125;,</span><br><span class="line">  <span class="keyword">template</span>: <span class="string">'&lt;Pc/&gt;'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div></p><h3 id="ä¸‰ã€ä¿®æ”¹utilsé…ç½®æ–‡ä»¶"><a href="#ä¸‰ã€ä¿®æ”¹utilsé…ç½®æ–‡ä»¶" class="headerlink" title="ä¸‰ã€ä¿®æ”¹utilsé…ç½®æ–‡ä»¶"></a>ä¸‰ã€ä¿®æ”¹utilsé…ç½®æ–‡ä»¶</h3><p>æ‰“å¼€/build/utils.jsåŠ å…¥å¦‚ä¸‹å†…å®¹<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> glob = <span class="built_in">require</span>(<span class="string">'glob'</span>)</span><br><span class="line"><span class="comment">// é¡µé¢æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">var</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="comment">// å–å¾—ç›¸åº”çš„é¡µé¢è·¯å¾„ï¼Œå› ä¸ºä¹‹å‰çš„é…ç½®ï¼Œæ‰€ä»¥æ˜¯srcæ–‡ä»¶å¤¹ä¸‹çš„entriesæ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="keyword">var</span> PAGE_PATH = path.resolve(__dirname, <span class="string">'../src/entries'</span>)</span><br><span class="line">    <span class="comment">// ç”¨äºåšç›¸åº”çš„mergeå¤„ç†</span></span><br><span class="line"><span class="keyword">var</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤šå…¥å£é…ç½®</span></span><br><span class="line"><span class="comment">// é€šè¿‡globæ¨¡å—è¯»å–pageæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰å¯¹åº”æ–‡ä»¶å¤¹ä¸‹çš„jsåç¼€æ–‡ä»¶ï¼Œå¦‚æœè¯¥æ–‡ä»¶å­˜åœ¨</span></span><br><span class="line"><span class="comment">// é‚£ä¹ˆå°±ä½œä¸ºå…¥å£å¤„ç†</span></span><br><span class="line">exports.entries = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> entryFiles = glob.sync(PAGE_PATH + <span class="string">'/*/*.js'</span>)  <span class="comment">// å¯»æ‰¾å…¥å£jsï¼ˆåŸmain.jsï¼‰</span></span><br><span class="line">    <span class="keyword">var</span> map = &#123;&#125;</span><br><span class="line">    entryFiles.forEach(<span class="function">(<span class="params">filePath</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> filename = filePath.substring(filePath.lastIndexOf(<span class="string">'\/'</span>) + <span class="number">1</span>, filePath.lastIndexOf(<span class="string">'.'</span>))</span><br><span class="line">        map[filename] = filePath</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> map</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¤šé¡µé¢è¾“å‡ºé…ç½®</span></span><br><span class="line"><span class="comment">// ä¸ä¸Šé¢çš„å¤šé¡µé¢å…¥å£é…ç½®ç›¸åŒï¼Œè¯»å–pageæ–‡ä»¶å¤¹ä¸‹çš„å¯¹åº”çš„htmlåç¼€æ–‡ä»¶ï¼Œç„¶åæ”¾å…¥æ•°ç»„ä¸­</span></span><br><span class="line">exports.htmlPlugin = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> entryHtml = glob.sync(PAGE_PATH + <span class="string">'/*/*.html'</span>)</span><br><span class="line"><span class="keyword">let</span> arr = []</span><br><span class="line">entryHtml.forEach(<span class="function">(<span class="params">filePath</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> filename = filePath.substring(filePath.lastIndexOf(<span class="string">'\/'</span>) + <span class="number">1</span>, filePath.lastIndexOf(<span class="string">'.'</span>))</span><br><span class="line">    <span class="keyword">let</span> conf = &#123;</span><br><span class="line">        <span class="comment">// æ¨¡æ¿æ¥æº</span></span><br><span class="line">        template: filePath,</span><br><span class="line">        <span class="comment">// æ–‡ä»¶åç§°</span></span><br><span class="line">        filename: filename + <span class="string">'.html'</span>,</span><br><span class="line">        <span class="comment">// é¡µé¢æ¨¡æ¿éœ€è¦åŠ å¯¹åº”çš„jsè„šæœ¬ï¼Œå¦‚æœä¸åŠ è¿™è¡Œåˆ™æ¯ä¸ªé¡µé¢éƒ½ä¼šå¼•å…¥æ‰€æœ‰çš„jsè„šæœ¬</span></span><br><span class="line">        chunks: [<span class="string">'manifest'</span>, <span class="string">'vendor'</span>, filename],</span><br><span class="line">        inject: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</span><br><span class="line">        conf = merge(conf, &#123;</span><br><span class="line">            minify: &#123;</span><br><span class="line">                removeComments: <span class="literal">true</span>,</span><br><span class="line">                collapseWhitespace: <span class="literal">true</span>,</span><br><span class="line">                removeAttributeQuotes: <span class="literal">true</span></span><br><span class="line">            &#125;,</span><br><span class="line">            chunksSortMode: <span class="string">'dependency'</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    arr.push(<span class="keyword">new</span> HtmlWebpackPlugin(conf))</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><h3 id="å››ã€ä¿®æ”¹webpack-dev-conf"><a href="#å››ã€ä¿®æ”¹webpack-dev-conf" class="headerlink" title="å››ã€ä¿®æ”¹webpack.dev.conf"></a>å››ã€ä¿®æ”¹webpack.dev.conf</h3><p>æ‰“å¼€/build/webpack.dev.conf.jsåšå¦‚ä¸‹ä¿®æ”¹ï¼š</p><ol><li><p>æ‰¾åˆ° plugins:æ•°ç»„ï¼Œå°†å¦‚ä¸‹å†…å®¹æ³¨é‡Šæˆ–åˆ é™¤</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">css</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">new</span> <span class="selector-tag">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">  <span class="attribute">filename</span>: <span class="string">'index.html'</span>,</span><br><span class="line">  template: <span class="string">'index.html'</span>,</span><br><span class="line">  inject: true</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure></div></li><li><p>åœ¨pluginsæ•°ç»„ä¸Šæ‹¼æ¥ä¸Šåœ¨utils.jså†…è·å–åˆ°çš„å…¥å£å†…å®¹<br>ä¿®æ”¹å®Œæˆä»¥åçš„pluginså¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">haxe</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">plugins: <span class="type"></span>[</span><br><span class="line">    <span class="keyword">new</span> <span class="type">webpack</span>.DefinePlugin(&#123;</span><br><span class="line">      <span class="string">'process.env'</span>: <span class="type">require</span>(<span class="string">'../config/dev.env'</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="type">webpack</span>.HotModuleReplacementPlugin(),</span><br><span class="line">    <span class="keyword">new</span> <span class="type">webpack</span>.NamedModulesPlugin(), <span class="comment">// HMR shows correct file names in console on update.</span></span><br><span class="line">    <span class="keyword">new</span> <span class="type">webpack</span>.NoEmitOnErrorsPlugin(),</span><br><span class="line">    <span class="comment">// https://github.com/ampedandwired/html-webpack-plugin</span></span><br><span class="line">    <span class="comment">// æ³¨é‡Šå¼€å§‹</span></span><br><span class="line">    <span class="comment">// new HtmlWebpackPlugin(&#123;</span></span><br><span class="line">    <span class="comment">//   filename: 'index.html',</span></span><br><span class="line">    <span class="comment">//   template: 'index.html',</span></span><br><span class="line">    <span class="comment">//   inject: true</span></span><br><span class="line">    <span class="comment">// &#125;),</span></span><br><span class="line">    <span class="comment">// æ³¨é‡Šç»“æŸ</span></span><br><span class="line">    <span class="comment">// copy custom static assets</span></span><br><span class="line">    <span class="keyword">new</span> <span class="type">CopyWebpackPlugin</span>([</span><br><span class="line">      &#123;</span><br><span class="line">        from: <span class="type">path</span>.resolve(__dirname, <span class="string">'../static'</span>),</span><br><span class="line">        to: <span class="type">config</span>.dev.assetsSubDirectory,</span><br><span class="line">        ignore: <span class="type"></span>[<span class="string">'.*'</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ])</span><br><span class="line">  ].concat(utils.htmlPlugin())  <span class="comment">// è¿™é‡Œæ˜¯æ·»åŠ çš„éƒ¨åˆ†</span></span><br></pre></td></tr></table></figure></div></li></ol><h3 id="ä¿®æ”¹webpack-prod-conf"><a href="#ä¿®æ”¹webpack-prod-conf" class="headerlink" title="ä¿®æ”¹webpack.prod.conf"></a>ä¿®æ”¹webpack.prod.conf</h3><p>æ‰“å¼€/build/webpack.prod.confåšå¦‚ä¸‹ä¿®æ”¹ï¼š</p><ol><li><p>æ‰¾åˆ° plugins:æ•°ç»„ï¼Œå°†å¦‚ä¸‹å†…å®¹æ³¨é‡Šæˆ–åˆ é™¤</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">yaml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">new</span> <span class="string">HtmlWebpackPlugin(&#123;</span></span><br><span class="line">  <span class="attr">filename:</span> <span class="string">process.env.NODE_ENV</span> <span class="string">===</span> <span class="string">'testing'</span></span><br><span class="line">    <span class="string">?</span> <span class="string">'index.html'</span></span><br><span class="line">    <span class="string">:</span> <span class="string">config.build.index,</span></span><br><span class="line">  <span class="attr">template:</span> <span class="string">'index.html'</span><span class="string">,</span></span><br><span class="line">  <span class="attr">inject:</span> <span class="literal">true</span><span class="string">,</span></span><br><span class="line">  <span class="attr">minify:</span> <span class="string">&#123;</span></span><br><span class="line">    <span class="attr">removeComments:</span> <span class="literal">true</span><span class="string">,</span></span><br><span class="line">    <span class="attr">collapseWhitespace:</span> <span class="literal">true</span><span class="string">,</span></span><br><span class="line">    <span class="attr">removeAttributeQuotes:</span> <span class="literal">false</span></span><br><span class="line">    <span class="string">//</span> <span class="attr">more options:</span></span><br><span class="line">    <span class="string">//</span> <span class="string">https://github.com/kangax/html-minifier#options-quick-reference</span></span><br><span class="line">  <span class="string">&#125;,</span></span><br><span class="line">  <span class="string">//</span> <span class="string">necessary</span> <span class="string">to</span> <span class="string">consistently</span> <span class="string">work</span> <span class="string">with</span> <span class="string">multiple</span> <span class="string">chunks</span> <span class="string">via</span> <span class="string">CommonsChunkPlugin</span></span><br><span class="line">  <span class="attr">chunksSortMode:</span> <span class="string">'dependency'</span></span><br><span class="line"><span class="string">&#125;),</span></span><br></pre></td></tr></table></figure></div></li><li><p>åœ¨pluginsæ•°ç»„ä¸Šæ‹¼æ¥ä¸Šåœ¨utils.jså†…è·å–åˆ°çš„å…¥å£å†…å®¹ (æ“ä½œåŒä¸Šä¸€æ­¥)</p></li></ol><h3 id="äº”ã€æ·»åŠ å®¢æˆ·ç«¯åˆ¤æ–­"><a href="#äº”ã€æ·»åŠ å®¢æˆ·ç«¯åˆ¤æ–­" class="headerlink" title="äº”ã€æ·»åŠ å®¢æˆ·ç«¯åˆ¤æ–­"></a>äº”ã€æ·»åŠ å®¢æˆ·ç«¯åˆ¤æ–­</h3><p>å®¢æˆ·ç«¯è®¿é—®é¡¹ç›®æ—¶ï¼Œé€šè¿‡jsåˆ¤æ–­å±•ç¤ºå“ªä¸ªç‰ˆæœ¬<br>åœ¨pcç‰ˆæœ¬å…¥å£pc.htmlæ–‡ä»¶å†…æ·»åŠ å¦‚ä¸‹js<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">smalltalk</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight smalltalk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (/<span class="type">Android</span>|webOS|iPhone|iPod|<span class="type">BlackBerry</span>/i.test(navigator.userAgent)) &#123;</span><br><span class="line">window.location.href = <span class="string">'/mobile.html#/'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><p>åŒç†ï¼Œåœ¨mobile.htmlæ·»åŠ å¦‚ä¸‹js<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">smalltalk</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight smalltalk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (!/<span class="type">Android</span>|webOS|iPhone|iPod|<span class="type">BlackBerry</span>/i.test(navigator.userAgent)) &#123;</span><br><span class="line">window.location.href = <span class="string">'/pc.html#/'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><h3 id="å…­ã€åç»­è¯´æ˜"><a href="#å…­ã€åç»­è¯´æ˜" class="headerlink" title="å…­ã€åç»­è¯´æ˜"></a>å…­ã€åç»­è¯´æ˜</h3><p>ä»¥ä¸Šæ­¥éª¤æ“ä½œå®Œæˆä»¥åä¾¿æˆåŠŸçš„æ·»åŠ äº†å¤šå…¥å£ï¼Œä½†æ˜¯æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š</p><ol><li>æœ¬åœ°è¿è¡Œè°ƒè¯•çš„æ—¶å€™ï¼Œä»¥å‰æˆ‘ä»¬æ˜¯localhost:8080å°±å¯ä»¥è®¿é—®äº†ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬éœ€è¦ localhost:8080/pc.htmlæˆ–è€…localhost:8080/mobile.html</li><li>é¡¹ç›®é€šè¿‡webpackæ‰“åŒ…ä»¥åä¼šåœ¨æ ¹ç›®å½•ç”Ÿæˆmobile.htmlå’Œpc.html,åœ¨é¡¹ç›®éƒ¨ç½²çš„æ—¶å€™éœ€è¦é…ç½®é»˜é¦–é¡µï¼Œä¹Ÿå°±æ˜¯æŒ‡å®šæ˜¯mobile.htmlæˆ–è€…pc.html</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="vue" scheme="/categories/vue/"/>
    
    
      <category term="vue" scheme="/tags/vue/"/>
    
      <category term="webå‰ç«¯" scheme="/tags/web%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>Hexo+Githubæ­å»ºä¸ªäººåšå®¢</title>
    <link href="/2018/12/07/Hexo+Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    <id>/2018/12/07/Hexo+Githubæ­å»ºä¸ªäººåšå®¢/</id>
    <published>2018-12-07T04:13:03.000Z</published>
    <updated>2020-02-15T11:58:37.597Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢é©¿ç«™ï¼Œæœ¬ç«™æ˜¯ä½¿ç”¨Hexo+GithubåŸºäºåŸºäºNode.jsçš„é™æ€åšå®¢æ¡†æ¶, å®˜æ–¹æ–‡æ¡£è¯·å‚è€ƒ<a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a></p><h2 id="å®‰è£…NodeåŠç¯å¢ƒé…ç½®"><a href="#å®‰è£…NodeåŠç¯å¢ƒé…ç½®" class="headerlink" title="å®‰è£…NodeåŠç¯å¢ƒé…ç½®"></a>å®‰è£…NodeåŠç¯å¢ƒé…ç½®</h2><p><a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">Nodeå®˜ç½‘</a>ä½ å¯ä»¥æ ¹æ®ä¸åŒå¹³å°ç³»ç»Ÿé€‰æ‹©ä½ éœ€è¦çš„Node.jså®‰è£…åŒ…ï¼Œå®‰è£…è¿‡ç¨‹å¾ˆç®€å•ï¼Œä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥å°±ok<br>æ³¨æ„ï¼šLinuxä¸Šå®‰è£…Node.jséœ€è¦å®‰è£…Pythonï¼Œå»ºè®®å®‰è£…Python 3.6ä»¥ä¸Šç‰ˆæœ¬ã€‚</p><h3 id="å®‰è£…Hexoè„šæ‰‹æ¶"><a href="#å®‰è£…Hexoè„šæ‰‹æ¶" class="headerlink" title="å®‰è£…Hexoè„šæ‰‹æ¶"></a>å®‰è£…Hexoè„šæ‰‹æ¶</h3><p>åœ¨å®‰è£…äº†nodeä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨nodeçš„åŒ…ç®¡ç†å™¨npmå®‰è£…hexoäº†ï¼Œæ“ä½œå¦‚ä¸‹<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure></div></p><h2 id="gitç›¸å…³é…ç½®"><a href="#gitç›¸å…³é…ç½®" class="headerlink" title="gitç›¸å…³é…ç½®"></a>gitç›¸å…³é…ç½®</h2><p>æœ¬åœ°æ­å»ºå¥½åšå®¢é¡¹ç›®ä¹‹åéœ€è¦æäº¤åˆ°githubä¸Šå».é¦–å…ˆå»<a href="http://www.github.com" target="_blank" rel="noopener">GitHub</a>ç”³è¯·ä¸ªäººè´¦å·ï¼Œä»¥ä¾¿åæœŸç”¨æ¥åšåšå®¢çš„è¿œç¨‹åˆ›åº“ã€åŸŸåã€æœåŠ¡å™¨ä¹‹ç±»çš„ï¼Œgithubè´¦å·ä¸å†å•°å—¦äº†,è·Ÿä¸€èˆ¬çš„æ³¨å†Œè´¦å·å·®ä¸å¤š</p><h3 id="å®‰è£…git"><a href="#å®‰è£…git" class="headerlink" title="å®‰è£…git"></a>å®‰è£…git</h3><p>æ‰“å¼€<a href="https://git-scm.com/" target="_blank" rel="noopener">gitå®˜ç½‘</a>ä¸‹è½½gitï¼Œå®‰è£…è¿‡ç¨‹å…¨ç¨‹é»˜è®¤é…ç½®ï¼Œä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥å®‰è£…</p><h3 id="æœ¬åœ°åˆ›å»ºssh-key"><a href="#æœ¬åœ°åˆ›å»ºssh-key" class="headerlink" title="æœ¬åœ°åˆ›å»ºssh key"></a>æœ¬åœ°åˆ›å»ºssh key</h3><p>æ¡Œé¢å³é”®git bash hereï¼Œç„¶åï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">excel</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -<span class="built_in">t</span> rsa -C <span class="string">"é‚®ç®±åœ°å€"</span></span><br></pre></td></tr></table></figure></div></p><p>ä¹‹åä¼šè¦æ±‚ç¡®è®¤è·¯å¾„å’Œè¾“å…¥å¯†ç ï¼Œè®°ä½è¿™ä¸ªè·¯å¾„ï¼Œæˆ‘ä»¬è¿™ä½¿ç”¨é»˜è®¤çš„ä¸€è·¯å›è½¦å°±è¡Œã€‚æˆåŠŸçš„è¯ä¼šåœ¨.sshæ–‡ä»¶å¤¹ç”Ÿæˆid_rsa.pubæ–‡ä»¶ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€ï¼Œå¤åˆ¶é‡Œé¢çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦çš„key</p><h3 id="githubæ·»åŠ ssh-key"><a href="#githubæ·»åŠ ssh-key" class="headerlink" title="githubæ·»åŠ ssh key"></a>githubæ·»åŠ ssh key</h3><p>å›åˆ°githubé¡µé¢ä¸Šï¼Œç‚¹å‡»å¤´åƒå³ä¾§å€’ä¸‰è§’ï¼Œé€‰æ‹©Settingsï¼ˆè´¦æˆ·é…ç½®ï¼‰ï¼Œå·¦è¾¹é€‰æ‹©SSH Keysï¼Œç‚¹å‡»å³ä¸Šè§’Add SSH Key,titleéšä¾¿å¡«ï¼Œä¸‹æ–¹æ–‡æœ¬æ¡†ç²˜è´´ä¸Šä¸€æ­¥ä¸Šç”Ÿæˆçš„keyç¡®å®š</p><h3 id="ssh-keyæœ¬åœ°éªŒè¯"><a href="#ssh-keyæœ¬åœ°éªŒè¯" class="headerlink" title="ssh keyæœ¬åœ°éªŒè¯"></a>ssh keyæœ¬åœ°éªŒè¯</h3><p>å›åˆ°åˆšæ‰ç”Ÿæˆkeyçš„å‘½ä»¤è¡Œï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤éªŒè¯githubç”¨æˆ·åå’Œé‚®ç®±<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">"ä½ çš„ç”¨æˆ·å"</span></span><br><span class="line">git config --global user.email <span class="string">"ä½ çš„é‚®ç®±"</span></span><br></pre></td></tr></table></figure></div></p><p>æ³¨æ„ï¼šæ‰§è¡Œè¿™ä¸¤æ¡å‘½ä»¤æˆåŠŸåæ²¡æœ‰ä»»ä½•æç¤º</p><h2 id="é¡¹ç›®æ­å»º"><a href="#é¡¹ç›®æ­å»º" class="headerlink" title="é¡¹ç›®æ­å»º"></a>é¡¹ç›®æ­å»º</h2><p>æ¥ä¸‹æ¥åˆå§‹åŒ–Hexoé¡¹ç›®ï¼Œé¦–å…ˆåœ¨éœ€è¦ä¿å­˜é¡¹ç›®çš„ç›®å½•é¼ æ ‡å³é”®é€‰æ‹©â€git bash hereâ€,ç„¶åï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog</span><br></pre></td></tr></table></figure></div><p>blogä¸ºä½ åšå®¢çš„é¡¹ç›®åç§°ï¼Œæ¥ä¸‹æ¥åˆ‡æ¢åˆ°åšå®¢è·¯å¾„<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> blog</span><br></pre></td></tr></table></figure></div></p><p>å®‰è£…é¡¹ç›®ä¾èµ–åŒ…<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cmake</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span></span><br></pre></td></tr></table></figure></div></p><p>è‡³æ­¤ï¼Œåšå®¢åˆå§‹åŒ–å®Œæˆï¼Œå¯ä»¥å¯åŠ¨hexoæœåŠ¡äº†<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">ebnf</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hexo s</span></span><br></pre></td></tr></table></figure></div></p><p>å‘½ä»¤è¡Œæç¤ºï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http:<span class="comment">//localhost:4000/. Press Ctrl+C to stop.</span></span><br></pre></td></tr></table></figure></div></p><p>æ¥ä¸‹æ¥å¯ä»¥åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a> è®¿é—®åšå®¢</p><h2 id="ä¸»é¢˜æ›´æ¢"><a href="#ä¸»é¢˜æ›´æ¢" class="headerlink" title="ä¸»é¢˜æ›´æ¢"></a>ä¸»é¢˜æ›´æ¢</h2><ul><li>åœ¨<a href="https://hexo.io/themes/" target="_blank" rel="noopener">ä¸»é¢˜ç½‘ç«™</a>æŸ¥æ‰¾è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜ï¼Œæ‰¾åˆ°ä»¥åç‚¹å‡»è¿›å»é¢„è§ˆï¼Œåœ¨åšå®¢é¢„è§ˆé¡µé¢æ‰¾åˆ°åšä¸»çš„githubé“¾æ¥</li><li>è¿›å…¥åšä¸»githubé¦–é¡µï¼Œæ‰¾åˆ°ä¸»é¢˜å¯¹åº”çš„ä»“åº“ï¼Œç‚¹å‡»å³ä¾§ç»¿è‰²â€clone or downloadâ€æŒ‰é’®è·å–ä¸»é¢˜ä»“åº“åœ°å€</li><li>ä¸‹è½½<br>é¦–å…ˆåœ¨å‘½ä»¤è¡Œä½¿ç”¨cdå‘½ä»¤åˆ‡æ¢åˆ°themesç›®å½•ï¼Œç„¶å<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">crmsh</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">clone</span> <span class="title">ä¸»é¢˜åœ°å€</span></span><br></pre></td></tr></table></figure></div></li></ul><p>ç­‰å¾…ä¸‹è½½å®Œæ¯•ä»¥åä¼šåœ¨themesæ–‡ä»¶å¤¹å†…ç”Ÿæˆä¸€ä¸ªä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œæ¥ä¸‹æ¥ä¿®æ”¹æ ¹ç›®å½•_config.ymlçš„themeé€‰é¡¹ä¸ºä½ åˆšæ‰ä¸‹è½½çš„ä¸»é¢˜åï¼Œæ¥ä¸‹æ¥æ¸…é™¤ä¸€ä¸‹ç¼“å­˜<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">ebnf</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hexo clean</span></span><br></pre></td></tr></table></figure></div></p><p>ç„¶åç¼–è¯‘<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">ebnf</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hexo g</span></span><br></pre></td></tr></table></figure></div></p><p>ç„¶åé‡å¯æœåŠ¡(åœ¨ä¹‹å‰å¯åŠ¨æœåŠ¡çš„å‘½ä»¤è¡Œä½¿ç”¨ctrl+cåœæ­¢æœåŠ¡)ï¼Œç„¶å<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">ebnf</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hexo s</span></span><br></pre></td></tr></table></figure></div></p><p>æ¥ä¸‹æ¥åœ¨æµè§ˆå™¨é¢„è§ˆå°±å¯ä»¥çœ‹åˆ°æ–°ä¸»é¢˜çš„æ•ˆæœäº†</p><h2 id="æ‰˜ç®¡åˆ°gitHub"><a href="#æ‰˜ç®¡åˆ°gitHub" class="headerlink" title="æ‰˜ç®¡åˆ°gitHub"></a>æ‰˜ç®¡åˆ°gitHub</h2><h3 id="åˆ›å»ºåšå®¢æ‰˜ç®¡ä»“åº“"><a href="#åˆ›å»ºåšå®¢æ‰˜ç®¡ä»“åº“" class="headerlink" title="åˆ›å»ºåšå®¢æ‰˜ç®¡ä»“åº“"></a>åˆ›å»ºåšå®¢æ‰˜ç®¡ä»“åº“</h3><p>åˆ›å»ºä¸€ä¸ªä¸è‡ªå·±ç”¨æˆ·ååŒåçš„repositoryï¼Œåœ¨è‡ªå·±Githubé¡µé¢ï¼Œç‚¹å‡»å¤´åƒå·¦ä¾§+æŒ‰é’®ï¼Œé€‰æ‹©new repositoryï¼Œæ¯”å¦‚æˆ‘çš„Githubè´¦å·æ˜¯Givingcodeï¼Œé‚£ä¹ˆæˆ‘åº”è¯¥åˆ›å»ºçš„repositoryåå­—åº”è¯¥æ˜¯Givingcode.github.io</p><h3 id="æ·»åŠ deployé…ç½®"><a href="#æ·»åŠ deployé…ç½®" class="headerlink" title="æ·»åŠ deployé…ç½®"></a>æ·»åŠ deployé…ç½®</h3><p>é¦–å…ˆåœ¨æ ¹ç›®å½•_config.ymlæ–‡ä»¶å†…é…ç½®git<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repository: git@github.com:ç”¨æˆ·å/ç”¨æˆ·å.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure></div></p><p>repositoryï¼šå°±æ˜¯ä½ çš„gitHubåŒåä»“åº“çš„åœ°å€</p><h3 id="ä»£ç æ‰˜ç®¡"><a href="#ä»£ç æ‰˜ç®¡" class="headerlink" title="ä»£ç æ‰˜ç®¡"></a>ä»£ç æ‰˜ç®¡</h3><p>å®‰è£… hexo-deployer-gitä¾èµ–åŒ…<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-deployer-git <span class="comment">--save</span></span><br></pre></td></tr></table></figure></div></p><p>ç„¶åä½¿ç”¨å¦‚ä¸‹å‘½ä»¤</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure></div><p>æ­¤æ—¶ï¼Œä½ å°±å¯ä»¥åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ â€œç”¨æˆ·å.github.ioâ€æ¥è®¿é—®ä½ çš„ä¸ªäººåšå®¢<br>(ç”¨æˆ·åï¼šä½ gitHubçš„ç”¨æˆ·å)</p><h2 id="åŸŸåç»‘å®š"><a href="#åŸŸåç»‘å®š" class="headerlink" title="åŸŸåç»‘å®š"></a>åŸŸåç»‘å®š</h2><h3 id="åŸŸåè§£æ"><a href="#åŸŸåè§£æ" class="headerlink" title="åŸŸåè§£æ"></a>åŸŸåè§£æ</h3><p>åŸŸåç”³è¯·çš„é€”å¾„éå¸¸å¤šï¼Œå»ºè®®ä½¿ç”¨<a href="http://www.aliyun.com" target="_blank" rel="noopener">é˜¿é‡Œäº‘</a>çš„ï¼Œæ–¹ä¾¿åæœŸå¤‡æ¡ˆï¼Œåœ¨é˜¿é‡Œäº‘è´­ä¹°äº†åŸŸåä¹‹åï¼Œåˆ°åŸŸåç®¡ç†ä¸­å¿ƒè¿›è¡ŒåŸŸåè§£æï¼Œæ·»åŠ ä»¥ä¸‹å‡ æ¡è®°å½•å€¼ï¼š</p><table><thead><tr><th>è®°å½•ç±»å‹</th><th>ä¸»æœºè®°å½•</th><th>è§£æçº¿è·¯(isp)</th><th>è®°å½•å€¼</th></tr></thead><tbody><tr><td>CNAME</td><td>www</td><td>é»˜è®¤</td><td>ç”¨æˆ·å.github.io</td></tr><tr><td>A</td><td>@</td><td>é»˜è®¤</td><td>192.30.252.153</td></tr><tr><td>A</td><td>@</td><td>é»˜è®¤</td><td>192.30.252.154</td></tr></tbody></table><h3 id="åˆ›å»ºåŸŸåå…³è”æ–‡ä»¶"><a href="#åˆ›å»ºåŸŸåå…³è”æ–‡ä»¶" class="headerlink" title="åˆ›å»ºåŸŸåå…³è”æ–‡ä»¶"></a>åˆ›å»ºåŸŸåå…³è”æ–‡ä»¶</h3><p>åœ¨é¡¹ç›®æ ¹ç›®å½•sourceç›®å½•æ–°å»ºåä¸ºCNAMEçš„æ–‡ä»¶ï¼Œï¼ˆæ³¨æ„ï¼šè¯¥æ–‡ä»¶æ²¡æœ‰åç¼€åï¼‰<br>ç„¶ååœ¨CNAMEæ–‡ä»¶é‡Œé¢å¡«å†™ä½ çš„åŸŸåï¼Œå¦‚ï¼šxxx.com   æ³¨æ„ï¼šä¸å¸¦wwwä¹Ÿä¸å¸¦httpï¼Œåªéœ€è¦åŸŸåå°±å¥½</p><p>æ¥ä¸‹æ¥é‡æ–°ç¼–è¯‘æ¨é€ä¸€ä¸‹<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g <span class="comment"># ç¼–è¯‘</span></span><br><span class="line">hexo d <span class="comment"># æ¨é€</span></span><br></pre></td></tr></table></figure></div></p><p>æç¤ºï¼šINFO  Deploy done: git ä¹‹åå°±å¯ä»¥ä½¿ç”¨åŸŸåè®¿é—®ä½ çš„ä¸ªäººåšå®¢äº†</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="Hexo" scheme="/categories/Hexo/"/>
    
    
      <category term="Hexo" scheme="/tags/Hexo/"/>
    
      <category term="Github" scheme="/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>Adobe PhotoShop CCæ¿€æ´»ç ´è§£</title>
    <link href="/2018/10/29/Adobe%20PhotoShop%20CC%E6%BF%80%E6%B4%BB%E7%A0%B4%E8%A7%A3/"/>
    <id>/2018/10/29/Adobe PhotoShop CCæ¿€æ´»ç ´è§£/</id>
    <published>2018-10-29T05:13:03.000Z</published>
    <updated>2020-02-15T11:58:37.597Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="å·¥å…·ä¸‹è½½"><a href="#å·¥å…·ä¸‹è½½" class="headerlink" title="å·¥å…·ä¸‹è½½"></a>å·¥å…·ä¸‹è½½</h3><p>åœ¨æˆ‘çš„<a href="https://pan.baidu.com/s/1hyRnHRRUf_5cTAKD0JHSFw" target="_blank" rel="noopener">ç™¾åº¦ç½‘ç›˜</a><br>æå–ç ï¼šajif<br>ä¸‹è½½å‹ç¼©åŒ…,è§£å‹,å±•å¼€Adobe Photoshop CC 2017-18.0(64 bit)ï¼Œå¾—åˆ°å¦‚ä¸‹æ–‡ä»¶ï¼š<br><a href="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/1.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/1.png" class="lazyload" title></a></p><h3 id="å®‰è£…ps"><a href="#å®‰è£…ps" class="headerlink" title="å®‰è£…ps"></a>å®‰è£…ps</h3><ol><li>é¦–å…ˆæ–­å¼€è®¡ç®—æœºç½‘ç»œ(ç¦ç”¨ç”µè„‘ç½‘ç»œæˆ–è€…æ‹”ç½‘çº¿æˆ–è€…æ–­wifi)</li><li>åŒå‡»Set-up.exe,å¾—åˆ°å¦‚ä¸‹ç•Œé¢ï¼Œç­‰å¾…è¿›åº¦æ¡è·‘å®Œï¼Œé¢„è®¡3åˆ†é’Ÿå·¦å³<br><a href="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/2.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/2.png" class="lazyload" title></a></li><li>å®‰è£…ç»“æŸåä¼šåœ¨å¼€å§‹èœå•ç”Ÿæˆå¦‚ä¸‹2ä¸ªå¿«æ·æ–¹å¼<br><a href="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/3.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/3.png" class="lazyload" title></a></li><li>ç‚¹å‡»è“è‰²psæŒ‰é’®è¿è¡Œï¼Œé€‰æ‹©ä»¥åç™»å½•<br><a href="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/4.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/4.png" class="lazyload" title></a></li><li>é€‰æ‹©å¼€å§‹ä½¿ç”¨<br><a href="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/5.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/5.png" class="lazyload" title></a></li><li>æ¥å—<br><a href="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/6.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/6.png" class="lazyload" title></a></li><li>æ¥ä¸‹æ¥ä¼šæ‰“å¼€psç•Œé¢ï¼Œç­‰å¾…10så·¦å³ç­‰å®ƒåŠ è½½å®Œæ‰€æœ‰ç»„ä»¶ï¼Œå…³é—­psè½¯ä»¶</li></ol><h3 id="ç ´è§£æ¿€æ´»"><a href="#ç ´è§£æ¿€æ´»" class="headerlink" title="ç ´è§£æ¿€æ´»"></a>ç ´è§£æ¿€æ´»</h3><ol><li>åŒå‡»æ‰“å¼€æ¿€æ´»å·¥å…·<br><a href="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/7.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/7.jpg" class="lazyload" title></a></li><li>åœ¨ä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©Adobe Photoshop cc2015.5<br><a href="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/8.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/8.png" class="lazyload" title></a></li><li>ç‚¹å‡»installé€‰æ‹©amtlib.dllæ–‡ä»¶<br><a href="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/9.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/9.png" class="lazyload" title></a><br>é»˜è®¤åœ¨C:\Program Files\Adobe\Adobe Photoshop CC 2017æ–‡ä»¶å¤¹ä¸‹<br><a href="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/10.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/10.jpg" class="lazyload" title></a></li><li>ç‚¹å‡»AdvacedæŒ‰é’®ï¼Œç„¶åå…³é—­<br><a href="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/11.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/wiki/Givingcode/images/blog/ps/11.png" class="lazyload" title></a><br>5ã€æ¿€æ´»ç ´è§£å®Œæˆï¼Œé‡æ–°è¿æ¥ç”µè„‘ç½‘ç»œï¼Œå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨psäº†</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="æ¿€æ´»" scheme="/categories/%E6%BF%80%E6%B4%BB/"/>
    
      <category term="ps" scheme="/categories/%E6%BF%80%E6%B4%BB/ps/"/>
    
    
      <category term="ps" scheme="/tags/ps/"/>
    
      <category term="æ¿€æ´»ç ´è§£" scheme="/tags/%E6%BF%80%E6%B4%BB%E7%A0%B4%E8%A7%A3/"/>
    
  </entry>
  
  <entry>
    <title>AWSåˆ›å»ºEC2</title>
    <link href="/2018/10/11/AWS%E6%90%AD%E5%BB%BAEC2/"/>
    <id>/2018/10/11/AWSæ­å»ºEC2/</id>
    <published>2018-10-11T08:13:03.000Z</published>
    <updated>2020-02-15T11:58:37.597Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="åˆ‡æ¢pemä¸ºè´¦å·ç™»é™†"><a href="#åˆ‡æ¢pemä¸ºè´¦å·ç™»é™†" class="headerlink" title="åˆ‡æ¢pemä¸ºè´¦å·ç™»é™†"></a>åˆ‡æ¢pemä¸ºè´¦å·ç™»é™†</h2><ol><li>ä¸‹è½½xxx.pemæ–‡ä»¶åˆ°æœ¬åœ°</li><li><p>å‘½ä»¤è¡Œcdåˆ°xxx.pemæ‰€åœ¨è·¯å¾„ï¼Œä½¿ç”¨pemç™»é™†</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">angelscript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -i <span class="string">"xxx.pem"</span> ec2-<span class="symbol">user@</span>ec2<span class="number">-18</span><span class="number">-224</span><span class="number">-140</span><span class="number">-75.</span>us-east<span class="number">-2.</span>compute.amazonaws.com</span><br></pre></td></tr></table></figure></div></li><li><p>åˆ›å»ºrootå¯†ç  </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">ebnf</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo passwd root</span></span><br></pre></td></tr></table></figure></div></li></ol><p>è¾“å…¥ä¸¤æ¬¡å¯†ç ï¼ŒæœŸé—´æ²¡æœ‰ä»»ä½•æç¤º</p><ol start="3"><li><p>åˆ‡æ¢åˆ°rootèº«ä»½ </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">ebnf</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">su root</span></span><br></pre></td></tr></table></figure></div></li><li><p>ä½¿ç”¨rootèº«ä»½ç¼–è¾‘äºšé©¬é€Šä¸»æœºçš„sshç™»å½•æ–¹å¼</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">awk</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi <span class="regexp">/etc/</span>ssh<span class="regexp">/sshd_config</span></span><br></pre></td></tr></table></figure></div></li></ol><p>æŠŠ PasswordAuthentication no æ”¹ä¸º PasswordAuthentication yes<br>å¦‚æœæ²¡æœ‰åˆ™æ–°æ’è¿›å» </p><ol start="5"><li><p>é‡å¯sshdä½¿ä¿®æ”¹ç”Ÿæ•ˆ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">ebnf</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">service sshd restart</span></span><br></pre></td></tr></table></figure></div></li><li><p>ä½¿ç”¨ç”¨æˆ·åå¯†ç è¿œç¨‹è¿æ¥</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">nginx</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ssh</span> root<span class="variable">@ip</span>åœ°å€</span><br></pre></td></tr></table></figure></div></li></ol><h2 id="æ­å»ºftpæœåŠ¡å™¨"><a href="#æ­å»ºftpæœåŠ¡å™¨" class="headerlink" title="æ­å»ºftpæœåŠ¡å™¨"></a>æ­å»ºftpæœåŠ¡å™¨</h2><ol><li><p>ä½¿ç”¨ yum å®‰è£… vsftpd</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cmake</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> -y vsftpd</span><br></pre></td></tr></table></figure></div></li><li><p>å¯åŠ¨ VSFTPD<br>å®‰è£…å®Œæˆåï¼Œå¯åŠ¨ FTP æœåŠ¡ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">crmsh</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service vsftpd <span class="literal">start</span></span><br></pre></td></tr></table></figure></div></li></ol><p>å¯åŠ¨åï¼Œå¯ä»¥çœ‹åˆ°ç³»ç»Ÿå·²ç»ç›‘å¬äº† 21 ç«¯å£<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">1c</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -nltp <span class="string">| grep 21</span></span><br></pre></td></tr></table></figure></div></p><ol start="3"><li>é…ç½® FTP æƒé™</li></ol><p>ç¼–è¾‘ /etc/vsftpd/vsftpd.confï¼Œæ‰¾åˆ°ä¸‹é¢ä¸¤å¤„é…ç½®å¹¶ä¿®æ”¹ï¼š<br>ç¦ç”¨åŒ¿åç”¨æˆ·  12 YES æ”¹ä¸ºNO<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">ini</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">anonymous_enable</span>=<span class="literal">NO</span></span><br></pre></td></tr></table></figure></div></p><p>ç¦æ­¢åˆ‡æ¢æ ¹ç›®å½• 101 è¡Œ åˆ é™¤#<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">ini</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">chroot_local_user</span>=<span class="literal">YES</span></span><br></pre></td></tr></table></figure></div></p><ol start="4"><li><p>é‡æ–°å¯åŠ¨ FTP æœåŠ¡</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">ebnf</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">service vsftpd restart</span></span><br></pre></td></tr></table></figure></div></li><li><p>åˆ›å»º FTP ç”¨æˆ·<br>åˆ›å»ºä¸€ä¸ªç”¨æˆ·:web</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">ebnf</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">useradd web</span></span><br></pre></td></tr></table></figure></div></li><li><p>ä¸ºç”¨æˆ· ftpuser è®¾ç½®å¯†ç </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">jboss-cli</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">"123456"</span> | passwd web <span class="params">--stdin</span></span><br></pre></td></tr></table></figure></div></li><li><p>é™åˆ¶è¯¥ç”¨æˆ·ä»…èƒ½é€šè¿‡ FTP è®¿é—®<br>é™åˆ¶ç”¨æˆ· ftpuseråªèƒ½é€šè¿‡ FTP è®¿é—®æœåŠ¡å™¨ï¼Œè€Œä¸èƒ½ç›´æ¥ç™»å½•æœåŠ¡å™¨ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">awk</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -s <span class="regexp">/sbin/</span>nologin web</span><br></pre></td></tr></table></figure></div></li><li><p>ä¸ºç”¨æˆ·åˆ†é…ä¸»ç›®å½•<br>ä¸ºç”¨æˆ· ftpuseråˆ›å»ºä¸»ç›®å½•å¹¶çº¦å®šï¼š<br>/data/ftp ä¸ºä¸»ç›®å½•, è¯¥ç›®å½•ä¸å¯ä¸Šä¼ æ–‡ä»¶<br>/data/ftp/pub æ–‡ä»¶åªèƒ½ä¸Šä¼ åˆ°è¯¥ç›®å½•ä¸‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">haskell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">mkdir</span> -p /<span class="class"><span class="keyword">data</span>/ftp/pub</span></span><br></pre></td></tr></table></figure></div></li><li><p>è®¾ç½®è®¿é—®æƒé™</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">haskell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">chmod</span> a-w /<span class="class"><span class="keyword">data</span>/ftp &amp;&amp; chmod 777 -<span class="type">R</span> /<span class="keyword">data</span>/ftp/pub</span></span><br></pre></td></tr></table></figure></div></li><li><p>è®¾ç½®ä¸ºç”¨æˆ·çš„ä¸»ç›®å½•ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">haskell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">usermod</span> -d /<span class="class"><span class="keyword">data</span>/ftp web</span></span><br></pre></td></tr></table></figure></div></li><li><p>åç»­å·¥ä½œ<br>æ³¨æ„ï¼šè®°å¾—å…³é—­é˜²ç«å¢™æˆ–è€…å¼€æ”¾FTPé»˜è®¤ç«¯å£(21)</p></li></ol><ul><li><p>å…³é—­SELinuxæœåŠ¡</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">angelscript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setenforce <span class="number">0</span></span><br></pre></td></tr></table></figure></div></li><li><p>å…³é—­é˜²ç«å¢™</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">ebnf</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">iptables -F</span></span><br></pre></td></tr></table></figure></div></li></ul><h2 id="å®‰è£…node"><a href="#å®‰è£…node" class="headerlink" title="å®‰è£…node"></a>å®‰è£…node</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½nodeå‹ç¼©åŒ…</span></span><br><span class="line">wget https://npm.taobao.org/mirrors/node/v10.6.0/node-v10.6.0-linux-x64.tar.xz</span><br><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line">tar -xvf node-v10.6.0-linux-x64.tar.xz</span><br><span class="line"><span class="comment"># æ›´æ”¹nodeå®‰è£…ç›®å½•</span></span><br><span class="line">mv node-v10.6.0-linux-x64 /root/node</span><br><span class="line"><span class="comment"># é…ç½®å…¨å±€ç¯å¢ƒå˜é‡ </span></span><br><span class="line">ln -s /root/node/bin/node /usr/sbin/node</span><br><span class="line">ln -s /root/node/bin/npm /usr/sbin/npm</span><br><span class="line"><span class="comment"># å®‰è£…å®ˆæŠ¤ç¨‹åºforever</span></span><br><span class="line">npm install forever -g</span><br><span class="line"><span class="comment"># æŸ¥æ‰¾foreverçš„å®‰è£…è·¯å¾„</span></span><br><span class="line">find / -name forerver</span><br><span class="line"><span class="comment"># æˆ‘è¿™é‡ŒæŸ¥åˆ°æ˜¯åœ¨ï¼š/node/bin/ï¼Œæ·»åŠ foreveråˆ°PATH</span></span><br><span class="line">vi /etc/profile</span><br><span class="line"><span class="comment"># åœ¨ç»“å°¾çš„åœ°æ–¹æ·»åŠ è®°å½•</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/node/bin</span><br><span class="line"><span class="comment"># é‡å»ºç¼“å­˜</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"><span class="comment"># foreverå¯ç”¨nodeæœåŠ¡</span></span><br><span class="line">forever start xxx.js</span><br></pre></td></tr></table></figure></div><h2 id="å®‰è£…ngnix"><a href="#å®‰è£…ngnix" class="headerlink" title="å®‰è£…ngnix"></a>å®‰è£…ngnix</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…wget</span></span><br><span class="line">yum install -y weget</span><br><span class="line"><span class="comment"># å®‰è£…ç¼–è¯‘å·¥å…·å’Œç›¸å…³çš„åº“æ–‡ä»¶ </span></span><br><span class="line">yum -y install make zlib zlib-devel gcc-c++ libtool  openssl openssl-devel</span><br><span class="line"><span class="comment"># ä¸‹è½½PCREï¼ˆè®©Nginxæ”¯æŒRULåœ°å€çš„é‡å®šå‘åŠŸèƒ½ï¼‰</span></span><br><span class="line">wget https://sourceforge.net/projects/pcre/files/pcre/8.41/pcre-8.41.tar.gz</span><br><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line">tar -xvzf pcre-8.41.tar.gz</span><br><span class="line"><span class="comment"># è¿›å…¥å®‰è£…åŒ…ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> pcre-8.41</span><br><span class="line"><span class="comment"># ç¼–è¯‘å®‰è£…</span></span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="comment"># ä¸‹è½½å®‰è£… Nginx</span></span><br><span class="line">wget http://nginx.org/download/nginx-1.14.0.tar.gz</span><br><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line">tar -xvzf nginx-1.14.0.tar.gz</span><br><span class="line"><span class="comment"># è¿›å…¥å®‰è£…åŒ…ç›®å½•ï¼š</span></span><br><span class="line"><span class="built_in">cd</span> nginx-1.14.0</span><br><span class="line"><span class="comment"># ç¼–è¯‘å®‰è£…ï¼š</span></span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/share/applications/nginx-1.14.0/ --with-http_ssl_module</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="comment"># å¯åŠ¨Ngnix</span></span><br><span class="line">/usr/<span class="built_in">local</span>/share/applications/nginx-1.14.0/sbin/nginx</span><br></pre></td></tr></table></figure></div><p>æ¥ä¸‹æ¥é…ç½®é¡¹ç›®è·¯å¾„å’ŒåŸŸå</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       <span class="number">80</span>;</span><br><span class="line">    server_name  aaa.com;</span><br><span class="line">    </span><br><span class="line">    location / &#123;</span><br><span class="line">        root   é¡¹ç›®è·¯å¾„<span class="number">1</span>;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">        # ç«¯å£ä»£ç†</span><br><span class="line">        proxy_pass   http:<span class="comment">//127.0.0.1:3000;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">    listen       <span class="number">80</span>;</span><br><span class="line">    server_name  bbb.com;</span><br><span class="line">    </span><br><span class="line">    location / &#123;</span><br><span class="line">        root   é¡¹ç›®è·¯å¾„<span class="number">2</span>;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">        # ç«¯å£ä»£ç†</span><br><span class="line">        proxy_pass   http:<span class="comment">//127.0.0.1:4000;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>é…ç½®å®Œæ¯•ä»¥åreloadä¸€ä¸‹conf<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/share/applications/nginx-1.14.0/sbin/nginx -s reload</span><br></pre></td></tr></table></figure></div></p><p>Ngnixå¸¸è§„æ“ä½œ<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">dts</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># å¯åŠ¨nginx</span></span><br><span class="line"><span class="meta-keyword">/usr/</span>local<span class="meta-keyword">/share/</span>applications/nginx<span class="number">-1.14</span><span class="number">.0</span><span class="meta-keyword">/sbin/</span>nginx</span><br><span class="line"> </span><br><span class="line"><span class="meta"># é‡æ–°è½½å…¥é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="meta-keyword">/usr/</span>local<span class="meta-keyword">/share/</span>applications/nginx<span class="number">-1.14</span><span class="number">.0</span><span class="meta-keyword">/sbin/</span>nginx -s reload </span><br><span class="line"> </span><br><span class="line"><span class="meta"># é‡å¯ Nginx</span></span><br><span class="line"><span class="meta-keyword">/usr/</span>local<span class="meta-keyword">/share/</span>applications/nginx<span class="number">-1.14</span><span class="number">.0</span><span class="meta-keyword">/sbin/</span>nginx -s reopen      </span><br><span class="line">      </span><br><span class="line"><span class="meta"># åœæ­¢ Nginx</span></span><br><span class="line"><span class="meta-keyword">/usr/</span>local<span class="meta-keyword">/share/</span>applications/nginx<span class="number">-1.14</span><span class="number">.0</span><span class="meta-keyword">/sbin/</span>nginx -s stop</span><br></pre></td></tr></table></figure></div></p><blockquote><p>Ngnixå¸¸è§„é€‰é¡¹</p><blockquote><p>é…ç½®æ–‡ä»¶è·¯å¾„<br>/usr/local/share/applications/nginx-1.14.0/conf<br>é»˜è®¤é¡¹ç›®ç›®å½•<br>/nginx-1.14.0/html</p></blockquote></blockquote><h2 id="å®‰è£…mysql"><a href="#å®‰è£…mysql" class="headerlink" title="å®‰è£…mysql"></a>å®‰è£…mysql</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æ˜¯å¦æœ‰è‡ªå¸¦çš„MySqlåº“ï¼Œå¦‚æœå…ˆæœ‰å¸è½½</span></span><br><span class="line">rpm -qa | grep mysql</span><br><span class="line"><span class="comment"># åˆ é™¤mysql-lib(ç³»ç»Ÿè‡ªå¸¦çš„ç‰ˆæœ¬è¿‡ä½)</span></span><br><span class="line">yum remove mysql-libs</span><br><span class="line"><span class="comment"># ä¸‹è½½mysql</span></span><br><span class="line">wget https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.12-1.el6.x86_64.rpm-bundle.tar </span><br><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line">tar -xvf mysql-5.7.12-1.el6.x86_64.rpm-bundle.tar  </span><br><span class="line"><span class="comment"># ä¾æ¬¡å®‰è£…mysqlåŒ…ï¼ˆcommonã€libsã€clientã€serverï¼‰</span></span><br><span class="line">rpm -ivh mysql-community-common-5.7.12-1.el6.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-libs-5.7.12-1.el6.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-client-5.7.12-1.el6.x86_64.rpm Â </span><br><span class="line">rpm -ivh mysql-community-server-5.7.12-1.el6.x86_64.rpmÂ </span><br><span class="line"><span class="comment"># å¯åŠ¨mysqlæœåŠ¡</span></span><br><span class="line">service mysqld start</span><br><span class="line"><span class="comment"># æŸ¥çœ‹é»˜è®¤å¯†ç </span></span><br><span class="line">grep <span class="string">'password'</span> /var/<span class="built_in">log</span>/mysqld.log</span><br><span class="line"><span class="comment"># [Note] A temporary password is generated for root@localhost: x2sX3Gb6+Dtm</span></span><br><span class="line"><span class="comment"># root@localhost: è¿™é‡Œåé¢å°±æ˜¯é»˜è®¤å¯†ç </span></span><br><span class="line"><span class="comment"># ç™»é™†</span></span><br><span class="line">mysql -uroot -p</span><br><span class="line"><span class="comment"># ä¿®æ”¹é»˜è®¤å¯†ç </span></span><br><span class="line">SET PASSWORD = PASSWORD(<span class="string">'Abcd1234.'</span>);</span><br><span class="line"><span class="comment"># psï¼šè¿™é‡Œéœ€è¦å¤§å°å†™æ•°ç»„å­—ç¬¦ç›¸ç»“åˆï¼Œä¸ç„¶ä¼šé€šä¸è¿‡</span></span><br><span class="line"><span class="comment"># åˆ·æ–°ç³»ç»Ÿæƒé™</span></span><br><span class="line">flush privileges;</span><br><span class="line"><span class="comment"># å¼€å¯è¿œç¨‹ç™»å½•æƒé™</span></span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO <span class="string">'root'</span>@<span class="string">'%'</span> IDENTIFIED BY <span class="string">'Abcd1234.'</span> WITH GRANT OPTION;</span><br><span class="line"><span class="comment"># åˆ·æ–°ç³»ç»Ÿæƒé™</span></span><br><span class="line">flush privileges;</span><br><span class="line"><span class="comment"># æ¥ä¸‹æ¥å°±å¯ä»¥è¿œç¨‹ç™»é™†äº†</span></span><br></pre></td></tr></table></figure></div><h2 id="å®‰è£…é˜¿å¸•å¥‡"><a href="#å®‰è£…é˜¿å¸•å¥‡" class="headerlink" title="å®‰è£…é˜¿å¸•å¥‡"></a>å®‰è£…é˜¿å¸•å¥‡</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…é˜¿å¸•å¥‡</span></span><br><span class="line">yum install  httpd  -y</span><br><span class="line"><span class="comment"># å¼€å¯æœåŠ¡</span></span><br><span class="line">systemctl start httpd</span><br></pre></td></tr></table></figure></div><ol><li>æ·»åŠ é˜¿å¸•å¥‡å·¥ä½œç©ºé—´<br>ä¿®æ”¹/etc/httpd/conf/httpd.confé…ç½®æ–‡ä»¶<br>æŒ‡å®šé˜¿å¸•å¥‡workspaceä¸º/var/www/html<br>ä¿®æ”¹å‰<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">apache</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;Directory&gt;</span></span><br><span class="line">   <span class="attribute">AllowOverride</span> none</span><br><span class="line">   <span class="attribute">Require</span> <span class="literal">all</span> denied</span><br><span class="line"><span class="section">&lt;/Directory&gt;</span></span><br></pre></td></tr></table></figure></div></li></ol><p>ä¿®æ”¹å<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">lasso</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory <span class="string">"/var/www/html"</span>&gt;</span><br><span class="line">   AllowOverride <span class="literal">none</span></span><br><span class="line">   <span class="keyword">Require</span> <span class="literal">all</span> denied</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure></div></p><ol start="2"><li><p>å¯åŠ¨æœåŠ¡</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">crmsh</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="literal">start</span> httpd</span><br></pre></td></tr></table></figure></div></li><li><p>åŸŸåç»‘å®š<br>åœ¨/etc/httpd/confç›®å½•ä¸‹åˆ›å»ºdefault.confæ·»åŠ å¦‚ä¸‹å†…å®¹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">apache</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;VirtualHost *:80&gt;</span></span><br><span class="line"><span class="attribute"><span class="nomarkup">DocumentRoot</span></span> <span class="string">"/var/www/html"</span></span><br><span class="line"><span class="attribute"><span class="nomarkup">ServerName</span></span> www.lidg.vip</span><br><span class="line"><span class="section">&lt;VirtualHost&gt;</span></span><br></pre></td></tr></table></figure></div></li></ol><p>DocumentRoot:å·¥ä½œç©ºé—´<br>ServerNameï¼šåŸŸå</p><h2 id="æ­å»ºvpn"><a href="#æ­å»ºvpn" class="headerlink" title="æ­å»ºvpn"></a>æ­å»ºvpn</h2><ol><li><p>å®‰è£…wget</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install wget</span><br></pre></td></tr></table></figure></div></li><li><p>å®‰è£…setuptools</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">vim</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">wget --<span class="keyword">no</span>-check-certificate  http<span class="variable">s:</span>//pypi.<span class="keyword">python</span>.org/packages/<span class="keyword">source</span>/s/setuptools/setuptools-<span class="number">19.6</span>.tar.gz#md5=c607dd118eae682c44ed146367a17e26</span><br><span class="line"> </span><br><span class="line">tar -zxvf setuptools-<span class="number">19.6</span>.tar.gz</span><br><span class="line"> </span><br><span class="line"><span class="keyword">cd</span> setuptools-<span class="number">19.6</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">python</span> setup.<span class="keyword">py</span> build</span><br><span class="line"> </span><br><span class="line"><span class="keyword">python</span> setup.<span class="keyword">py</span> install</span><br></pre></td></tr></table></figure></div></li><li><p>ä¸‹è½½pipå®‰è£…åŒ…ï¼Œè§£å‹åˆ°æŸä¸ªä½ç½®ï¼Œæˆ‘è¿™é‡Œä¸‹è½½çš„æ˜¯18.1ç‰ˆæœ¬ï¼Œç„¶åå°±å¯ä»¥å®‰è£…äº†</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate  https://pypi.python.org/packages/<span class="built_in">source</span>/p/pip/pip-8.0.2.tar.gz<span class="comment">#md5=3a73c4188f8dbad6a1e6f6d44d117eeb</span></span><br><span class="line"> </span><br><span class="line">tar -zxvf pip-8.0.2.tar.gz</span><br><span class="line"> </span><br><span class="line"><span class="built_in">cd</span> pip-8.0.2</span><br><span class="line"> </span><br><span class="line">python setup.py build</span><br><span class="line"> </span><br><span class="line">python setup.py install</span><br></pre></td></tr></table></figure></div></li><li><p>å®‰è£…shadowsocks</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cmake</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip <span class="keyword">install</span> shadowsocks</span><br></pre></td></tr></table></figure></div></li><li><p>æ·»åŠ shadowsocksé…ç½®æ–‡ä»¶</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">jboss-cli</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir <span class="string">/etc/shadowsocks/</span></span><br><span class="line"><span class="keyword">cd</span> <span class="string">/etc/shadowsocks/</span></span><br><span class="line">vi config.json</span><br></pre></td></tr></table></figure></div></li></ol><p>ç²˜è´´å¦‚ä¸‹å†…å®¹ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">json</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;    </span><br><span class="line">  <span class="attr">"server"</span>:<span class="string">"0.0.0.0"</span>,</span><br><span class="line">  <span class="attr">"server_port"</span>:<span class="number">8388</span>,</span><br><span class="line">  <span class="attr">"local_port"</span>:<span class="number">1080</span>,     </span><br><span class="line">  <span class="attr">"password"</span>:<span class="string">"æŠŠè¿™æ®µæ±‰å­—æ›¿æ¢ä¸ºä½ çš„vpnè¿æ¥å¯†ç "</span>,</span><br><span class="line">  <span class="attr">"timeout"</span>:<span class="number">600</span>,    </span><br><span class="line">  <span class="attr">"method"</span>:<span class="string">"aes-256-cfb"</span>,</span><br><span class="line">  <span class="attr">"fast_open"</span>:<span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><ol start="6"><li>å¯åŠ¨æœåŠ¡<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">pgsql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssserver -c /etc/shadowsocks/config.json -d <span class="keyword">start</span></span><br></pre></td></tr></table></figure></div></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="Linux" scheme="/categories/Linux/"/>
    
    
      <category term="Linux" scheme="/tags/Linux/"/>
    
      <category term="EC2" scheme="/tags/EC2/"/>
    
  </entry>
  
  <entry>
    <title>RedHatå¸¸è§„æ“ä½œ</title>
    <link href="/2018/09/29/RedHat%E5%B8%B8%E8%A7%84%E6%93%8D%E4%BD%9C/"/>
    <id>/2018/09/29/RedHatå¸¸è§„æ“ä½œ/</id>
    <published>2018-09-29T08:13:03.000Z</published>
    <updated>2020-02-15T11:58:37.598Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="RedHatè®¾ç½®ç½‘ç»œå¼€æœºè‡ªåŠ¨è¿æ¥"><a href="#RedHatè®¾ç½®ç½‘ç»œå¼€æœºè‡ªåŠ¨è¿æ¥" class="headerlink" title="RedHatè®¾ç½®ç½‘ç»œå¼€æœºè‡ªåŠ¨è¿æ¥"></a>RedHatè®¾ç½®ç½‘ç»œå¼€æœºè‡ªåŠ¨è¿æ¥</h3><ol><li><p>åˆ‡æ¢åˆ°rootè´¦æˆ·</p></li><li><p>å®‰è£…ç½‘ç»œå·¥å…·</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">cmake</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> -y net-tools\*</span><br></pre></td></tr></table></figure></div></li><li><p>ä½¿ç”¨vimä¿®æ”¹ /etc/sysconfig/network-scripts/ifcfg-enpxxxxxxæ–‡ä»¶<br>ifcfg-enpxxxxxxæ–‡ä»¶ä¸ºä½ çš„ç½‘å¡åé…ç½®æ–‡ä»¶<br>å°†æ–‡ä»¶æœ€åä¸€è¡Œçš„ONBOOT= noæ”¹ä¸ºyesï¼Œä¿å­˜å³å¯ã€‚<br>ä¸ªåˆ«æƒ…å†µä¸‹ï¼Œä¸ºäº†åæœŸè¿œç¨‹è¿æ¥æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥åšå¦‚ä¸‹æ›´æ”¹<br>ä¿®æ”¹ä¸Šè¾¹æ–‡ä»¶ ï¼šBOOTPROTO=static<br>åŒæ—¶æ–‡ä»¶çš„æœ€åæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š<br>IPADDR=176.202.123.234 #é™æ€IP<br>GATEWAY=176.202.123.1 #é»˜è®¤ç½‘å…³<br>NETMASK=255.255.255.0 #å­ç½‘æ©ç <br>DNS1=176.202.0.227 #DNS é…ç½®</p></li></ol><p>psï¼šä»¥ä¸Šå‚æ•°æ ¹æ®è‡ªå·±ç½‘æ®µè®¾ç½®å³å¯</p><ol start="4"><li>è®¾ç½®å®Œæ¯•ä»¥åï¼Œé‡å¯ç½‘å¡<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">routeros</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service<span class="built_in"> network </span>restart</span><br></pre></td></tr></table></figure></div></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="Linux" scheme="/categories/Linux/"/>
    
    
      <category term="Linux" scheme="/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>vueç§»åŠ¨ç«¯å±å¹•é€‚é…è§£å†³æ–¹æ¡ˆnew</title>
    <link href="/2018/09/08/vue%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%B1%8F%E5%B9%95%E9%80%82%E9%85%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88new/"/>
    <id>/2018/09/08/vueç§»åŠ¨ç«¯å±å¹•é€‚é…è§£å†³æ–¹æ¡ˆnew/</id>
    <published>2018-09-08T06:57:41.000Z</published>
    <updated>2020-02-15T11:58:37.599Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ç§»åŠ¨ç«¯å±å¹•é€‚é…"><a href="#ç§»åŠ¨ç«¯å±å¹•é€‚é…" class="headerlink" title="ç§»åŠ¨ç«¯å±å¹•é€‚é…"></a>ç§»åŠ¨ç«¯å±å¹•é€‚é…</h1><p>é¡¹ç›®åŸåœ°å€å‚è€ƒ<a href="https://github.com/Givingcode/" target="_blank" rel="noopener">è¿™é‡Œ</a></p><h2 id="æ’ä»¶å®‰è£…"><a href="#æ’ä»¶å®‰è£…" class="headerlink" title="æ’ä»¶å®‰è£…"></a>æ’ä»¶å®‰è£…</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…é€‚é…æ’ä»¶lib-flexible</span></span><br><span class="line">npm i lib-flexible -S</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…pxè½¬remæ’ä»¶</span></span><br><span class="line">npm i px2rem-loader -S</span><br></pre></td></tr></table></figure></div><h2 id="æ–‡ä»¶å¼•å…¥"><a href="#æ–‡ä»¶å¼•å…¥" class="headerlink" title="æ–‡ä»¶å¼•å…¥"></a>æ–‡ä»¶å¼•å…¥</h2><p>åœ¨vueçš„å…¥å£æ–‡ä»¶main.jså†…å¼•å…¥lib-flexible<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import <span class="string">'lib-flexible/flexible.js'</span></span><br></pre></td></tr></table></figure></div></p><h2 id="æ·»åŠ metaæ ‡ç­¾"><a href="#æ·»åŠ metaæ ‡ç­¾" class="headerlink" title="æ·»åŠ metaæ ‡ç­¾"></a>æ·»åŠ metaæ ‡ç­¾</h2><p>åœ¨å…¥å£index.htmlå†…æ·»åŠ è§†å£ä¿®é¥°meta<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br></pre></td></tr></table></figure></div></p><h2 id="é…ç½®utils"><a href="#é…ç½®utils" class="headerlink" title="é…ç½®utils"></a>é…ç½®utils</h2><p>åœ¨build/utils.jsæ–‡ä»¶å†…ï¼š<br>åœ¨cssLoadersé‡Œé¢æ·»åŠ px2remLoaderæ–¹æ³•ç”¨äºå°†pxè½¬æ¢ä¸ºrem<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> px2remLoader = &#123; </span><br><span class="line">    loader: <span class="string">'px2rem-loader'</span>, </span><br><span class="line">    options: &#123; </span><br><span class="line">      <span class="string">'remUnit'</span>:<span class="number">75</span>,<span class="string">'baseDpr'</span>:<span class="number">2</span>    <span class="comment">// è®¾è®¡ç¨¿widthä¸º750ï¼Œå› æ­¤è¿™é‡Œæ˜¯75</span></span><br><span class="line">    &#125; </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></div></p><p>æ¥ä¸‹æ¥å°†px2remLoaderæ–¹æ³•æ·»åŠ åˆ°generateLoadersçš„loadersæ•°ç»„å†…<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loaders = [cssLoader, px2remLoader]</span><br></pre></td></tr></table></figure></div></p><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><p>ä»¥ä¸Šå‡ ä¸ªæ­¥éª¤é…ç½®å®Œæ¯•ä»¥åï¼Œé‡å¯æœåŠ¡ï¼Œç„¶åç»„ä»¶ä¸­å†™å°ºå¯¸å•ä½å°±å¯ä»¥ç›´æ¥å†™pxï¼Œå…·ä½“å€¼ç›´æ¥æŒ‰ç…§è®¾è®¡ç¨¿æ¥åšå°±ok</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="vue" scheme="/categories/vue/"/>
    
    
      <category term="vue" scheme="/tags/vue/"/>
    
      <category term="webå‰ç«¯" scheme="/tags/web%E5%89%8D%E7%AB%AF/"/>
    
      <category term="ç§»åŠ¨ç«¯" scheme="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>vueç§»åŠ¨ç«¯å±å¹•é€‚é…</title>
    <link href="/2018/08/30/vue%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%B1%8F%E5%B9%95%E9%80%82%E9%85%8D/"/>
    <id>/2018/08/30/vueç§»åŠ¨ç«¯å±å¹•é€‚é…/</id>
    <published>2018-08-30T03:21:55.000Z</published>
    <updated>2020-02-15T11:58:37.599Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="flexible"><a href="#flexible" class="headerlink" title="flexible"></a>flexible</h1><blockquote><p>vueç§»åŠ¨ç«¯å±å¹•é€‚é…,<a href="https://github.com/Givingcode/flexible" target="_blank" rel="noopener">æŸ¥çœ‹</a>é¡¹ç›®åœ°å€</p></blockquote><h2 id="æ•ˆæœé¢„è§ˆ"><a href="#æ•ˆæœé¢„è§ˆ" class="headerlink" title="æ•ˆæœé¢„è§ˆ"></a>æ•ˆæœé¢„è§ˆ</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é¡¹ç›®clone</span></span><br><span class="line">git <span class="built_in">clone</span> git@github.com:NicolasGui/flexible.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›å…¥é¡¹ç›®ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> flexible</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…ä¾èµ–</span></span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨æœåŠ¡ localhost:8080</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure></div><h2 id="åŸç†æ¦‚è¿°"><a href="#åŸç†æ¦‚è¿°" class="headerlink" title="åŸç†æ¦‚è¿°"></a>åŸç†æ¦‚è¿°</h2><h3 id="æ’ä»¶å®‰è£…"><a href="#æ’ä»¶å®‰è£…" class="headerlink" title="æ’ä»¶å®‰è£…"></a>æ’ä»¶å®‰è£…</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ’ä»¶ä¸€ï¼šamfe-flexible</span></span><br><span class="line">npm install amfe-flexible --save</span><br><span class="line"><span class="comment">#  æ’ä»¶äºŒï¼š node-sass</span></span><br><span class="line">npm install amfe-flexible --save  <span class="comment"># åŒæ—¶ï¼Œåœ¨main.jsæ–‡ä»¶å†…å¼•å…¥</span></span><br><span class="line">npm install sass-loader --save</span><br></pre></td></tr></table></figure></div><h3 id="ç¼–å†™jså¤„ç†æ–¹æ³•"><a href="#ç¼–å†™jså¤„ç†æ–¹æ³•" class="headerlink" title="ç¼–å†™jså¤„ç†æ–¹æ³•"></a>ç¼–å†™jså¤„ç†æ–¹æ³•</h3><p>åœ¨utilsç›®å½•ä¸‹åˆ›å»ºflex.jsæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line">Vue.prototype.$setTitle = <span class="function"><span class="keyword">function</span> (<span class="params">text</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">document</span>.title = text</span><br><span class="line">&#125;</span><br><span class="line">Vue.prototype.$getPX = <span class="function"><span class="keyword">function</span> (<span class="params">design, designWidth = <span class="number">750</span></span>) </span>&#123; <span class="comment">// 750ä¸ºè®¾è®¡ç¨¿å®½åº¦</span></span><br><span class="line">  <span class="comment">// è·å–çª—å£å°ºå¯¸</span></span><br><span class="line">  <span class="keyword">let</span> width = <span class="built_in">document</span>.documentElement.getBoundingClientRect().width</span><br><span class="line">  <span class="comment">// è®¡ç®—ç¼©æ”¾æ¯”ä¾‹</span></span><br><span class="line">  <span class="keyword">let</span> scale = width / designWidth</span><br><span class="line">  <span class="comment">// è·å–å®æ—¶å°ºå¯¸</span></span><br><span class="line">  <span class="keyword">return</span> design * scale</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p><p>åŒæ—¶ï¼Œåœ¨main.jsæ–‡ä»¶å†…å¼•å…¥è¯¥jsæ–‡ä»¶<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'amfe-flexible'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./utils/flex'</span></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  router,</span><br><span class="line">  components: &#123; App &#125;,</span><br><span class="line">  template: <span class="string">'&lt;App/&gt;'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div></p><h3 id="ç¼–å†™csså¤„ç†æ–¹æ³•"><a href="#ç¼–å†™csså¤„ç†æ–¹æ³•" class="headerlink" title="ç¼–å†™csså¤„ç†æ–¹æ³•"></a>ç¼–å†™csså¤„ç†æ–¹æ³•</h3><p>åœ¨srcç›®å½•åˆ›å»ºstylesç›®å½•ï¼ŒåŒæ—¶åœ¨è¯¥ç›®å½•æ–°å¢common.scssæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scss</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>,<span class="selector-tag">div</span>,<span class="selector-tag">ul</span>,<span class="selector-tag">ol</span>,<span class="selector-tag">dl</span>,<span class="selector-tag">li</span>,<span class="selector-tag">dt</span>,<span class="selector-tag">dd</span>,<span class="selector-tag">h1</span>,<span class="selector-tag">h2</span>,<span class="selector-tag">h3</span>,<span class="selector-tag">h4</span>,<span class="selector-tag">p</span>,<span class="selector-tag">form</span>,<span class="selector-tag">iframe</span>,<span class="selector-tag">input</span>,<span class="selector-tag">textarea</span>,<span class="selector-tag">a</span>,<span class="selector-tag">span</span>,<span class="selector-tag">em</span>,<span class="selector-tag">strong</span>,<span class="selector-tag">img</span>,<span class="selector-tag">html</span>,<span class="selector-tag">nav</span>,<span class="selector-tag">header</span>,<span class="selector-tag">article</span>,<span class="selector-tag">button</span>,<span class="selector-tag">footer</span>,<span class="selector-tag">var</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123; <span class="attribute">font</span>:<span class="number">12px</span>/<span class="number">1.2rem</span> <span class="string">"Microsoft YaHei"</span>,tahoma,arial,sans-serif;<span class="attribute">min-width</span>:<span class="number">320px</span>;<span class="attribute">position</span>:relative; &#125;</span><br><span class="line"><span class="selector-tag">form</span>,<span class="selector-tag">input</span> &#123;<span class="attribute">background</span>:none;<span class="attribute">border</span>:none;&#125;</span><br><span class="line"><span class="selector-tag">ul</span>,<span class="selector-tag">dl</span>,<span class="selector-tag">ol</span> &#123;<span class="attribute">list-style-type</span>:none;&#125;</span><br><span class="line"><span class="selector-tag">h1</span>, <span class="selector-tag">h2</span>, <span class="selector-tag">h3</span>, <span class="selector-tag">h4</span>, <span class="selector-tag">h5</span> &#123; <span class="attribute">font</span>:<span class="number">12px</span>/<span class="number">1.2rem</span> <span class="string">"Microsoft YaHei"</span>,arial,tahoma; &#125;</span><br><span class="line"><span class="selector-tag">a</span> &#123; <span class="attribute">text-decoration</span>:none; &#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>,<span class="selector-tag">a</span><span class="selector-pseudo">:focus</span> &#123; <span class="attribute">outline</span>:none; &#125;</span><br><span class="line"><span class="selector-tag">table</span> &#123; <span class="attribute">border-collapse</span>:collapse;<span class="attribute">border-spacing</span>:<span class="number">0</span>; &#125;</span><br><span class="line"><span class="selector-tag">img</span> &#123; <span class="attribute">border</span>:none; &#125;</span><br><span class="line"><span class="selector-tag">strong</span>,<span class="selector-tag">b</span> &#123; <span class="attribute">font-weight</span>:normal; &#125;</span><br><span class="line"><span class="selector-tag">em</span>,<span class="selector-tag">i</span>,<span class="selector-tag">var</span> &#123; <span class="attribute">font-style</span>:normal; &#125;</span><br><span class="line"><span class="selector-tag">p</span> &#123; <span class="attribute">text-indent</span>:<span class="number">0</span>; &#125;</span><br><span class="line"><span class="selector-class">.clear</span> &#123; <span class="attribute">clear</span>:both;<span class="attribute">height</span>:<span class="number">0</span>;<span class="attribute">line-height</span>:<span class="number">0</span>;<span class="attribute">overflow</span>:hidden;<span class="attribute">width</span>:<span class="number">0</span>; &#125;</span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span> &#123; <span class="attribute">clear</span>:both;<span class="attribute">content</span>:<span class="string">"."</span>;<span class="attribute">display</span>:block;<span class="attribute">font-size</span>:<span class="number">0</span>;<span class="attribute">height</span>:<span class="number">0</span>;<span class="attribute">visibility</span>:hidden; &#125;</span><br><span class="line">  <span class="comment">// å°ºå¯¸è½¬æ¢</span></span><br><span class="line">  <span class="keyword">@function</span> px2rem(<span class="variable">$px</span>, <span class="variable">$base-font-size</span>: <span class="number">75px</span>) &#123; <span class="comment">/*è®¾è®¡ç¨¿å®½åº¦ä¸º750ï¼Œå› æ­¤æ­¤å¤„ä¸º75*/</span></span><br><span class="line">    <span class="keyword">@if</span> (unitless(<span class="variable">$px</span>)) &#123;</span><br><span class="line">      <span class="keyword">@return</span> px2rem(<span class="variable">$px</span> + <span class="number">0px</span>); </span><br><span class="line">    &#125; <span class="keyword">@else</span> if (unit(<span class="variable">$px</span>) == rem) &#123;</span><br><span class="line">      <span class="keyword">@return</span> <span class="variable">$px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">@return</span> (<span class="variable">$px</span> / <span class="variable">$base-font-size</span>) * <span class="number">1rem</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å­—ä½“è½¬æ¢</span></span><br><span class="line">  <span class="keyword">@mixin</span> font-dpr(<span class="variable">$font-size</span>) &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="variable">$font-size</span>;</span><br><span class="line">    <span class="selector-attr">[data-dpr="2"]</span> &amp; &#123;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="variable">$font-size</span> * <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-attr">[data-dpr="3"]</span> &amp; &#123;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="variable">$font-size</span> * <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></div></p><h3 id="csså†…ä½¿ç”¨"><a href="#csså†…ä½¿ç”¨" class="headerlink" title="csså†…ä½¿ç”¨"></a>csså†…ä½¿ç”¨</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scss</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped lang='scss'&gt;</span><br><span class="line">  <span class="keyword">@import</span> <span class="string">'../styles/common.scss'</span>;</span><br><span class="line">    <span class="selector-class">.content</span>&#123;</span><br><span class="line">      <span class="attribute">width</span>:px2rem(<span class="number">750</span>);  <span class="comment">/*750ä¸ºè®¾è®¡ç¨¿å®é™…å°ºå¯¸*/</span></span><br><span class="line">      <span class="attribute">font-size</span>:px2rem(<span class="number">20</span>)  /*<span class="number">20</span>ä¸ºè®¾è®¡ç¨¿å®é™…å°ºå¯¸*/</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></div><h3 id="jså†…ä½¿ç”¨"><a href="#jså†…ä½¿ç”¨" class="headerlink" title="jså†…ä½¿ç”¨"></a>jså†…ä½¿ç”¨</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">   name:<span class="string">'test'</span>,</span><br><span class="line">   data() &#123;</span><br><span class="line">     <span class="keyword">return</span> &#123;</span><br><span class="line">       w:<span class="number">0</span>;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   watch:&#123;</span><br><span class="line">     getWidth() &#123;</span><br><span class="line">         <span class="keyword">this</span>.w=<span class="keyword">this</span>.$getPX(<span class="number">500</span>);</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   computed: &#123;</span><br><span class="line">     fun() &#123;</span><br><span class="line">       <span class="keyword">return</span> (<span class="keyword">this</span>.w/<span class="keyword">this</span>.$getPX(<span class="number">500</span>)*<span class="number">100</span>).toFixed(<span class="number">2</span>) + <span class="string">''</span>;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="vue" scheme="/categories/vue/"/>
    
    
      <category term="vue" scheme="/tags/vue/"/>
    
      <category term="webå‰ç«¯" scheme="/tags/web%E5%89%8D%E7%AB%AF/"/>
    
      <category term="ç§»åŠ¨ç«¯" scheme="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>MACå‡çº§Python3.x</title>
    <link href="/2018/02/05/MAC%E5%8D%87%E7%BA%A7Python3.x/"/>
    <id>/2018/02/05/MACå‡çº§Python3.x/</id>
    <published>2018-02-05T07:02:29.000Z</published>
    <updated>2020-02-15T11:58:37.597Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>macè‡ªå¸¦Pythonä¸º2.7ï¼Œå¦‚ä½•å‡çº§è‡ªå¸¦ç‰ˆæœ¬ï¼Œå…¶å®è¿™ä¸ªé—®é¢˜ç½‘ä¸Šäº‰è®®æ¯”è¾ƒå¤§ï¼Œæœ‰å¤§ç¥åˆ é™¤è‡ªå¸¦pythoné‡æ–°å®‰è£…çš„ï¼Œä½†æ˜¯ä¸ªäººå»ºè®®ä¿ç•™è‡ªå¸¦Pythonï¼Œé€šè¿‡brewå®‰è£…ï¼Œå¼€å‘æµ‹è¯•ä¸¤ä¸è¯¯ï¼Œæ“ä½œå¦‚ä¸‹ï¼š</p><h3 id="æŸ¥çœ‹Pythonç‰ˆæœ¬"><a href="#æŸ¥çœ‹Pythonç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹Pythonç‰ˆæœ¬"></a>æŸ¥çœ‹Pythonç‰ˆæœ¬</h3><p>é¦–å…ˆpython -Vå¾—åˆ°å½“å‰ç³»ç»Ÿç‰ˆæœ¬æ˜¯2.7.10ï¼Œç„¶åé€šè¿‡brewå®‰è£…ï¼Œä¸çŸ¥é“brewçš„è‡ªè¡Œåº¦å¨˜</p><h3 id="brewå‘½ä»¤"><a href="#brewå‘½ä»¤" class="headerlink" title="brewå‘½ä»¤"></a>brewå‘½ä»¤</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install python3</span><br></pre></td></tr></table></figure></div><p>ä¹‹åçš„è¯å‘¢å¯èƒ½æŠ¥é”™<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">subunit</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Error: </span>An unexpected error occurred during the `brew link` step</span><br><span class="line">The formula built, but is not symlinked into /usr/local</span><br><span class="line">Permission denied - /usr/local/Frameworks</span><br><span class="line"><span class="keyword">Error: </span>Permission denied - /usr/local/Frameworks</span><br></pre></td></tr></table></figure></div></p><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><p>æŸ¥çœ‹äº†æ—¥å¿—å‘ç°/usr/local/ä¸‹æ²¡æœ‰è·¯å¾„/usr/local/Frameworks ï¼Œæ‰€ä»¥å…ˆåˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œ<br>æ‰§è¡Œ<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">maxima</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> /usr/<span class="built_in">local</span>/Frameworks</span><br></pre></td></tr></table></figure></div></p><p>ç„¶åä¿®æ”¹ä¸€ä¸‹æƒé™<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">elixir</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown <span class="variable">$(</span>whoami)<span class="symbol">:admin</span> /usr/local/Frameworks</span><br></pre></td></tr></table></figure></div></p><p>æ¥ä¸‹æ¥å†linkä¸€ä¸‹<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">armasm</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span>link python3</span><br></pre></td></tr></table></figure></div></p><p>æç¤º<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">angelscript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Linking /usr/local/Cellar/python3/<span class="number">3.6</span><span class="number">.3</span>... <span class="number">1</span> symlinks created</span><br></pre></td></tr></table></figure></div></p><p>ä»£è¡¨æˆåŠŸäº†ï¼Œæ­¤æ—¶æˆ‘ä»¬python -Vå‘ç°ç»“æœè¿˜æ˜¯2.7.10,å•¥åŸå› å‘¢ï¼Ÿç³»ç»Ÿé»˜è®¤é€‰æ‹©äº†è‡ªå¸¦çš„pythonï¼Œè§£å†³å¾ˆç®€å•ï¼ŒæŠŠå¸¸è§„pythonå‘½ä»¤æ¢æˆpython3ï¼Œæ¯”å¦‚ï¼špython3 -V</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="mac" scheme="/categories/mac/"/>
    
    
      <category term="mac" scheme="/tags/mac/"/>
    
      <category term="Python" scheme="/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨macè‡ªå¸¦é˜¿å¸•å¥‡</title>
    <link href="/2017/02/24/%E4%BD%BF%E7%94%A8mac%E8%87%AA%E5%B8%A6%E9%98%BF%E5%B8%95%E5%A5%87/"/>
    <id>/2017/02/24/ä½¿ç”¨macè‡ªå¸¦é˜¿å¸•å¥‡/</id>
    <published>2017-02-24T07:02:29.000Z</published>
    <updated>2020-02-15T11:58:37.599Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>Apacheå¯¹äºå‰ç«¯ç¨‹åºå‘˜æ¥è¯´æ˜¯å¿…ä¸å¯å°‘çš„ä¸€æ¬¾webæœåŠ¡å™¨ï¼ŒMacç³»ç»Ÿè‡ªèº«å¸¦äº†apacheï¼Œå¯ä»¥ç›´æ¥ç”¨æ¥æ­å»ºæœ¬åœ°webæœåŠ¡å™¨ï¼Œé…ç½®è¿‡ç¨‹ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œæœ¬æ–‡å°†åšç®€è¦æè¿°ï¼Œå¼€å§‹å§</p><h3 id="å¯åŠ¨Apache"><a href="#å¯åŠ¨Apache" class="headerlink" title="å¯åŠ¨Apache"></a>å¯åŠ¨Apache</h3><p>macæ˜¯é»˜è®¤è‡ªåŠ¨å¯åŠ¨Apacheçš„ï¼Œåˆ¤æ–­macæ˜¯å¦å¯åŠ¨äº†Apacheå¾ˆç®€å•ï¼Œæµè§ˆå™¨åœ°å€æ è¾“å…¥<a href="http://127.0.0.1" target="_blank" rel="noopener">http://127.0.0.1</a>   å›è½¦å³å¯ï¼Œå¦‚æœé¡µé¢æ˜¾ç¤ºIt worksï¼è¯æ˜okï¼Œä»‹ç»å‡ ä¸ªå¸¸ç”¨å‘½ä»¤ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apachectl start   //å¼€å¯apache</span><br><span class="line"></span><br><span class="line">sudo apachectl restart   //é‡å¯apache</span><br><span class="line"></span><br><span class="line">sudo apachectl stop    //å…³é—­apache:</span><br></pre></td></tr></table></figure></div><h3 id="phpç‰ˆæœ¬æ£€æŸ¥"><a href="#phpç‰ˆæœ¬æ£€æŸ¥" class="headerlink" title="phpç‰ˆæœ¬æ£€æŸ¥"></a>phpç‰ˆæœ¬æ£€æŸ¥</h3><p>åœ¨æ–°çš„Mac High Sierraä¸­å¯¹phpç‰ˆæœ¬è¿›è¡Œäº†å‡çº§ï¼Œæ‰€ä»¥å…ˆç¡®å®šä½ macçš„phpç‰ˆæœ¬<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">ebnf</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">php -v</span></span><br></pre></td></tr></table></figure></div></p><p>å¦‚æœæç¤ºPHP 7.1.7 (cli) (built: Jul 15 2017 18:08:09) ( NTS )ï¼Œåˆ™ä»£è¡¨phpæ˜¯7.xç‰ˆæœ¬çš„</p><h3 id="åŸºæœ¬é…ç½®"><a href="#åŸºæœ¬é…ç½®" class="headerlink" title="åŸºæœ¬é…ç½®"></a>åŸºæœ¬é…ç½®</h3><p>psï¼šåœ¨è¿›è¡Œä¸€ä¸‹æ“ä½œæ—¶å€™ï¼Œå…ˆåœ¨ç»ˆç«¯æ‰§è¡Œsudo apachectl stopåœæ­¢apacheæœåŠ¡</p><h4 id="æ›´æ”¹work-space"><a href="#æ›´æ”¹work-space" class="headerlink" title="æ›´æ”¹work space"></a>æ›´æ”¹work space</h4><p>Apacheåœ¨Windowsä¸‹é»˜è®¤work spaceä¸ºhtdocsï¼Œåœ¨macä¸‹æœ‰æ‰€åŒºåˆ«ï¼Œè·¯å¾„ä¸ºï¼š/Library/WebServer/Documents<br>å› æ­¤æˆ‘ä»¬éœ€è¦æŠŠå‰ç«¯ä»£ç æ‹·è´åˆ°è¯¥ç›®å½•è¿›è¡Œæµ‹è¯•ï¼Œä½†æ˜¯è¯¥ç›®å½•è—è¿™ä¹ˆæ·±åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­æ˜¾ç„¶æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œå› æ­¤æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ä¿®æ”¹é˜¿å¸•å¥‡ä¸»é…ç½®æ–‡ä»¶httpd.confæ¥æŒ‡å®šwork spaceï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š<br>macé…ç½®æ–‡ä»¶ç›®å½•ä¸ºï¼š/etc ï¼Œé»˜è®¤æ˜¯éšè—çš„ï¼Œå› æ­¤å’±ä»¬åœ¨ç»ˆç«¯é‡Œé¢æ‰§è¡Œï¼šopen /etc/apache2/  å°±å¯ä»¥æ‰“å¼€Apacheä¸»ç›®å½•ï¼Œæ‰¾åˆ°httpd.confæ–‡ä»¶ï¼Œä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œ å¦‚æœä¸æƒ³é‚£ä¹ˆéº»çƒ¦çš„è¯å¯ä»¥ä½¿ç”¨viç¼–è¾‘ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/apache2/httpd.conf</span><br></pre></td></tr></table></figure></div><p>æ¥ä¸‹æ¥æŒ‰ä¸€ä¸‹é”®ç›˜ä¸Šçš„ié”®ï¼Œåº•éƒ¨æç¤ºinsertâ€¦â€¦ä¾¿å¯ä»¥ç§»åŠ¨å…‰æ ‡è¿›è¡Œç¼–è¾‘äº†<br>ç¼–è¾‘ä»¥ä¸‹å†…å®¹ï¼ŒåŸæœ¬ä¸ºï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DocumentRoot <span class="string">"/Library/WebServer/Documents"</span></span><br><span class="line">&lt;Directory <span class="string">"/Library/WebServer/Documents"</span>&gt;</span><br></pre></td></tr></table></figure></div></p><p>ä¿®æ”¹ä¸ºè‡ªå®šä¹‰ç›®å½•ï¼Œæ¯”å¦‚æˆ‘æ”¹æˆæ ¹ç›®å½•çš„sitesæ–‡ä»¶å¤¹ï¼Œé‚£å°±æ˜¯ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DocumentRoot <span class="string">"/Users/ç”¨æˆ·å/Sites"</span></span><br><span class="line">&lt;Directory <span class="string">"/Users/ç”¨æˆ·å/Sites"</span>&gt;</span><br></pre></td></tr></table></figure></div></p><p>ps:ç”¨æˆ·åå³ä½ macçš„ç”¨æˆ·åï¼Œæ¯”å¦‚æˆ‘çš„ç”¨æˆ·åæ˜¯nicolasï¼Œé‚£æ”¹åˆ¶ååº”è¯¥æ˜¯ï¼š<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DocumentRoot <span class="string">"/Users/nicolas/Sites"</span></span><br><span class="line">&lt;Directory <span class="string">"/Users/nicolas/Sites"</span>&gt;</span><br></pre></td></tr></table></figure></div></p><p>è¿™æ ·å­çš„è¯æˆ‘ä»¬å°±å¯ä»¥æŠŠApacheçš„work spaceæ›´æ”¹åˆ°æ ¹è·¯å¾„ä¸‹çš„sitesäº†</p><h4 id="æ›´æ”¹é»˜è®¤ç«¯å£"><a href="#æ›´æ”¹é»˜è®¤ç«¯å£" class="headerlink" title="æ›´æ”¹é»˜è®¤ç«¯å£"></a>æ›´æ”¹é»˜è®¤ç«¯å£</h4><p>è·Ÿæ›´æ”¹é»˜è®¤å·¥ä½œç©ºé—´ä¸€æ ·çš„æ–¹å¼æ‰“å¼€httpd.confï¼Œæ‰¾åˆ°Listen 80è¿™ä¸€è¡Œï¼Œå°†80æ”¹ä¸ºä½ éœ€è¦çš„ç«¯å£å°±å¥½</p><h4 id="æ˜¾ç¤ºæ–‡ä»¶ç›®å½•"><a href="#æ˜¾ç¤ºæ–‡ä»¶ç›®å½•" class="headerlink" title="æ˜¾ç¤ºæ–‡ä»¶ç›®å½•"></a>æ˜¾ç¤ºæ–‡ä»¶ç›®å½•</h4><p>Apacheåœ¨æ²¡æœ‰indexçš„æƒ…å†µä¸‹é»˜è®¤ä¸ä¼šæ˜¾ç¤ºæ–‡ä»¶ç›®å½•ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹httpd.confå®ç°æ–‡ä»¶åˆ—è¡¨çš„å±•ç¤ºï¼Œæ–¹ä¾¿è°ƒè¯•æ“ä½œå¦‚ä¸‹ï¼š<br>å°†httpd.confé‡Œé¢Options FollowSymLinks Multiviewsä¹‹ååŠ ä¸ŠIndexesï¼Œä¿®æ”¹ä¹‹åä¸º<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Options FollowSymLinks Multiviews Indexes</span><br></pre></td></tr></table></figure></div></p><h4 id="æ·»åŠ php7çš„æ”¯æŒ"><a href="#æ·»åŠ php7çš„æ”¯æŒ" class="headerlink" title="æ·»åŠ php7çš„æ”¯æŒ"></a>æ·»åŠ php7çš„æ”¯æŒ</h4><p>åœ¨é‡Œé¢æ‰¾åˆ°<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">apache</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#LoadModule php7_module libexec/apache2/libphp7.so</span></span><br></pre></td></tr></table></figure></div></p><p>åˆ é™¤å‰é¢çš„#ï¼Œä¿®æ”¹ä¹‹åæ˜¯<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">smali</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LoadModule php7_module libexec/apache2/libphp7.so</span><br></pre></td></tr></table></figure></div></p><p>æ¥ä¸‹æ¥ä¿®æ”¹ä¿®æ”¹servernameï¼ˆå¿…è¦æ“ä½œï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼‰<br><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">apache</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ServerAdmin you@example.com</span></span><br><span class="line"><span class="attribute"><span class="nomarkup">ServerName</span></span> localhost</span><br></pre></td></tr></table></figure></div></p><p>ä»¥ä¸Šæ“ä½œéƒ½å®Œæˆä»¥åï¼ŒæŒ‰ä¸‹   esc   ï¼Œè¾“å…¥  :wq  ç„¶åå›è½¦<br>ç´§æ¥ç€åœ¨ç»ˆç«¯sudo apachectl startå³å¯</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="mac" scheme="/categories/mac/"/>
    
    
      <category term="mac" scheme="/tags/mac/"/>
    
      <category term="æœåŠ¡å™¨" scheme="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
</feed>
